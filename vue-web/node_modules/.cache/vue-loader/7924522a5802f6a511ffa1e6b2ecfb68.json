{"remainingRequest":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\views\\sections\\Message.vue?vue&type=style&index=1&id=22d063c0&lang=scss","dependencies":[{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\views\\sections\\Message.vue","mtime":1650964597000},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1652258042074},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1652258044998},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1652258043094},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1652258078791},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652258014056},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1652258044998}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLm1lc3NhZ2UtdGFiLW1lbnVzIHsKICAgIC5lbC10YWJzX19pdGVtIHsKICAgICAgY29sb3I6ICM5OTk7CiAgICAgIGhlaWdodDogMzVweDsKICAgICAgbGluZS1oZWlnaHQ6IDM1cHg7CiAgICAgICY6aG92ZXIsCiAgICAgICY6YWN0aXZlLAogICAgICAmOmZvY3VzIHsKICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgfQogICAgICAmLmlzLWFjdGl2ZSB7CiAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgIH0KICAgIH0KICAgIC5lbC10YWJzX19hY3RpdmUtYmFyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsKICAgIH0KICB9Cg=="},{"version":3,"sources":["C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\views\\sections\\Message.vue"],"names":[],"mappings":";EAyME,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACN,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACb;MACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MACb;IACF;IACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACxB;EACF","file":"C:/Users/Mohamed Tamim/Desktop/SONGTRADER-V2-FULL/fingernft_blindbox/fingernft_blindbox/vue-web/src/views/sections/Message.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"main-wrapper\">\n    <div class=\"message-wrapper\">\n      <div class=\"title\">{{$t('message.message')}}</div>\n\n      <el-tabs class=\"message-tab-menus\" @tab-click=\"tabindexFunc\" v-model=\"tab\">\n        <el-tab-pane class=\"tab-content-info\" v-for=\"(tab,i) in tabs\" :key=\"i\" :name=\"tab.name\">\n          <template #label>\n            <div class=\"tab-content-title\">\n              <span>{{tab.title}}</span>\n              <span v-if=\"tab.name == 'all'\">({{ message.total }})</span>\n              <span v-else>({{ message.unread }})</span>\n            </div>\n          </template>\n\n          <div class=\"message-box\" v-infinite-scroll=\"loadList\">\n            <template v-if=\"loadStatus != 'loading' && !list[tab.name].length\">\n              <no-content tip=\"No Message\"></no-content>\n            </template>\n            <template v-else>\n              <div v-if=\"tab.name=='unread'\" class=\"read-all\">\n                <span @click=\"readAll\" class='cpointer link bfont'>{{$t('message.readAll')}}</span>\n              </div>\n\n              <notice-item v-for=\"(notice, i) in list[tab.name]\" :key=\"i\" :notice=\"notice\" size=\"big\" @close=\"$emit('close')\">\n              </notice-item>\n              <notice-load size=\"big\" :loadStatus=\"loadStatus\"></notice-load>\n            </template>\n          </div>\n\n        </el-tab-pane>\n      </el-tabs>\n\n    </div>\n\n  </div>\n</template>\n<script>\n  import NoticeItem from '@/components/NoticeItem';\n  import NoticeLoad from '@/components/loading/NoticeLoad';\n  export default {\n    components: { NoticeItem, NoticeLoad },\n    data: function () {\n      return {\n        loadStatus: \"\",\n        list: {\n          all: [],\n          unread: [],\n        },\n        tab: \"all\",\n        tabs: [\n          { name: 'all', title: this.$t('message.all'), count: 0 },\n          { name: \"unread\", title: this.$t('message.unread'), count: 0 },\n        ],\n        query: {\n          page: 1,\n          limit: this.$store.state.pageLimit,\n        },\n      };\n    },\n    computed: {\n      user () {\n        return this.$store.state.user\n      },\n      message () {\n        return this.$store.state.message;\n      },\n    },\n    watch: {\n      tab (val, old) {\n        if (val == old) return;\n        this.query.page = 1;\n        this.$router.push({\n          path: '/message', query: { tab: this.tab },\n        });\n        this.loadStatus = \"\";\n        this.getList();\n      }\n    },\n    created () {\n      if (this.$route.query.tab) {\n        this.tab = this.$route.query.tab;\n      }\n      this.init();\n    },\n    methods: {\n      init () {\n        this.$store.dispatch(\"countNotices\");\n        this.query.page = 1;\n        this.getList();\n      },\n      readAll () {\n        this.$api(\"notice.readall\").then((res) => {\n          if (this.$tools.checkResponse(res)) {\n            this.init();\n          }\n        });\n      },\n      loadList () {\n        if (this.loadStatus == 'over') return;\n        this.getList();\n      },\n      tabindexFunc () {\n        return;\n      },\n      queryMedia (nfts, tab) {\n        let _nfts = [];\n        for (let i = 0;i < nfts.length;i++) {\n          let item = nfts[i];\n          _nfts.push(item.content)\n        }\n        _nfts = this.$tools.serializeNfts2(_nfts);\n        let data = {\n          info: _nfts,\n        }\n        if (data.info.length) {\n          this.$api('nft.getmedia', data).then((res) => {\n            if (this.$tools.checkResponse(res)) {\n              this.setNftMedia(res.data, tab);\n            }\n          })\n        }\n      },\n      setNftMedia (nfts, tab) {\n        for (let i = 0;i < this.list[tab].length;i++) {\n          let nft = this.list[tab][i];\n          for (let key in nfts) {\n            let item = key.split(\":\");\n            if (nft.content.address == item[0] && nft.content.tokenId == item[1]) {\n              this.list[tab][i].media = nfts[key];\n            } else if (nft.content.sellToken == item[0] && nft.content.sellTokenId == item[1]) {\n              this.list[tab][i].media = nfts[key];\n            } else if (nft.content.buyToken == item[0] && nft.content.buyTokenId == item[1]) {\n              this.list[tab][i].media = nfts[key];\n            }\n          }\n        }\n      },\n      getList () {\n        if (this.loadStatus == 'loading') return;\n        this.loadStatus = 'loading';\n        let params = {\n          ...this.query,\n          address: this.$store.state.user.coinbase\n        }\n        let tab = this.tab == 'unread' ? 'unread' : 'all';\n        if (tab == 'unread') params.isRead = 0;\n\n        this.$api(\"notice.list\", params).then((res) => {\n          this.loadStatus = 'loaded'\n          if (this.$tools.checkResponse(res)) {\n            if (params.page == 1) this.list[tab] = []\n            this.list[tab] = this.list[tab].concat(res.data.list);\n            // this.queryMedia(res.data.list, tab);\n            this.query.page += 1;\n            this.loadStatus = res.data.list.length < res.data.limit ? 'over' : this.loadStatus;\n          } else {\n            this.$tools.message(res.errmsg)\n          }\n        });\n      },\n    },\n  };\n</script>\n<style lang=\"scss\" scoped>\n  .message-wrapper {\n    max-width: 600px;\n    .title {\n      padding: 30px 0;\n      font-size: 23px;\n      font-weight: bold;\n    }\n    .read-all {\n      padding-bottom: 10px;\n      border-bottom: 1px solid #f0f0f0;\n      margin-bottom: 10px;\n      text-align: right;\n      .link {\n        color: $primaryColor;\n      }\n    }\n    .tab-content-title {\n      min-width: $tabTitleWidth;\n      text-align: center;\n    }\n  }\n\n  @media screen and (max-width: $media_l5) {\n    .message-wrapper {\n      width: 90%;\n      margin: 0 auto;\n    }\n  }\n  @media screen and (max-width: $media_l6) {\n    .message-wrapper {\n      width: 100%;\n      margin: auto;\n    }\n  }\n</style>\n<style lang=\"scss\">\n  .message-tab-menus {\n    .el-tabs__item {\n      color: #999;\n      height: 35px;\n      line-height: 35px;\n      &:hover,\n      &:active,\n      &:focus {\n        color: #333;\n      }\n      &.is-active {\n        color: #333;\n      }\n    }\n    .el-tabs__active-bar {\n      background-color: #333;\n    }\n  }\n</style>\n"]}]}