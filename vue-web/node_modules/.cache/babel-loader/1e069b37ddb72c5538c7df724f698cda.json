{"remainingRequest":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\util\\sdk\\index.js","dependencies":[{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\util\\sdk\\index.js","mtime":1650964597000},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\babel.config.js","mtime":1650964597000},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652258014056},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1652258014277}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL01vaGFtZWQgVGFtaW0vRGVza3RvcC9TT05HVFJBREVSLVYyLUZVTEwvZmluZ2VybmZ0X2JsaW5kYm94L2Zpbmdlcm5mdF9ibGluZGJveC92dWUtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgdXRpbHNfd2ViMyBmcm9tICJAL3V0aWwvd2ViMy9pbmRleCI7Cgp2YXIgV2ViMyA9IHJlcXVpcmUoIndlYjMiKTsKCmltcG9ydCB0eXBlcyBmcm9tICIuL3R5cGVzIjsKaW1wb3J0IHV0aWxzIGZyb20gIi4vdXRpbHMiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCB0cnVmZmxlX2NvbnRyYWN0IGZyb20gIkB0cnVmZmxlL2NvbnRyYWN0IjsKaW1wb3J0IGNvbnN0YW50cyBmcm9tICIuL2NvbnN0YW50cyI7CmltcG9ydCBCaWdOdW1iZXIgZnJvbSAiYmlnbnVtYmVyLmpzIjsKCnZhciBldGhfdXRpbCA9IHJlcXVpcmUoImV0aGVyZXVtanMtdXRpbCIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5ld0VSQzcyMTogZnVuY3Rpb24gbmV3RVJDNzIxKG93bmVyLCBhc3NldCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGFiaSwgY29udHJhY3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhYmkgPSB1dGlscy5jb250cmFjdEFiaSgiQ3JlYXRlTkZUNzIxIik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmNvbnRyYWN0QXQoYWJpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb250cmFjdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjb250cmFjdCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0Lm5ldyhhc3NldC5uYW1lLCBhc3NldC5zeW1ib2wsIGFzc2V0Lm1pbmVyLCBhc3NldC5jb250cmFjdFVSSSwgYXNzZXQudXJpLCB7CiAgICAgICAgICAgICAgICBmcm9tOiBvd25lcgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAxMl1dKTsKICAgIH0pKSgpOwogIH0sCiAgbmV3RVJDMTE1NTogZnVuY3Rpb24gbmV3RVJDMTE1NShvd25lciwgYXNzZXQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgYWJpLCBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhYmkgPSB1dGlscy5jb250cmFjdEFiaSgiQ3JlYXRlTkZUMTE1NSIpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuY29udHJhY3RBdChhYmkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5uZXcoYXNzZXQubmFtZSwgYXNzZXQuc3ltYm9sLCBhc3NldC5taW5lciwgYXNzZXQuY29udHJhY3RVUkksIGFzc2V0LnVyaSwgewogICAgICAgICAgICAgICAgZnJvbTogb3duZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0Mi50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIHRvdGFsU3VwcGx5OiBmdW5jdGlvbiB0b3RhbFN1cHBseShhc3NldCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbnRyYWN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFzc2V0ID0gX3RoaXMuZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldEFzc2V0Q29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LnRvdGFsU3VwcGx5KCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgbWludFRva2VuOiBmdW5jdGlvbiBtaW50VG9rZW4ob3duZXIsIGFzc2V0KSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIGNvbnRyYWN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFzc2V0ID0gX3RoaXMyLmdldEZ1bGxBc3NldChhc3NldCk7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0QXNzZXRDb250cmFjdChhc3NldCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCFjb250cmFjdC5lcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0Lm1pbnQoYXNzZXQudG9rZW5JZCwgYXNzZXQuc2lnbmF0dXJlLnYsIGFzc2V0LnNpZ25hdHVyZS5yLCBhc3NldC5zaWduYXR1cmUucywgYXNzZXQuZmVlcywgYXNzZXQudG9rZW5VUkksIHsKICAgICAgICAgICAgICAgIGZyb206IG93bmVyCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDQudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzYsIDEyXV0pOwogICAgfSkpKCk7CiAgfSwKICBtaW50RXJjMTE1NVRva2VuOiBmdW5jdGlvbiBtaW50RXJjMTE1NVRva2VuKG93bmVyLCBhc3NldCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgIHZhciBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzMy5nZXRGdWxsQXNzZXQoYXNzZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmdldEFzc2V0Q29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQ1LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5taW50KGFzc2V0LnRva2VuSWQsIGFzc2V0LnNpZ25hdHVyZS52LCBhc3NldC5zaWduYXR1cmUuciwgYXNzZXQuc2lnbmF0dXJlLnMsIGFzc2V0LmZlZXMsIGFzc2V0LnF1YW50aXR5LCBhc3NldC50b2tlblVSSSwgewogICAgICAgICAgICAgICAgZnJvbTogb3duZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0NS50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIGlzQXBwcm92ZWRGb3JBbGw6IGZ1bmN0aW9uIGlzQXBwcm92ZWRGb3JBbGwoYXNzZXQsIG93bmVyLCBvcGVyYXRvcikgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzNC5nZXRGdWxsQXNzZXQoYXNzZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LmdldEFzc2V0Q29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5pc0FwcHJvdmVkRm9yQWxsKG93bmVyLCBvcGVyYXRvcik7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Ni5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDYudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzYsIDEyXV0pOwogICAgfSkpKCk7CiAgfSwKICBzZXRBcHByb3ZhbEZvckFsbDogZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYXNzZXQsIGNvaW5iYXNlLCBvcGVyYXRvciwgYXBwcm92ZWQpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICB2YXIgY29udHJhY3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXNzZXQgPSBfdGhpczUuZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRBc3NldENvbnRyYWN0KGFzc2V0KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb250cmFjdCA9IF9jb250ZXh0Ny5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBjb250cmFjdCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3Quc2V0QXBwcm92YWxGb3JBbGwob3BlcmF0b3IsIGFwcHJvdmVkLCB7CiAgICAgICAgICAgICAgICBmcm9tOiBjb2luYmFzZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgX2NvbnRleHQ3LnQwID0gX2NvbnRleHQ3WyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQ3LnQwLm1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNywgbnVsbCwgW1s2LCAxMl1dKTsKICAgIH0pKSgpOwogIH0sCiAgZ2V0RnVsbEFzc2V0OiBmdW5jdGlvbiBnZXRGdWxsQXNzZXQoYXNzZXQpIHsKICAgIHZhciB0eXBlID0gdHlwZXMua2V5QXNzZXRUeXBlKGFzc2V0LnR5cGUpOwogICAgdmFyIGFiaSA9IHV0aWxzLmNvbnRyYWN0QWJpKHR5cGUpOwogICAgYXNzZXQuYWJpID0gYWJpOwogICAgcmV0dXJuIGFzc2V0OwogIH0sCiAgZ2V0QmFsYW5jZTogZnVuY3Rpb24gZ2V0QmFsYW5jZShhc3NldCwgb3duZXIpIHsKICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICB2YXIgd2ViMywgYmFsYW5jZSwgY29udHJhY3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB1dGlsc193ZWIzLmdldFdlYjMoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICB3ZWIzID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAzOwoKICAgICAgICAgICAgICBpZiAoIShhc3NldC5hZGRyZXNzID09IF90aGlzNi5OVUxMX0FERFJFU1MoKSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gd2ViMy5ldGguZ2V0QmFsYW5jZShvd25lcik7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgYmFsYW5jZSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCB3ZWIzLnV0aWxzLmZyb21XZWkoYmFsYW5jZS50b1N0cmluZygpLCAiZXRoZXIiKSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGFzc2V0LnR5cGUgPSB0eXBlcy52YWx1ZUFzc2V0VHlwZSgiRVJDMjAiKTsKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzNi5nZXRGdWxsQXNzZXQoYXNzZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5nZXRBc3NldENvbnRyYWN0KGFzc2V0KTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDguc2VudDsKCiAgICAgICAgICAgICAgaWYgKCFjb250cmFjdC5lcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyMDsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3QuYmFsYW5jZU9mKG93bmVyKTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyNjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAyMzsKICAgICAgICAgICAgICBfY29udGV4dDgudDAgPSBfY29udGV4dDhbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDgudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU4LCBudWxsLCBbWzMsIDIzXV0pOwogICAgfSkpKCk7CiAgfSwKICBnZXRORlRCYWxhbmNlOiBmdW5jdGlvbiBnZXRORlRCYWxhbmNlKGFzc2V0LCBvd25lcikgewogICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgIHZhciB3ZWIzLCBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzX3dlYjMuZ2V0V2ViMygpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHdlYjMgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDM7CiAgICAgICAgICAgICAgYXNzZXQgPSBfdGhpczcuZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXRBc3NldENvbnRyYWN0KGFzc2V0KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjb250cmFjdCA9IF9jb250ZXh0OS5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBpZiAoISh0eXBlcy5rZXlBc3NldFR5cGUoYXNzZXQudHlwZSkgPT0gIkVSQzExNTUiKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3QuYmFsYW5jZU9mKG93bmVyLCBhc3NldC50b2tlbklkKTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OS5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxODsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3QuYmFsYW5jZU9mKG93bmVyKTsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0OS5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyNDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAyMTsKICAgICAgICAgICAgICBfY29udGV4dDkudDAgPSBfY29udGV4dDlbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDkudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU5LCBudWxsLCBbWzMsIDIxXV0pOwogICAgfSkpKCk7CiAgfSwKICBnZXRBc3NldENvbnRyYWN0OiBmdW5jdGlvbiBnZXRBc3NldENvbnRyYWN0KGFzc2V0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFzc2V0LmNvbnRyYWN0QWRkcmVzcyA9IGFzc2V0LmFkZHJlc3M7CiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuY29udHJhY3RBdChhc3NldC5hYmksIGFzc2V0LmNvbnRyYWN0QWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEwLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICB9KSkoKTsKICB9LAogIHRyYW5zZmVyQXNzZXQ6IGZ1bmN0aW9uIHRyYW5zZmVyQXNzZXQoYXNzZXQsIGZyb20sIHRvKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgIHZhciBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXNzZXQgPSBfdGhpczguZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczguZ2V0QXNzZXRDb250cmFjdChhc3NldCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDExLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3QudHJhbnNmZXJGcm9tKGZyb20sIHRvLCBhc3NldC50b2tlbklkLCB7CiAgICAgICAgICAgICAgICBmcm9tOiBmcm9tCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDExLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDExLnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dDExLnQwID0gX2NvbnRleHQxMVsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDExLnQwLm1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTExLCBudWxsLCBbWzYsIDEyXV0pOwogICAgfSkpKCk7CiAgfSwKICB0cmFuc2ZlckFzc2V0MTE1NTogZnVuY3Rpb24gdHJhbnNmZXJBc3NldDExNTUoYXNzZXQsIGZyb20sIHRvKSB7CiAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgIHZhciB3ZWIzLCBjb250cmFjdCwgZGF0YTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdXRpbHNfd2ViMy5nZXRXZWIzKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgd2ViMyA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzOS5nZXRGdWxsQXNzZXQoYXNzZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOS5nZXRBc3NldENvbnRyYWN0KGFzc2V0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjb250cmFjdCA9IF9jb250ZXh0MTIuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCFjb250cmFjdC5lcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBjb250cmFjdCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gOTsKICAgICAgICAgICAgICBkYXRhID0gd2ViMy5ldGguYWJpLmVuY29kZVBhcmFtZXRlcnMoWyJhZGRyZXNzIiwgImFkZHJlc3MiLCAidWludDI1NiIsICJ1aW50MjU2Il0sIFtmcm9tLCB0bywgYXNzZXQudG9rZW5JZCwgYXNzZXQucXVhbnRpdHldKTsKICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3Quc2FmZVRyYW5zZmVyRnJvbShmcm9tLCB0bywgYXNzZXQudG9rZW5JZCwgYXNzZXQucXVhbnRpdHksIGRhdGEsIHsKICAgICAgICAgICAgICAgIGZyb206IGZyb20KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAxNjsKICAgICAgICAgICAgICBfY29udGV4dDEyLnQwID0gX2NvbnRleHQxMlsiY2F0Y2giXSg5KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDEyLnQwLm1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTEyLCBudWxsLCBbWzksIDE2XV0pOwogICAgfSkpKCk7CiAgfSwKICBidXJuQXNzZXQ6IGZ1bmN0aW9uIGJ1cm5Bc3NldChhc3NldCkgewogICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMygpIHsKICAgICAgdmFyIGNvbnRyYWN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzMTAuZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLmdldEFzc2V0Q29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQxMy5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LmJ1cm4oYXNzZXQudG9rZW5JZCwgewogICAgICAgICAgICAgICAgZnJvbTogYXNzZXQub3duZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTMuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0MTMudDAgPSBfY29udGV4dDEzWyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTMudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTMsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIGJ1cm5Bc3NldDExNTU6IGZ1bmN0aW9uIGJ1cm5Bc3NldDExNTUoYXNzZXQpIHsKICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgIHZhciBjb250cmFjdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXNzZXQgPSBfdGhpczExLmdldEZ1bGxBc3NldChhc3NldCk7CiAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS5nZXRBc3NldENvbnRyYWN0KGFzc2V0KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjb250cmFjdCA9IF9jb250ZXh0MTQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCFjb250cmFjdC5lcnJvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCBjb250cmFjdCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5idXJuKGFzc2V0Lm93bmVyLCBhc3NldC50b2tlbklkLCBhc3NldC5xdWFudGl0eSwgewogICAgICAgICAgICAgICAgZnJvbTogYXNzZXQub3duZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTQuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0MTQudDAgPSBfY29udGV4dDE0WyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTQudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTQsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIGNhbmNlbE9yZGVyOiBmdW5jdGlvbiBjYW5jZWxPcmRlcihvd25lciwgYXNzZXQpIHsKICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgIHZhciBjb250cmFjdCwgb3JkZXJLZXk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTIuZ2V0RXhjaGFuZ2VDb250cmFjdChhc3NldCwgb3duZXIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQxNS5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBvcmRlcktleSA9IHV0aWxzLmdldE9yZGVyS2V5KGFzc2V0KTsKCiAgICAgICAgICAgICAgaWYgKG9yZGVyS2V5KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiAiZXJyb3IgVG9rZW4iCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgb3JkZXJLZXkgPSB1dGlscy50dXBsZU9yZGVyS2V5KG9yZGVyS2V5KTsKICAgICAgICAgICAgICBfY29udGV4dDE1LnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5jYW5jZWwob3JkZXJLZXksIHsKICAgICAgICAgICAgICAgIGZyb206IG93bmVyCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNS5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQxNS5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgX2NvbnRleHQxNS50MCA9IF9jb250ZXh0MTVbImNhdGNoIl0oOSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxNS50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxNSwgbnVsbCwgW1s5LCAxNV1dKTsKICAgIH0pKSgpOwogIH0sCiAgZXhjaGFuZ2VPcmRlcjogZnVuY3Rpb24gZXhjaGFuZ2VPcmRlcihvd25lciwgYXNzZXQpIHsKICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgIHZhciBjb250cmFjdCwgb3JkZXIsIFNpZywgYnV5ZXJGZWVTaWcsIHZhbHVlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE2JChfY29udGV4dDE2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLmdldEV4Y2hhbmdlQ29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQxNi5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBvcmRlciA9IHV0aWxzLmNyZWF0ZU9yZGVyKGFzc2V0KTsKCiAgICAgICAgICAgICAgaWYgKG9yZGVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiAiZXJyb3IgVG9rZW4iCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgU2lnID0gX3RoaXMxMy5wYXJzZVNpZ25hdHVyZUhleChhc3NldC5zaWduYXR1cmUpOwogICAgICAgICAgICAgIFNpZyA9IFtTaWcudiwgU2lnLnIsIFNpZy5zXTsKICAgICAgICAgICAgICBidXllckZlZVNpZyA9IGFzc2V0LmJ1eWVyRmVlU2lnOwogICAgICAgICAgICAgIGJ1eWVyRmVlU2lnID0gW2J1eWVyRmVlU2lnLnYsIGJ1eWVyRmVlU2lnLnIsIGJ1eWVyRmVlU2lnLnNdOwogICAgICAgICAgICAgIG9yZGVyID0gdXRpbHMudHVwbGVPcmRlcihvcmRlcik7CiAgICAgICAgICAgICAgdmFsdWUgPSBXZWIzLnV0aWxzLnRvV2VpKGFzc2V0LnZhbHVlLCAiZXRoZXIiKS50b1N0cmluZygpOwogICAgICAgICAgICAgIF9jb250ZXh0MTYucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDE3OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5leGNoYW5nZShvcmRlciwgU2lnLCBhc3NldC5idXllckZlZSwgYnV5ZXJGZWVTaWcsIGFzc2V0LmFtb3VudCwgYXNzZXQuYnV5ZXIsIHsKICAgICAgICAgICAgICAgIGZyb206IG93bmVyLAogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNi5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgX2NvbnRleHQxNi5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgX2NvbnRleHQxNi50MCA9IF9jb250ZXh0MTZbImNhdGNoIl0oMTQpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTYudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTYsIG51bGwsIFtbMTQsIDIwXV0pOwogICAgfSkpKCk7CiAgfSwKICBleGNoYW5nZUF1Y3Rpb246IGZ1bmN0aW9uIGV4Y2hhbmdlQXVjdGlvbihvd25lciwgYXNzZXQpIHsKICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTcoKSB7CiAgICAgIHZhciBjb250cmFjdCwgb3JkZXIsIG93bmVyU2lnLCBidXllclNpZywgYnV5ZXJGZWVTaWcsIHZhbHVlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNy5wcmV2ID0gX2NvbnRleHQxNy5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE0LmdldEF1Y3Rpb25Db250cmFjdChhc3NldCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDE3LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIG9yZGVyID0gdXRpbHMuY3JlYXRlQXVjdGlvbk9yZGVyKGFzc2V0KTsKCiAgICAgICAgICAgICAgaWYgKG9yZGVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIGVycm9yOiAiZXJyb3IgVG9rZW4iCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgb3duZXJTaWcgPSBfdGhpczE0LnBhcnNlU2lnbmF0dXJlSGV4KGFzc2V0LnNpZ25hdHVyZSk7CiAgICAgICAgICAgICAgb3duZXJTaWcgPSBbb3duZXJTaWcudiwgb3duZXJTaWcuciwgb3duZXJTaWcuc107CiAgICAgICAgICAgICAgYnV5ZXJTaWcgPSBfdGhpczE0LnBhcnNlU2lnbmF0dXJlSGV4KGFzc2V0LmJpZFNpZ25hdHVyZSk7CiAgICAgICAgICAgICAgYnV5ZXJTaWcgPSBbYnV5ZXJTaWcudiwgYnV5ZXJTaWcuciwgYnV5ZXJTaWcuc107CiAgICAgICAgICAgICAgYnV5ZXJGZWVTaWcgPSBhc3NldC5idXllckZlZVNpZzsKICAgICAgICAgICAgICBidXllckZlZVNpZyA9IFtidXllckZlZVNpZy52LCBidXllckZlZVNpZy5yLCBidXllckZlZVNpZy5zXTsKICAgICAgICAgICAgICBvcmRlciA9IHV0aWxzLnR1cGxlQXVjdGlvbk9yZGVyKG9yZGVyKTsKICAgICAgICAgICAgICB2YWx1ZSA9IFdlYjMudXRpbHMudG9XZWkoYXNzZXQudmFsdWUsICJldGhlciIpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5wcmV2ID0gMTY7CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LmV4Y2hhbmdlKG9yZGVyLCBvd25lclNpZywgYXNzZXQuYmlkQnV5aW5nLCBidXllclNpZywgYXNzZXQucmVjaXBpZW50cywgYXNzZXQuYnV5ZXJGZWUsIGJ1eWVyRmVlU2lnLCBhc3NldC5idXllciwgewogICAgICAgICAgICAgICAgZnJvbTogb3duZXIsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE3LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBfY29udGV4dDE3LnByZXYgPSAyMjsKICAgICAgICAgICAgICBfY29udGV4dDE3LnQwID0gX2NvbnRleHQxN1siY2F0Y2giXSgxNik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxNy50MC5tZXNzYWdlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxNywgbnVsbCwgW1sxNiwgMjJdXSk7CiAgICB9KSkoKTsKICB9LAogIG9wZW5CbGluZEJveDogZnVuY3Rpb24gb3BlbkJsaW5kQm94KG93bmVyLCBhc3NldCkgewogICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgdmFyIGNvbnRyYWN0LCBvcmRlciwgU2lnLCBidXllckZlZVNpZywgdmFsdWU7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTgpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTUuZ2V0QmxpbmRCb3hDb250cmFjdChhc3NldCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDE4LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIG9yZGVyID0gdXRpbHMuY3JlYXRlQmxpbmRPcmRlcihhc3NldCk7CgogICAgICAgICAgICAgIGlmIChvcmRlcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogImVycm9yIFRva2VuIgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIFNpZyA9IF90aGlzMTUucGFyc2VTaWduYXR1cmVIZXgoYXNzZXQuc2lnbmF0dXJlKTsKICAgICAgICAgICAgICBTaWcgPSBbU2lnLnYsIFNpZy5yLCBTaWcuc107CiAgICAgICAgICAgICAgYnV5ZXJGZWVTaWcgPSBhc3NldC5idXllckZlZVNpZzsKICAgICAgICAgICAgICBidXllckZlZVNpZyA9IFtidXllckZlZVNpZy52LCBidXllckZlZVNpZy5yLCBidXllckZlZVNpZy5zXTsKICAgICAgICAgICAgICBvcmRlciA9IHV0aWxzLnR1cGxlQmxpbmRPcmRlcihvcmRlcik7CiAgICAgICAgICAgICAgdmFsdWUgPSBXZWIzLnV0aWxzLnRvV2VpKGFzc2V0LnZhbHVlLCAiZXRoZXIiKS50b1N0cmluZygpOwogICAgICAgICAgICAgIF9jb250ZXh0MTgucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDE3OwogICAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5vcGVuKG9yZGVyLCBTaWcsIGFzc2V0LmJ1eWVyRmVlLCBidXllckZlZVNpZywgYXNzZXQuYW1vdW50LCBhc3NldC5idXllciwgewogICAgICAgICAgICAgICAgZnJvbTogb3duZXIsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgICAgICB9KS5vbigidHJhbnNhY3Rpb25IYXNoIiwgZnVuY3Rpb24gKGhhc2gpIHsKICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgiQkxJTkRCT1hfU0lHTkVEIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxOC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgX2NvbnRleHQxOC5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgX2NvbnRleHQxOC50MCA9IF9jb250ZXh0MThbImNhdGNoIl0oMTQpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MTgudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTgsIG51bGwsIFtbMTQsIDIwXV0pOwogICAgfSkpKCk7CiAgfSwKICBnZXRFeGNoYW5nZUNvbnRyYWN0OiBmdW5jdGlvbiBnZXRFeGNoYW5nZUNvbnRyYWN0KGFzc2V0LCBvd25lcikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE5KCkgewogICAgICB2YXIgYWJpOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE5JChfY29udGV4dDE5KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhYmkgPSB1dGlscy5jb250cmFjdEFiaSgiRVhDSEFOR0UiKTsKICAgICAgICAgICAgICBhc3NldC5jb250cmFjdEFkZHJlc3MgPSBhc3NldC5leGNoYW5nZUFkZHJlc3M7CiAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuY29udHJhY3RBdChhYmksIGFzc2V0LmNvbnRyYWN0QWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE5LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICB9KSkoKTsKICB9LAogIGdldEF1Y3Rpb25Db250cmFjdDogZnVuY3Rpb24gZ2V0QXVjdGlvbkNvbnRyYWN0KGFzc2V0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMjAoKSB7CiAgICAgIHZhciBhYmk7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjApIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFiaSA9IHV0aWxzLmNvbnRyYWN0QWJpKCJBVUNUSU9OIik7CiAgICAgICAgICAgICAgYXNzZXQuY29udHJhY3RBZGRyZXNzID0gYXNzZXQuYXVjdGlvbkFkZHJlc3M7CiAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gdXRpbHMuY29udHJhY3RBdChhYmksIGFzc2V0LmNvbnRyYWN0QWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIwLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyMCk7CiAgICB9KSkoKTsKICB9LAogIGdldEJsaW5kQm94Q29udHJhY3Q6IGZ1bmN0aW9uIGdldEJsaW5kQm94Q29udHJhY3QoYXNzZXQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMSgpIHsKICAgICAgdmFyIGFiaTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMSQoX2NvbnRleHQyMSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYWJpID0gdXRpbHMuY29udHJhY3RBYmkoIkJMSU5EQk9YIik7CiAgICAgICAgICAgICAgYXNzZXQuY29udHJhY3RBZGRyZXNzID0gYXNzZXQuYmxpbmRCb3hBZGRyZXNzOwogICAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHV0aWxzLmNvbnRyYWN0QXQoYWJpLCBhc3NldC5jb250cmFjdEFkZHJlc3MpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyMS5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMjEpOwogICAgfSkpKCk7CiAgfSwKICBhbGxvd2FuY2VQYXlUb2tlbjogZnVuY3Rpb24gYWxsb3dhbmNlUGF5VG9rZW4oYXNzZXQsIG93bmVyLCBzcGVuZGVyKSB7CiAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIyKCkgewogICAgICB2YXIgY29udHJhY3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMjIkKF9jb250ZXh0MjIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIyLnByZXYgPSBfY29udGV4dDIyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFzc2V0ID0gX3RoaXMxNi5nZXRGdWxsQXNzZXQoYXNzZXQpOwogICAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuZ2V0QXNzZXRDb250cmFjdChhc3NldCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY29udHJhY3QgPSBfY29udGV4dDIyLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghY29udHJhY3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmFicnVwdCgicmV0dXJuIiwgY29udHJhY3QpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0MjIucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gY29udHJhY3QuYWxsb3dhbmNlKG93bmVyLCBzcGVuZGVyKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MjIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MjIucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0MjIudDAgPSBfY29udGV4dDIyWyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MjIudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMjIsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIGFwcHJvdmVQYXlUb2tlbjogZnVuY3Rpb24gYXBwcm92ZVBheVRva2VuKGFzc2V0LCBvd25lciwgc3BlbmRlcikgewogICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyMygpIHsKICAgICAgdmFyIGNvbnRyYWN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIzJChfY29udGV4dDIzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhc3NldCA9IF90aGlzMTcuZ2V0RnVsbEFzc2V0KGFzc2V0KTsKICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczE3LmdldEFzc2V0Q29udHJhY3QoYXNzZXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNvbnRyYWN0ID0gX2NvbnRleHQyMy5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWNvbnRyYWN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoInJldHVybiIsIGNvbnRyYWN0KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIzLnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LmFwcHJvdmUoc3BlbmRlciwgY29uc3RhbnRzLk1BWF9BUFBST1ZFX0FNT1VOVCwgewogICAgICAgICAgICAgICAgZnJvbTogb3duZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MjMuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9jb250ZXh0MjMucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0MjMudDAgPSBfY29udGV4dDIzWyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIzLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgZXJyb3I6IF9jb250ZXh0MjMudDAubWVzc2FnZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMjMsIG51bGwsIFtbNiwgMTJdXSk7CiAgICB9KSkoKTsKICB9LAogIHBhcnNlU2lnbmF0dXJlSGV4OiBmdW5jdGlvbiBwYXJzZVNpZ25hdHVyZUhleChzaWduYXR1cmUpIHsKICAgIGlmICghc2lnbmF0dXJlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdjogMCwKICAgICAgICByOiAiMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIiwKICAgICAgICBzOiAiMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIgogICAgICB9OwogICAgfQoKICAgIHZhciB2YWxpZFZQYXJhbVZhbHVlcyA9IFsyNywgMjhdOwoKICAgIHZhciBlY1NpZ25hdHVyZVJTViA9IF9wYXJzZVNpZ25hdHVyZUhleEFzUlNWKHNpZ25hdHVyZSk7CgogICAgaWYgKHZhbGlkVlBhcmFtVmFsdWVzLmluY2x1ZGVzKGVjU2lnbmF0dXJlUlNWLnYpKSB7CiAgICAgIHJldHVybiBlY1NpZ25hdHVyZVJTVjsKICAgIH0KCiAgICB2YXIgZWNTaWduYXR1cmVWUlMgPSBfcGFyc2VTaWduYXR1cmVIZXhBc1ZSUyhzaWduYXR1cmUpOwoKICAgIGlmICh2YWxpZFZQYXJhbVZhbHVlcy5pbmNsdWRlcyhlY1NpZ25hdHVyZVZSUy52KSkgewogICAgICByZXR1cm4gZWNTaWduYXR1cmVWUlM7CiAgICB9CgogICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHNpZ25hdHVyZSIpOwoKICAgIGZ1bmN0aW9uIF9wYXJzZVNpZ25hdHVyZUhleEFzVlJTKHNpZ25hdHVyZUhleCkgewogICAgICB2YXIgc2lnbmF0dXJlQnVmZmVyID0gZXRoX3V0aWwudG9CdWZmZXIoc2lnbmF0dXJlSGV4KTsKICAgICAgdmFyIHYgPSBzaWduYXR1cmVCdWZmZXJbMF07CgogICAgICBpZiAodiA8IDI3KSB7CiAgICAgICAgdiArPSAyNzsKICAgICAgfQoKICAgICAgdmFyIHIgPSBzaWduYXR1cmVCdWZmZXIuc2xpY2UoMSwgMzMpOwogICAgICB2YXIgcyA9IHNpZ25hdHVyZUJ1ZmZlci5zbGljZSgzMywgNjUpOwogICAgICB2YXIgZWNTaWduYXR1cmUgPSB7CiAgICAgICAgdjogdiwKICAgICAgICByOiBldGhfdXRpbC5idWZmZXJUb0hleChyKSwKICAgICAgICBzOiBldGhfdXRpbC5idWZmZXJUb0hleChzKQogICAgICB9OwogICAgICByZXR1cm4gZWNTaWduYXR1cmU7CiAgICB9CgogICAgZnVuY3Rpb24gX3BhcnNlU2lnbmF0dXJlSGV4QXNSU1Yoc2lnbmF0dXJlSGV4KSB7CiAgICAgIHZhciBfZXRoX3V0aWwkZnJvbVJwY1NpZyA9IGV0aF91dGlsLmZyb21ScGNTaWcoc2lnbmF0dXJlSGV4KSwKICAgICAgICAgIHYgPSBfZXRoX3V0aWwkZnJvbVJwY1NpZy52LAogICAgICAgICAgciA9IF9ldGhfdXRpbCRmcm9tUnBjU2lnLnIsCiAgICAgICAgICBzID0gX2V0aF91dGlsJGZyb21ScGNTaWcuczsKCiAgICAgIHZhciBlY1NpZ25hdHVyZSA9IHsKICAgICAgICB2OiB2LAogICAgICAgIHI6IGV0aF91dGlsLmJ1ZmZlclRvSGV4KHIpLAogICAgICAgIHM6IGV0aF91dGlsLmJ1ZmZlclRvSGV4KHMpCiAgICAgIH07CiAgICAgIHJldHVybiBlY1NpZ25hdHVyZTsKICAgIH0KICB9LAogIGdldEFzc2V0VHlwZTogZnVuY3Rpb24gZ2V0QXNzZXRUeXBlKGFzc2V0KSB7CiAgICBzd2l0Y2ggKGFzc2V0LnR5cGUpIHsKICAgICAgY2FzZSAiRVJDNzIxIjoKICAgICAgICByZXR1cm4gMzsKCiAgICAgIGNhc2UgIkVSQzExNTUiOgogICAgICAgIHJldHVybiAyOwogICAgfQoKICAgIHJldHVybiAwOwogIH0sCiAga2V5T3JkZXJUeXBlOiBmdW5jdGlvbiBrZXlPcmRlclR5cGUodmFsdWUpIHsKICAgIHJldHVybiB0eXBlcy5rZXlPcmRlclR5cGUodmFsdWUpOwogIH0sCiAgdmFsdWVPcmRlclR5cGU6IGZ1bmN0aW9uIHZhbHVlT3JkZXJUeXBlKGtleSkgewogICAgcmV0dXJuIHR5cGVzLnZhbHVlT3JkZXJUeXBlKGtleSk7CiAgfSwKICBrZXlDb21tb25UeXBlOiBmdW5jdGlvbiBrZXlDb21tb25UeXBlKHZhbHVlKSB7CiAgICByZXR1cm4gdHlwZXMua2V5Q29tbW9uVHlwZSh2YWx1ZSk7CiAgfSwKICB2YWx1ZUNvbW1vblR5cGU6IGZ1bmN0aW9uIHZhbHVlQ29tbW9uVHlwZShrZXkpIHsKICAgIHJldHVybiB0eXBlcy52YWx1ZUNvbW1vblR5cGUoa2V5KTsKICB9LAogIGtleUFzc2V0VHlwZTogZnVuY3Rpb24ga2V5QXNzZXRUeXBlKHZhbHVlKSB7CiAgICByZXR1cm4gdHlwZXMua2V5QXNzZXRUeXBlKHZhbHVlKTsKICB9LAogIHZhbHVlQXNzZXRUeXBlOiBmdW5jdGlvbiB2YWx1ZUFzc2V0VHlwZShrZXkpIHsKICAgIHJldHVybiB0eXBlcy52YWx1ZUFzc2V0VHlwZShrZXkpOwogIH0sCiAgTlVMTF9BRERSRVNTOiBmdW5jdGlvbiBOVUxMX0FERFJFU1MoKSB7CiAgICByZXR1cm4gY29uc3RhbnRzLk5VTExfQUREUkVTUzsKICB9Cn07"},null]}