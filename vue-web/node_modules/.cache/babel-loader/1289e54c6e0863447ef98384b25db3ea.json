{"remainingRequest":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\components\\dialogs\\Mint.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\components\\dialogs\\Mint.vue","mtime":1650964597000},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\babel.config.js","mtime":1650964597000},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652258014056},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1652258014277},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652258014056},{"path":"C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1652258044998}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQzovVXNlcnMvTW9oYW1lZCBUYW1pbS9EZXNrdG9wL1NPTkdUUkFERVItVjItRlVMTC9maW5nZXJuZnRfYmxpbmRib3gvZmluZ2VybmZ0X2JsaW5kYm94L3Z1ZS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL01vaGFtZWQgVGFtaW0vRGVza3RvcC9TT05HVFJBREVSLVYyLUZVTEwvZmluZ2VybmZ0X2JsaW5kYm94L2Zpbmdlcm5mdF9ibGluZGJveC92dWUtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL01vaGFtZWQgVGFtaW0vRGVza3RvcC9TT05HVFJBREVSLVYyLUZVTEwvZmluZ2VybmZ0X2JsaW5kYm94L2Zpbmdlcm5mdF9ibGluZGJveC92dWUtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IHRoaXMuc2hvdywKICAgICAgc3RlcDogewogICAgICAgIGFwcHJvdmU6IDAsCiAgICAgICAgbWludDogMCwKICAgICAgICBzYWxlOiAwLAogICAgICAgIGZpbGVVcDogMAogICAgICB9LAogICAgICBlcnJvcjogewogICAgICAgIGFsbDogIiIsCiAgICAgICAgYXBwcm92ZTogIiIsCiAgICAgICAgbWludDogIiIsCiAgICAgICAgc2FsZTogIiIsCiAgICAgICAgZmlsZVVwOiAiIgogICAgICB9LAogICAgICBhc3NldDoge30sCiAgICAgIHN0b3JlQXNzZXQ6IHt9CiAgICB9OwogIH0sCiAgZW1pdHM6IFsnY29uZmlybScsICdjbG9zZSddLAogIHByb3BzOiB7CiAgICBzaG93OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgbmZ0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDoge30KICAgIH0sCiAgICBmaWxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBhbmltRmlsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2hvdzogZnVuY3Rpb24gc2hvdyh2YWwpIHsKICAgICAgdGhpcy52aXNpYmxlID0gdGhpcy5zaG93OwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyOwogICAgfSwKICAgIGNvbmZpZzogZnVuY3Rpb24gY29uZmlnKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlnOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmlsZVVwOiBmdW5jdGlvbiBmaWxlVXAoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBhc3NldCwgcmVzdWx0LCBmaWxlcywgYW5pbVJlc3VsdCwgZmlsZVJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5uZnQuZm9ybS5vblNhbGUgJiYgX3RoaXMuc3RlcC5hcHByb3ZlICE9IDIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXMuc3RlcC5maWxlVXAgPSAxOwogICAgICAgICAgICAgICAgYXNzZXQgPSBfdGhpcy5hc3NldDsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmFuaW1GaWxlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBsb2FkU3RvcmFnZShfdGhpcy5maWxlKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5lcnJvcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yLmZpbGVVcCA9IHJlc3VsdC5lcnJvcjsKICAgICAgICAgICAgICAgIF90aGlzLnN0ZXAubWludCA9IDA7CiAgICAgICAgICAgICAgICBfdGhpcy5zdGVwLmZpbGVVcCA9IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF90aGlzLnN0ZXAuZmlsZVVwID0gMjsKICAgICAgICAgICAgICAgIGFzc2V0LnN0b3JhZ2VJZCA9IHJlc3VsdC5pZDsKICAgICAgICAgICAgICAgIGFzc2V0LnVybCA9IHJlc3VsdC51cmw7CiAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZUFzc2V0ID0gYXNzZXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIGZpbGVzID0gW190aGlzLmFuaW1GaWxlLCBfdGhpcy5maWxlXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdWx0aVVwbG9hZFN0b3JhZ2UoZmlsZXMpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5lcnJvcikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yLmZpbGVVcCA9IHJlc3VsdC5lcnJvcjsKICAgICAgICAgICAgICAgIF90aGlzLnN0ZXAubWludCA9IDA7CiAgICAgICAgICAgICAgICBfdGhpcy5zdGVwLmZpbGVVcCA9IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yLmZpbGVVcCA9ICIiOwogICAgICAgICAgICAgICAgX3RoaXMuc3RlcC5maWxlVXAgPSAyOwogICAgICAgICAgICAgICAgYW5pbVJlc3VsdCA9IHJlc3VsdFswXTsKICAgICAgICAgICAgICAgIGZpbGVSZXN1bHQgPSByZXN1bHRbMV07CiAgICAgICAgICAgICAgICBhc3NldC5hbmltU3RvcmFnZUlkID0gYW5pbVJlc3VsdC5pZDsKICAgICAgICAgICAgICAgIGFzc2V0LmFuaW1VcmwgPSBhbmltUmVzdWx0LnVybDsKICAgICAgICAgICAgICAgIGFzc2V0LnN0b3JhZ2VJZCA9IGZpbGVSZXN1bHQuaWQ7CiAgICAgICAgICAgICAgICBhc3NldC51cmwgPSBmaWxlUmVzdWx0LnVybDsKICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlQXNzZXQgPSBhc3NldDsKCiAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5hc3NldCA9IF90aGlzMi5uZnQuY29udHJhY3Q7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIubmZ0LmZvcm0ub25TYWxlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5vbkFwcHJvdmUoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZmlsZVVwKCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uQXBwcm92ZTogZnVuY3Rpb24gb25BcHByb3ZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBhc3NldCwgYXBwcm92ZWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMubmZ0LmZvcm0ub25TYWxlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfdGhpczMuc3RlcC5hcHByb3ZlID0gMTsKICAgICAgICAgICAgICAgIGFzc2V0ID0gX3RoaXMzLmFzc2V0OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRBcHByb3ZlQWxsKGFzc2V0KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgYXBwcm92ZWQgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIWFwcHJvdmVkLmVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMy5lcnJvci5hcHByb3ZlID0gYXBwcm92ZWQuZXJyb3I7CiAgICAgICAgICAgICAgICBfdGhpczMuc3RlcC5hcHByb3ZlID0gMDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF90aGlzMy5hc3NldCA9IGFzc2V0OwogICAgICAgICAgICAgICAgX3RoaXMzLmVycm9yLmFwcHJvdmUgPSAiIjsKICAgICAgICAgICAgICAgIF90aGlzMy5zdGVwLmFwcHJvdmUgPSAyOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25NaW50OiBmdW5jdGlvbiBvbk1pbnQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGFzc2V0LCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGFzc2V0ID0gX3RoaXM0LnN0b3JlQXNzZXQ7CiAgICAgICAgICAgICAgICBfdGhpczQuc3RlcC5taW50ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQubWludFRva2VuKGFzc2V0KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczQuZXJyb3IubWludCA9IHJlc3VsdC5lcnJvcjsKICAgICAgICAgICAgICAgIF90aGlzNC5zdGVwLm1pbnQgPSAwOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczQuYXNzZXQgPSBPYmplY3QuYXNzaWduKF90aGlzNC5hc3NldCk7CiAgICAgICAgICAgICAgICBfdGhpczQuZXJyb3IubWludCA9ICIiOwogICAgICAgICAgICAgICAgX3RoaXM0LnN0ZXAubWludCA9IDI7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczQubmZ0LmZvcm0ub25TYWxlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5jb25maXJtKHt9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uU2FsZTogZnVuY3Rpb24gb25TYWxlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBhc3NldCwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM1Lm5mdC5mb3JtLm9uU2FsZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXM1LnN0ZXAuc2FsZSA9IDE7CiAgICAgICAgICAgICAgICBhc3NldCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3RoaXM1LmFzc2V0KSwge30sIHsKICAgICAgICAgICAgICAgICAgcHJpY2U6IF90aGlzNS5uZnQuZm9ybS5wcmljZSwKICAgICAgICAgICAgICAgICAgc2VsbGVyRmVlOiBfdGhpczUuY29uZmlnLnNlbGxlckZlZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LnNhbGVUb2tlbihhc3NldCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNS5lcnJvci5zYWxlID0gcmVzdWx0LmVycm9yOwogICAgICAgICAgICAgICAgX3RoaXM1LnN0ZXAuc2FsZSA9IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfdGhpczUuc3RlcC5zYWxlID0gMjsKCiAgICAgICAgICAgICAgICBfdGhpczUuY29uZmlybSh7fSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKGRhdGEpIHsKICAgICAgdGhpcy4kZW1pdCgiY29uZmlybSIsIGRhdGEpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICAgIH0sCiAgICBjbG9zZWQ6IGZ1bmN0aW9uIGNsb3NlZCgpIHsKICAgICAgdGhpcy5zdGVwID0gewogICAgICAgIGFwcHJvdmU6IDAsCiAgICAgICAgbWludDogMCwKICAgICAgICBzYWxlOiAwLAogICAgICAgIGZpbGVVcDogMAogICAgICB9OwogICAgICB0aGlzLmVycm9yID0gewogICAgICAgIGFsbDogIiIsCiAgICAgICAgYXBwcm92ZTogIiIsCiAgICAgICAgbWludDogIiIsCiAgICAgICAgc2FsZTogIiIsCiAgICAgICAgZmlsZVVwOiAiIgogICAgICB9OwogICAgfSwKICAgIHNldEFwcHJvdmVBbGw6IGZ1bmN0aW9uIHNldEFwcHJvdmVBbGwoYXNzZXQpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgaXNBcHByb3ZlZCwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRzZGsuaXNBcHByb3ZlZEZvckFsbChhc3NldCwgX3RoaXM2LnVzZXIuY29pbmJhc2UsIF90aGlzNi5jb25maWcuY29udHJhY3QudHJhbnNmZXJQcm94eUFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpc0FwcHJvdmVkID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoX3R5cGVvZihpc0FwcHJvdmVkKSA9PSAib2JqZWN0IiAmJiBpc0FwcHJvdmVkLmVycm9yKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBpc0FwcHJvdmVkKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LiRzZGsuc2V0QXBwcm92YWxGb3JBbGwoYXNzZXQsIF90aGlzNi51c2VyLmNvaW5iYXNlLCBfdGhpczYuY29uZmlnLmNvbnRyYWN0LnRyYW5zZmVyUHJveHlBZGRyZXNzLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwbG9hZFN0b3JhZ2U6IGZ1bmN0aW9uIHVwbG9hZFN0b3JhZ2UoZmlsZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZSk7CiAgICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gX3RoaXM3OwoKICAgICAgICAgICAgICAgICAgX3RoaXM3LiRhcGkoInN0b3JhZ2UudXBsb2FkIiwgZm9ybURhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuJHRvb2xzLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHJlcy5lcnJtc2cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBtdWx0aVVwbG9hZFN0b3JhZ2U6IGZ1bmN0aW9uIG11bHRpVXBsb2FkU3RvcmFnZShmaWxlcykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVzIiwgZmlsZXNbaV0pOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IF90aGlzODsKCiAgICAgICAgICAgICAgICAgIF90aGlzOC4kYXBpKCJzdG9yYWdlLm11bHRpdXBsb2FkIiwgZm9ybURhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LiR0b29scy5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiByZXMuZXJybXNnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG1pbnRUb2tlbjogZnVuY3Rpb24gbWludFRva2VuKGFzc2V0KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFzc2V0LmFkZHJlc3MKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgdmFyIHRoYXQgPSBfdGhpczk7CgogICAgICAgICAgICAgICAgICBfdGhpczkuJGFwaSgiZGFwcC5zaWduIiwgZGF0YSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzaWduYXR1cmUsIHByb3BlcnRpZXMsIHF1YW50aXR5LCBfZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuJHRvb2xzLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnNpZ25hdHVyZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY6IHNpZ25hdHVyZS52LnRvTG9jYWxlTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByOiBzaWduYXR1cmUuci50b0xvY2FsZUxvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczogc2lnbmF0dXJlLnMudG9Mb2NhbGVMb3dlckNhc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQudG9rZW5JZCA9IHNpZ25hdHVyZS50b2tlbklkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LmZlZXMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQubmZ0LmZvcm0ucm95YWx0aWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5mZWVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNpcGllbnQ6IHRoYXQudXNlci5jb2luYmFzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoYXQubmZ0LmZvcm0ucm95YWx0aWVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbklkOiBhc3NldC50b2tlbklkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXNzZXQgPSBhc3NldDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gIiI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lm5mdC5mb3JtLnByb3BlcnRpZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gSlNPTi5zdHJpbmdpZnkodGhhdC5uZnQuZm9ybS5wcm9wZXJ0aWVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3NldC50eXBlID09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzc2V0LnR5cGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkgPSB0aGF0Lm5mdC5mb3JtLnF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiBhc3NldC5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZUlkOiBhc3NldC5zdG9yYWdlSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdVcmw6IGFzc2V0LnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBxdWFudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuSWQ6IGFzc2V0LnRva2VuSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhhdC5uZnQuZm9ybS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJveWFsdGllczogSlNPTi5zdHJpbmdpZnkoW3RoYXQubmZ0LmZvcm0ucm95YWx0aWVzXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeUlkOiB0aGF0Lm5mdC5mb3JtLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogcHJvcGVydGllcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGFzc2V0LnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGF0Lm5mdC5mb3JtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltVXJsOiBhc3NldC5hbmltVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbVN0b3JhZ2VJZDogYXNzZXQuYW5pbVN0b3JhZ2VJZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kYXBpKCJuZnQuYWRkIiwgX2RhdGEpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMShyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGF0LiR0b29scy5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldC50b2tlblVSSSA9IHJlcy5kYXRhLm1ldGFkYXRhVXJsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0LnRva2VuVVJJID0gYXNzZXQudG9rZW5VUkkucmVwbGFjZSgnaXBmczovJywgJycpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhc3NldC50eXBlID09IDMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LiRzZGsubWludFRva2VuKHRoYXQudXNlci5jb2luYmFzZSwgYXNzZXQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0MTEuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhc3NldC50eXBlID09IDIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQucXVhbnRpdHkgPSB0aGF0Lm5mdC5mb3JtLnF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LiRzZGsubWludEVyYzExNTVUb2tlbih0aGF0LnVzZXIuY29pbmJhc2UsIGFzc2V0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQxMS5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHJlcy5lcnJtc2cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiR0b29scy5tZXNzYWdlKHJlcy5lcnJtc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHJlcy5lcnJtc2cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYWxlVG9rZW46IGZ1bmN0aW9uIHNhbGVUb2tlbihhc3NldCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgdmFyIHBheXRva2VuID0gX3RoaXMxMC5uZnQucGF5VG9rZW47CiAgICAgICAgICAgICAgICAgIHZhciBxdWFudGl0eTsKICAgICAgICAgICAgICAgICAgdmFyIHNlbGxUeXBlOwoKICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0LnR5cGUgPT0gMykgewogICAgICAgICAgICAgICAgICAgIHF1YW50aXR5ID0gMTsKICAgICAgICAgICAgICAgICAgICBzZWxsVHlwZSA9IF90aGlzMTAuJHNkay52YWx1ZUFzc2V0VHlwZSgiRVJDNzIxIik7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzZXQudHlwZSA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkgPSBfdGhpczEwLm5mdC5mb3JtLnF1YW50aXR5OwogICAgICAgICAgICAgICAgICAgIHNlbGxUeXBlID0gX3RoaXMxMC4kc2RrLnZhbHVlQXNzZXRUeXBlKCJFUkMxMTU1Iik7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBidXlWYWx1ZSA9IG5ldyBCaWdOdW1iZXIoX3RoaXMxMC5uZnQuZm9ybS5wcmljZSk7CiAgICAgICAgICAgICAgICAgIGJ1eVZhbHVlID0gYnV5VmFsdWUubXVsdGlwbGllZEJ5KG5ldyBCaWdOdW1iZXIocXVhbnRpdHkpKS5tdWx0aXBsaWVkQnkobmV3IEJpZ051bWJlcigxMCkuZXhwb25lbnRpYXRlZEJ5KHBheXRva2VuLmRlY2ltYWxzKSkudG9GaXhlZCgpOwogICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBvd25lcjogX3RoaXMxMC51c2VyLmNvaW5iYXNlLAogICAgICAgICAgICAgICAgICAgIHNlbGxUb2tlbjogYXNzZXQuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5JZDogYXNzZXQudG9rZW5JZCwKICAgICAgICAgICAgICAgICAgICBzZWxsVmFsdWU6IHF1YW50aXR5LAogICAgICAgICAgICAgICAgICAgIHNlbGxUeXBlOiBzZWxsVHlwZSwKICAgICAgICAgICAgICAgICAgICBidXlUb2tlbjogcGF5dG9rZW4uYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICBidXlUb2tlbklkOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgYnV5VmFsdWU6IGJ1eVZhbHVlLAogICAgICAgICAgICAgICAgICAgIGJ1eVR5cGU6IHBheXRva2VuLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgc2FsdDogIjAiLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IF90aGlzMTAuJHNkay52YWx1ZUNvbW1vblR5cGUoIlNBTEUiKQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IF90aGlzMTA7CgogICAgICAgICAgICAgICAgICBfdGhpczEwLiRhcGkoIm9yZGVyLnByZXBhcmUiLCBkYXRhKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfcmVmNSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KHJlcykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UsIHNhbHQsIHNpZ25hdHVyZSwgX2RhdGE7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhcnRzV2l0aCgiMHgiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlLnNsaWNlKDIsIG1lc3NhZ2UubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FsdCA9IHJlcy5kYXRhLnNhbHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0LnByZXYgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC4kd2ViMy5zaWduKG1lc3NhZ2UsIHRoYXQudXNlci5jb2luYmFzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmUgPSBfY29udGV4dDE0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNpZ25hdHVyZS5lcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoInJldHVybiIsIHJlc29sdmUoc2lnbmF0dXJlKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0LnQwID0gX2NvbnRleHQxNFsiY2F0Y2giXSg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KCJyZXR1cm4iLCByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQxNC50MC5tZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGF0LiRzZGsudmFsdWVDb21tb25UeXBlKCJTQUxFIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXI6IGRhdGEub3duZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsbFRva2VuOiBkYXRhLnNlbGxUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsVG9rZW5JZDogZGF0YS5zZWxsVG9rZW5JZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxsVmFsdWU6IGRhdGEuc2VsbFZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGxUeXBlOiBkYXRhLnNlbGxUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuOiBkYXRhLmJ1eVRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eVRva2VuSWQ6IGRhdGEudG9rZW5JZCA/IGRhdGEudG9rZW5JZCA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5VmFsdWU6IGRhdGEuYnV5VmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5VHlwZTogZGF0YS5idXlUeXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbHQ6IHNhbHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRhcGkoIm9yZGVyLmFkZCIsIF9kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiR0b29scy5tZXNzYWdlKHRoYXQuJHQoJ3JlcXVlc3QubWludFN1Y2Nlc3MnKSwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJHRvb2xzLm1lc3NhZ2UocmVzLmVycm1zZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHJlcy5lcnJtc2cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiR0b29scy5tZXNzYWdlKHJlcy5lcnJtc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogcmVzLmVycm1zZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTE0LCBudWxsLCBbWzUsIDEzXV0pOwogICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE1KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["BigNumber","data","visible","show","step","approve","mint","sale","fileUp","error","all","asset","storeAsset","emits","props","type","Boolean","default","nft","Object","file","String","animFile","watch","val","computed","user","$store","state","config","methods","form","onSale","result","uploadStorage","storageId","id","url","files","multiUploadStorage","animResult","fileResult","animStorageId","animUrl","start","contract","onApprove","setApproveAll","approved","onMint","mintToken","assign","confirm","price","sellerFee","saleToken","$emit","close","closed","$sdk","isApprovedForAll","coinbase","transferProxyAddress","isApproved","setApprovalForAll","Promise","resolve","reject","formData","FormData","append","that","$api","then","res","$tools","checkResponse","errmsg","i","length","address","signature","v","toLocaleLowerCase","r","s","tokenId","fees","royalties","push","recipient","value","properties","JSON","stringify","quantity","_data","imgUrl","description","categoryId","category","name","tokenURI","metadataUrl","replace","mintErc1155Token","message","paytoken","payToken","sellType","valueAssetType","buyValue","multipliedBy","exponentiatedBy","decimals","toFixed","owner","sellToken","sellTokenId","sellValue","buyToken","buyTokenId","buyType","salt","valueCommonType","startsWith","slice","$web3","sign","$t"],"sourceRoot":"","sources":["C:\\Users\\Mohamed Tamim\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\components\\dialogs\\Mint.vue"],"sourcesContent":["<template>\n  <el-dialog :model-value=\"visible\" :show-close=\"false\" :close-on-click-modal=\"false\" :modal=\"false\" @close=\"$emit('close')\" @closed=\"closed\" custom-class=\"fg-dialog\" destroy-on-close>\n    <template #title>\n      <div class=\"fg-dialog-title\">\n        <div class=\"left\">\n          <span>{{$t('dialog.followSteps')}}</span>\n        </div>\n        <div class=\"right\" @click=\"$emit('close')\">\n          <img class=\"close-img\" src=\"@/assets/create-img/pop_shut.png \">\n        </div>\n      </div>\n    </template>\n    <div class=\"fg-dialog-body\">\n      <div class=\"all-error\" v-if=\"error.all\"> {{ error.all }} </div>\n      <div class=\"process\" v-if=\"nft.form && nft.form.onSale\">\n        <div class=\"step-info\">\n          <div class=\"text\">\n            <span>{{$t('dialog.approveCollection')}}</span>\n          </div>\n          <span v-if=\"step.approve != 1\" :class=\"step.approve== 2 ? 'finish': ''\" class=\"step iconfont icon-seleted\"></span>\n          <div class=\"step loading\" v-else>\n            <img class=\"loading-animation\" src=\"@/assets/img/loading.png\" />\n          </div>\n        </div>\n        <div class=\"process-btn\">\n          <el-button @click=\"onApprove\" type=\"primary\" v-if=\"step.approve == 0\">\n            {{$t('dialog.approve')}}</el-button>\n          <el-button disabled type=\"info\" v-else-if=\"step.approve == 1\">\n            {{$t('dialog.inProgress')}}</el-button>\n          <el-button disabled type=\"info\" v-else>{{$t('dialog.done')}}</el-button>\n        </div>\n        <div class=\"process-error\" v-if=\"error.approve\">{{ error.approve }}</div>\n      </div>\n      <div class=\"process\">\n        <div class=\"step-info\">\n          <div class=\"text\">\n            <span>{{$t('dialog.fileUpload')}}</span>\n          </div>\n          <span v-if=\"step.fileUp != 1\" :class=\"step.fileUp== 2 ? 'finish': ''\" class=\"step iconfont icon-seleted\"></span>\n          <div class=\"step loading\" v-else>\n            <img class=\"loading-animation\" src=\"@/assets/img/loading.png\" />\n          </div>\n        </div>\n        <div class=\"process-btn\">\n          <el-button disabled type=\"info\" v-if=\"this.nft.form.onSale && step.approve != 2\">{{$t('dialog.upload')}}\n          </el-button>\n          <el-button @click=\"fileUp\" type=\"primary\" v-else-if=\"step.fileUp ==0\">{{$t('dialog.upload')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else-if=\"step.fileUp == 1\">{{$t('dialog.inProgress')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else>{{$t('dialog.done')}}</el-button>\n        </div>\n        <div class=\"process-error\" v-if=\"error.fileUp\">{{ error.fileUp }}</div>\n      </div>\n      <div class=\"process\">\n        <div class=\"step-info\">\n          <div class=\"text\">\n            <span>{{$t('dialog.cyn')}}</span>\n          </div>\n          <span v-if=\"step.mint != 1\" :class=\"step.mint== 2 ? 'finish': ''\" class=\"step iconfont icon-seleted\"></span>\n          <div class=\"step loading\" v-else>\n            <img class=\"loading-animation\" src=\"@/assets/img/loading.png\" />\n          </div>\n        </div>\n        <div class=\"process-btn\">\n          <el-button disabled type=\"info\" v-if=\"step.fileUp != 2\">{{$t('dialog.mint')}}\n          </el-button>\n          <el-button @click=\"onMint\" type=\"primary\" v-else-if=\"step.mint ==0\">{{$t('dialog.mint')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else-if=\"step.mint == 1\">{{$t('dialog.inProgress')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else>{{$t('dialog.done')}}</el-button>\n        </div>\n        <div class=\"process-error\" v-if=\"error.mint\">{{ error.mint }}</div>\n      </div>\n      <div class=\"process\" v-if=\"nft.form.onSale\">\n        <div class=\"step-info\">\n          <div class=\"text\">\n            <span>{{$t('dialog.signsSale')}}</span>\n          </div>\n          <span v-if=\"step.sale != 1\" :class=\"step.sale == 2 ? 'finish': ''\" class=\"step iconfont icon-seleted\"></span>\n          <div class=\"step loading\" v-else>\n            <img class=\"loading-animation\" src=\"@/assets/img/loading.png\" />\n          </div>\n        </div>\n        <div class=\"process-btn\">\n          <el-button disabled type=\"info\" v-if=\"step.mint != 2\">{{$t('dialog.sale')}}</el-button>\n          <el-button @click=\"onSale\" type=\"primary\" v-else-if=\"step.sale ==0\">{{$t('dialog.sale')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else-if=\"step.sale == 1\">{{$t('dialog.inProgress')}}\n          </el-button>\n          <el-button disabled type=\"info\" v-else>{{$t('dialog.done')}}</el-button>\n        </div>\n        <div class=\"process-error\" v-if=\"error.sale\">{{ error.sale }}</div>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n<script>\n  import BigNumber from 'bignumber.js'\n\n  export default {\n    data: function () {\n      return {\n        visible: this.show,\n        step: {\n          approve: 0,\n          mint: 0,\n          sale: 0,\n          fileUp: 0,\n        },\n        error: {\n          all: \"\",\n          approve: \"\",\n          mint: \"\",\n          sale: \"\",\n          fileUp: \"\",\n        },\n        asset: {},\n        storeAsset: {},\n      };\n    },\n    emits: ['confirm', 'close'],\n    props: {\n      show: {\n        type: Boolean,\n        default: false,\n      },\n      nft: {\n        type: Object,\n        default: {},\n      },\n      file: {\n        type: String,\n        default: \"\",\n      },\n      animFile: {\n        type: String,\n        default: ''\n      }\n    },\n    watch: {\n      show (val) {\n        this.visible = this.show;\n      },\n    },\n    computed: {\n      user () {\n        return this.$store.state.user;\n      },\n      config () {\n        return this.$store.state.config;\n      },\n    },\n    methods: {\n      async fileUp () {\n        if (this.nft.form.onSale && this.step.approve != 2) return;\n        this.step.fileUp = 1;\n        let asset = this.asset;\n        let result = null\n        if (!this.animFile) {\n          result = await this.uploadStorage(this.file);\n          if (result.error) {\n            this.error.fileUp = result.error;\n            this.step.mint = 0;\n            this.step.fileUp = 0;\n            return;\n          }\n          this.step.fileUp = 2;\n          asset.storageId = result.id;\n          asset.url = result.url;\n          this.storeAsset = asset;\n        } else {\n          let files = [this.animFile, this.file];\n          result = await this.multiUploadStorage(files);\n          if (result.error) {\n            this.error.fileUp = result.error;\n            this.step.mint = 0;\n            this.step.fileUp = 0;\n            return;\n          }\n          this.error.fileUp = \"\";\n          this.step.fileUp = 2;\n\n          let animResult = result[0];\n          let fileResult = result[1];\n\n          asset.animStorageId = animResult.id;\n          asset.animUrl = animResult.url;\n          asset.storageId = fileResult.id;\n          asset.url = fileResult.url;\n          this.storeAsset = asset;\n        }\n      },\n      async start () {\n        this.asset = this.nft.contract;\n        if (this.nft.form.onSale) {\n          await this.onApprove();\n        } else {\n          await this.fileUp();\n        }\n      },\n      async onApprove () {\n        if (!this.nft.form.onSale) return;\n        this.step.approve = 1;\n        let asset = this.asset;\n        let approved = await this.setApproveAll(asset);\n        if (approved.error) {\n          this.error.approve = approved.error;\n          this.step.approve = 0;\n          return;\n        }\n        this.asset = asset;\n        this.error.approve = \"\";\n        this.step.approve = 2;\n      },\n      async onMint () {\n        let asset = this.storeAsset;\n        this.step.mint = 1;\n        let result = await this.mintToken(asset);\n        if (result.error) {\n          this.error.mint = result.error;\n          this.step.mint = 0;\n          return;\n        }\n        this.asset = Object.assign(this.asset);\n        this.error.mint = \"\";\n        this.step.mint = 2;\n        if (!this.nft.form.onSale) {\n          this.confirm({});\n        }\n      },\n      async onSale () {\n        if (!this.nft.form.onSale) return;\n        this.step.sale = 1;\n        let asset = {\n          ...this.asset,\n          price: this.nft.form.price,\n          sellerFee: this.config.sellerFee,\n        };\n        let result = await this.saleToken(asset);\n        if (result.error) {\n          this.error.sale = result.error;\n          this.step.sale = 0;\n          return;\n        }\n        this.step.sale = 2;\n        this.confirm({});\n      },\n      confirm (data) {\n        this.$emit(\"confirm\", data);\n      },\n      close () {\n        this.$emit(\"close\");\n      },\n      closed () {\n        this.step = {\n          approve: 0,\n          mint: 0,\n          sale: 0,\n          fileUp: 0,\n        };\n        this.error = {\n          all: \"\",\n          approve: \"\",\n          mint: \"\",\n          sale: \"\",\n          fileUp: \"\",\n        };\n      },\n      async setApproveAll (asset) {\n        let isApproved = await this.$sdk.isApprovedForAll(\n          asset,\n          this.user.coinbase,\n          this.config.contract.transferProxyAddress,\n        );\n        if (typeof isApproved == \"object\" && isApproved.error) {\n          return isApproved;\n        }\n        if (isApproved) return true;\n        let result = await this.$sdk.setApprovalForAll(\n          asset,\n          this.user.coinbase,\n          this.config.contract.transferProxyAddress,\n          true\n        );\n        return result;\n      },\n      async uploadStorage (file) {\n        return new Promise((resolve, reject) => {\n          const formData = new FormData();\n          formData.append(\"file\", file)\n          var that = this;\n          this.$api(\"storage.upload\", formData).then(async function (res) {\n            if (that.$tools.checkResponse(res)) {\n              resolve(res.data);\n            } else {\n              resolve({\n                error: res.errmsg,\n              });\n            }\n          });\n        });\n      },\n      async multiUploadStorage (files) {\n        return new Promise((resolve, reject) => {\n          const formData = new FormData();\n          for (var i = 0;i < files.length;i++) {\n            formData.append(\"files\", files[i]);\n          }\n          var that = this;\n          this.$api(\"storage.multiupload\", formData).then(async function (res) {\n            if (that.$tools.checkResponse(res)) {\n              resolve(res.data);\n            } else {\n              resolve({\n                error: res.errmsg,\n              });\n            }\n          });\n        });\n      },\n      async mintToken (asset) {\n        return new Promise((resolve, reject) => {\n          let data = { address: asset.address };\n          var that = this;\n          this.$api(\"dapp.sign\", data).then(async function (res) {\n            if (that.$tools.checkResponse(res)) {\n              let signature = res.data;\n              asset.signature = {\n                v: signature.v.toLocaleLowerCase(),\n                r: signature.r.toLocaleLowerCase(),\n                s: signature.s.toLocaleLowerCase(),\n              };\n              asset.tokenId = signature.tokenId;\n              asset.fees = [];\n              if (that.nft.form.royalties) {\n                asset.fees.push({\n                  recipient: that.user.coinbase,\n                  value: that.nft.form.royalties,\n                  tokenId: asset.tokenId,\n                })\n              }\n              that.asset = asset;\n              var properties = \"\";\n              if (that.nft.form.properties.length) {\n                properties = JSON.stringify(that.nft.form.properties);\n              }\n              let quantity;\n              if (asset.type == 3) {\n                quantity = 1\n              } else if (asset.type == 2) {\n                quantity = that.nft.form.quantity\n              }\n              var _data = {\n                address: asset.address,\n                storageId: asset.storageId,\n                imgUrl: asset.url,\n                quantity: quantity,\n                tokenId: asset.tokenId,\n                description: that.nft.form.description,\n                royalties: JSON.stringify([that.nft.form.royalties]),\n                categoryId: that.nft.form.category,\n                properties: properties,\n                type: asset.type,\n                name: that.nft.form.name,\n                animUrl: asset.animUrl,\n                animStorageId: asset.animStorageId\n              };\n              that.$api(\"nft.add\", _data).then(async function (res) {\n                if (that.$tools.checkResponse(res)) {\n                  asset.tokenURI = res.data.metadataUrl;\n                  asset.tokenURI = asset.tokenURI.replace('ipfs:/', '')\n\n                  let result;\n                  if (asset.type == 3) {\n                    result = await that.$sdk.mintToken(\n                      that.user.coinbase,\n                      asset\n                    );\n\n                  } else if (asset.type == 2) {\n                    asset.quantity = that.nft.form.quantity;\n                    result = await that.$sdk.mintErc1155Token(\n                      that.user.coinbase,\n                      asset\n                    );\n                  }\n                  resolve(result);\n                } else {\n                  resolve({ error: res.errmsg });\n                }\n              });\n            } else {\n              that.$tools.message(res.errmsg);\n              resolve({ error: res.errmsg });\n            }\n          });\n        });\n      },\n      async saleToken (asset) {\n        return new Promise((resolve, reject) => {\n          var paytoken = this.nft.payToken;\n          let quantity;\n          let sellType;\n          if (asset.type == 3) {\n            quantity = 1\n            sellType = this.$sdk.valueAssetType(\"ERC721\")\n          } else if (asset.type == 2) {\n            quantity = this.nft.form.quantity\n            sellType = this.$sdk.valueAssetType(\"ERC1155\")\n          }\n\n          let buyValue = new BigNumber(this.nft.form.price);\n          buyValue = buyValue.multipliedBy(new BigNumber(quantity)).multipliedBy(\n            new BigNumber(10).exponentiatedBy(paytoken.decimals)).toFixed();\n \n          var data = {\n            owner: this.user.coinbase,\n            sellToken: asset.address,\n            sellTokenId: asset.tokenId,\n            sellValue: quantity,\n            sellType: sellType,\n            buyToken: paytoken.address,\n            buyTokenId: \"0\",\n            buyValue: buyValue,\n            buyType: paytoken.type,\n            salt: \"0\",\n            type: this.$sdk.valueCommonType(\"SALE\")\n          };\n          let that = this;\n          this.$api(\"order.prepare\", data).then(async function (res) {\n            if (that.$tools.checkResponse(res)) {\n              let message = res.data.message;\n              if (message.startsWith(\"0x\")) {\n                message = message.slice(2, message.length);\n              }\n              let salt = res.data.salt;\n              let signature = \"\";\n              try {\n                signature = await that.$web3.sign(message, that.user.coinbase);\n                if (signature.error) {\n                  return resolve(signature);\n                }\n              } catch (e) {\n                return resolve({ error: e.message });\n              }\n              var _data = {\n                type: that.$sdk.valueCommonType(\"SALE\"),\n                owner: data.owner,\n                sellToken: data.sellToken,\n                sellTokenId: data.sellTokenId,\n                sellValue: data.sellValue,\n                sellType: data.sellType,\n                buyToken: data.buyToken,\n                buyTokenId: data.tokenId ? data.tokenId : 0,\n                buyValue: data.buyValue,\n                buyType: data.buyType,\n                salt: salt,\n                message: message,\n                signature: signature,\n              };\n              that.$api(\"order.add\", _data).then(function (res) {\n                if (that.$tools.checkResponse(res)) {\n                  that.$tools.message(that.$t('request.mintSuccess'), \"success\");\n                  resolve(true);\n                } else {\n                  that.$tools.message(res.errmsg);\n                  resolve({ error: res.errmsg });\n                }\n              });\n            } else {\n              that.$tools.message(res.errmsg);\n              resolve({ error: res.errmsg });\n            }\n          });\n        });\n      },\n    },\n  };\n</script>\n<style lang=\"scss\" scoped>\n</style>\n\n"]}]}