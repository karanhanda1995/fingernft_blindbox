{"remainingRequest":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\views\\sections\\NFTDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\src\\views\\sections\\NFTDetail.vue","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\babel.config.js","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652272398602},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1652272398685},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652272398602},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1652272436651}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvOTcxNTQvRGVza3RvcC9TT05HVFJBREVSLVYyLUZVTEwvZmluZ2VybmZ0X2JsaW5kYm94L2Zpbmdlcm5mdF9ibGluZGJveC92dWUtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzk3MTU0L0Rlc2t0b3AvU09OR1RSQURFUi1WMi1GVUxML2Zpbmdlcm5mdF9ibGluZGJveC9maW5nZXJuZnRfYmxpbmRib3gvdnVlLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgSW5mb1RhYiBmcm9tICJAL3ZpZXdzL3NlY3Rpb25zL2RldGFpbHMvSW5mbyI7CmltcG9ydCBPd25lcnNUYWIgZnJvbSAiQC92aWV3cy9zZWN0aW9ucy9kZXRhaWxzL093bmVycyI7CmltcG9ydCBIaXN0b3J5VGFiIGZyb20gIkAvdmlld3Mvc2VjdGlvbnMvZGV0YWlscy9IaXN0b3J5IjsKaW1wb3J0IEF1Y3Rpb25zVGFiIGZyb20gIkAvdmlld3Mvc2VjdGlvbnMvZGV0YWlscy9BdWN0aW9ucyI7CmltcG9ydCBCaWRUYWIgZnJvbSAiQC92aWV3cy9zZWN0aW9ucy9kZXRhaWxzL0JpZCI7CmltcG9ydCBIaWdoZXN0QmlkIGZyb20gJ0Avdmlld3Mvc2VjdGlvbnMvZGV0YWlscy9IaWdoZXN0QmlkJzsKaW1wb3J0IExvd2VzdEF1Y3Rpb24gZnJvbSAnQC92aWV3cy9zZWN0aW9ucy9kZXRhaWxzL0xvd2VzdEF1Y3Rpb24nOwppbXBvcnQgRnVsbFNjcmVlbiBmcm9tICJAL2NvbXBvbmVudHMvRnVsbFNjcmVlbiI7CmltcG9ydCBTaGFyZSBmcm9tICJAL2NvbXBvbmVudHMvU2hhcmUiOwppbXBvcnQgTmZ0UHJldmlldyBmcm9tICJAL2NvbXBvbmVudHMvTkZUUHJldmlldyI7CmltcG9ydCBNaXhpbnNORlRJbmZvIGZyb20gIkAvbWl4aW5zL05mdEluZm8iOwppbXBvcnQgTmZ0SXRlbSBmcm9tICJAL21peGlucy9OZnRJdGVtIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJORlREZXRhaWwiLAogIGNvbXBvbmVudHM6IHsKICAgIE5mdFByZXZpZXc6IE5mdFByZXZpZXcsCiAgICBJbmZvVGFiOiBJbmZvVGFiLAogICAgT3duZXJzVGFiOiBPd25lcnNUYWIsCiAgICBIaXN0b3J5VGFiOiBIaXN0b3J5VGFiLAogICAgQmlkVGFiOiBCaWRUYWIsCiAgICBIaWdoZXN0QmlkOiBIaWdoZXN0QmlkLAogICAgTG93ZXN0QXVjdGlvbjogTG93ZXN0QXVjdGlvbiwKICAgIEF1Y3Rpb25zVGFiOiBBdWN0aW9uc1RhYiwKICAgIEZ1bGxTY3JlZW46IEZ1bGxTY3JlZW4sCiAgICBTaGFyZTogU2hhcmUKICB9LAogIG1peGluczogW01peGluc05GVEluZm8sIE5mdEl0ZW1dLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgaWRzID0gdGhpcy4kcm91dGUucGFyYW1zLmlkczsKICAgIGlkcyA9IGlkcy5zcGxpdCgiOiIpOwogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgdG9rZW46IHsKICAgICAgICB0b2tlbjogaWRzWzBdLAogICAgICAgIHRva2VuSWQ6IGlkc1sxXQogICAgICB9LAogICAgICB0YWJJbmRleDogImluZm8iLAogICAgICBjcmVhdG9yOiB7fSwKICAgICAgaW5mbzoge30sCiAgICAgIGhpc3RvcnlzOiBbXSwKICAgICAgYmlkczogW10sCiAgICAgIGF1Y3Rpb25zOiBbXSwKICAgICAgc2hvd1NhbGVEaWFsb2c6IGZhbHNlLAogICAgICBzaG93Q2FuY2VsU2FsZURpYWxvZzogZmFsc2UsCiAgICAgIHNob3dCdXlEaWFsb2c6IGZhbHNlLAogICAgICBzaG93QmlkRGlhbG9nOiBmYWxzZSwKICAgICAgc2hvd0NhbmNlbEJpZERpYWxvZzogZmFsc2UsCiAgICAgIHNob3dBY2NlcHREaWFsb2c6IGZhbHNlLAogICAgICBzaG93VHJhbnNmZXJEaWFsb2c6IGZhbHNlLAogICAgICBzaG93QnVybkRpYWxvZzogZmFsc2UsCiAgICAgIHNob3dTYWxlVHlwZURpYWxvZzogZmFsc2UsCiAgICAgIHNob3dBdWN0aW9uRGlhbG9nOiBmYWxzZSwKICAgICAgc2hvd0F1Y3Rpb25EZXRhaWxEaWFsb2c6IGZhbHNlLAogICAgICBzaG93QXVjdGlvbkNhbmNlbERpYWxvZzogZmFsc2UsCiAgICAgIG9yZGVyOiB7fSwKICAgICAgaXNGdWxsOiBmYWxzZSwKICAgICAgbWVkaWFEYXRhOiBbXSwKICAgICAgaXNGb3VuZDogdHJ1ZSwKICAgICAgcm95YWx0aWVzOiAnJywKICAgICAgdmFsaWRBdWN0aW9uczogW10sCiAgICAgIHNhbGVzOiBbXSwKICAgICAgbmZ0TGlzdDogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREZXRhaWxzKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgbmZ0OiBmdW5jdGlvbiBuZnQoKSB7CiAgICAgIHJldHVybiB0aGlzLm5mdExpc3RbMF0gfHwge307CiAgICB9LAogICAgb3duZXJzOiBmdW5jdGlvbiBvd25lcnMoKSB7CiAgICAgIGlmICghdGhpcy5uZnQuaXRlbXMpIHJldHVybiBbXTsKICAgICAgcmV0dXJuIHRoaXMuc2V0T3duZXJzKHRoaXMubmZ0Lml0ZW1zLCB0aGlzLm5mdC5zYWxlcyk7CiAgICB9LAogICAgbG93ZXN0QXNzZXQ6IGZ1bmN0aW9uIGxvd2VzdEFzc2V0KCkgewogICAgICBpZiAoIXRoaXMubmZ0LnNhbGVzIHx8ICF0aGlzLm5mdC5pdGVtcykgcmV0dXJuOwogICAgICByZXR1cm4gdGhpcy5nZXRMb3dlc3ROZnRBc3NldCh0aGlzLm5mdC5zYWxlcywgdGhpcy5uZnQuaXRlbXMpOwogICAgfSwKICAgIG15QXNzZXQ6IGZ1bmN0aW9uIG15QXNzZXQoKSB7CiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQgfHwgIXRoaXMubmZ0Lml0ZW1zKSByZXR1cm47CiAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3NBc3NldCh0aGlzLm5mdC5pdGVtcywgdGhpcy5uZnQuc2FsZXMsIHRoaXMubmZ0LmF1Y3Rpb25zLCB0aGlzLnVzZXIuY29pbmJhc2UpOwogICAgfSwKICAgIGxvd2VzdEF1Y3Rpb246IGZ1bmN0aW9uIGxvd2VzdEF1Y3Rpb24oKSB7CiAgICAgIGlmICghdGhpcy5uZnQuYXVjdGlvbnMgfHwgIXRoaXMubmZ0Lml0ZW1zKSByZXR1cm47CiAgICAgIHZhciBhdWN0aW9uQmlkID0gdGhpcy5nZXRMb3dlc3RBdWN0aW9uQmlkKHRoaXMubmZ0LmF1Y3Rpb25zLCB0aGlzLm5mdC5pdGVtcyk7CiAgICAgIHJldHVybiBhdWN0aW9uQmlkOwogICAgfSwKICAgIG15QmlkOiBmdW5jdGlvbiBteUJpZCgpIHsKICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCB8fCAhdGhpcy5uZnQuYmlkcykgcmV0dXJuOwogICAgICBpZiAodGhpcy5uZnQub25seU93bmVyID09IHRoaXMudXNlci5jb2luYmFzZSkgcmV0dXJuOwogICAgICB2YXIgbXlCaWQgPSB0aGlzLmdldEFjdGl2ZUFkZHJlc3NCaWQodGhpcy5uZnQuYmlkcywgdGhpcy51c2VyLmNvaW5iYXNlKTsKICAgICAgcmV0dXJuIG15QmlkOwogICAgfSwKICAgIGhpZ2hlc3RCaWQ6IGZ1bmN0aW9uIGhpZ2hlc3RCaWQoKSB7CiAgICAgIGlmICghdGhpcy5uZnQuYmlkcykgcmV0dXJuOwogICAgICByZXR1cm4gdGhpcy5nZXRIaWdoZXN0QmlkKHRoaXMubmZ0LmJpZHMsIHRoaXMubmZ0Lm9ubHlPd25lcik7CiAgICB9LAogICAgY29uZmlnOiBmdW5jdGlvbiBjb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb25maWc7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXI7CiAgICB9LAogICAgY29ubmVjdGVkOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb25uZWN0ZWQ7CiAgICB9LAogICAgcGF5VG9rZW5zOiBmdW5jdGlvbiBwYXlUb2tlbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wYXlUb2tlbnM7CiAgICB9LAogICAgbmZ0VVJJOiBmdW5jdGlvbiBuZnRVUkkoKSB7CiAgICAgIGlmICghdGhpcy5pbmZvKSByZXR1cm47CgogICAgICBpZiAodGhpcy5pbmZvLm1ldGFkYXRhQ29udGVudCkgewogICAgICAgIHJldHVybiB0aGlzLiR0b29scy5hbmFseXNpcyh0aGlzLmluZm8ubWV0YWRhdGFDb250ZW50KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubWVkaWFEYXRhKSB7CiAgICAgICAgdmFyIG5mdDsKICAgICAgICBuZnQgPSB0aGlzLmluZm8uYWRkcmVzcyArICI6IiArIHRoaXMuaW5mby50b2tlbklkOwoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5tZWRpYURhdGEpIHsKICAgICAgICAgIGlmIChrZXkgPT0gbmZ0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiR0b29scy5hbmFseXNpcyh0aGlzLm1lZGlhRGF0YVtrZXldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7fTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvQWNjb3VudDogZnVuY3Rpb24gZ29BY2NvdW50KGFkZHJlc3MpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvYWNjb3VudC8iICsgYWRkcmVzcwogICAgICB9KTsKICAgIH0sCiAgICBzaG93RGlhbG9nOiBmdW5jdGlvbiBzaG93RGlhbG9nKHR5cGUsIGFzc2V0KSB7CiAgICAgIGlmICh0eXBlID09ICJvcGVuc2VhIikgewogICAgICAgIGlmICghdGhpcy5jb25maWcubmV0d29yay5vcGVuc2VhKSByZXR1cm47CiAgICAgICAgdmFyIHVybCA9IHRoaXMuY29uZmlnLm5ldHdvcmsub3BlbnNlYSArICcvJyArIHRoaXMuaW5mby5hZGRyZXNzICsgIi8iICsgdGhpcy5pbmZvLnRva2VuSWQ7CiAgICAgICAgcmV0dXJuIHdpbmRvdy5vcGVuKHVybCwgIl9ibGFuayIpOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuJHRvb2xzLm5lZWRMb2dpbih0aGlzLiRyb3V0ZS5wYXRoKSkgcmV0dXJuOwoKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAic2FsZSI6CiAgICAgICAgICB0aGlzLnNob3dTYWxlRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXIgPSBhc3NldDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJlZGl0X3NhbGUiOgogICAgICAgICAgdGhpcy5zaG93U2FsZURpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiY2FuY2VsX3NhbGUiOgogICAgICAgICAgdGhpcy5zaG93Q2FuY2VsU2FsZURpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYnV5IjoKICAgICAgICAgIHRoaXMuc2hvd0J1eURpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYmlkIjoKICAgICAgICAgIHRoaXMuc2hvd0JpZERpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiZWRpdF9iaWQiOgogICAgICAgICAgdGhpcy5zaG93QmlkRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXIgPSBhc3NldDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJjYW5jZWxfYmlkIjoKICAgICAgICAgIHRoaXMuc2hvd0NhbmNlbEJpZERpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWNjZXB0IjoKICAgICAgICAgIHRoaXMuc2hvd0FjY2VwdERpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAidHJhbnNmZXIiOgogICAgICAgICAgdGhpcy5zaG93VHJhbnNmZXJEaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5vcmRlciA9IGFzc2V0OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImJ1cm4iOgogICAgICAgICAgdGhpcy5zaG93QnVybkRpYWxvZyA9IHRydWU7CiAgICAgICAgICB0aGlzLm9yZGVyID0gYXNzZXQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAic2FsZV90eXBlIjoKICAgICAgICAgIHRoaXMuc2hvd1NhbGVUeXBlRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhdWN0aW9uIjoKICAgICAgICAgIHRoaXMuc2hvd0F1Y3Rpb25EaWFsb2cgPSB0cnVlOwogICAgICAgICAgdGhpcy5vcmRlciA9IGFzc2V0OwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgImF1Y3Rpb25fZWRpdCI6CiAgICAgICAgICB0aGlzLnNob3dBdWN0aW9uRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXIgPSBhc3NldDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhdWN0aW9uX2RldGFpbCI6CiAgICAgICAgICB0aGlzLnNob3dBdWN0aW9uRGV0YWlsRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXIgPSBhc3NldDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhdWN0aW9uX2NhbmNlbCI6CiAgICAgICAgICB0aGlzLnNob3dBdWN0aW9uQ2FuY2VsRGlhbG9nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMub3JkZXIgPSBhc3NldDsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLnNob3dTYWxlRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0NhbmNlbFNhbGVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QnV5RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0JpZERpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dDYW5jZWxCaWREaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QWNjZXB0RGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1RyYW5zZmVyRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0J1eURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dCdXJuRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd1JlcG9ydERpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dTYWxlVHlwZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLnNob3dBdWN0aW9uRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuc2hvd0F1Y3Rpb25EZXRhaWxEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QXVjdGlvbkNhbmNlbERpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLm9yZGVyID0ge307CiAgICB9LAogICAgbGlrZUZ1bmN0aW9uOiBmdW5jdGlvbiBsaWtlRnVuY3Rpb24ocGFyYW1ldGVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBhZGRyZXNzOiB0aGlzLmluZm8uYWRkcmVzcywKICAgICAgICB0b2tlbklkOiB0aGlzLmluZm8udG9rZW5JZAogICAgICB9OwoKICAgICAgaWYgKCF0aGlzLmluZm8ubGlrZSkgewogICAgICAgIHRoaXMuJGFwaSgibGlrZS5hZGQiLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChfdGhpcy4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgIF90aGlzLmluZm8ubGlrZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kYXBpKCJsaWtlLnJlbW92ZSIsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKF90aGlzLiR0b29scy5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgX3RoaXMuaW5mby5saWtlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBxdWVyeUxpa2U6IGZ1bmN0aW9uIHF1ZXJ5TGlrZShhZGRyZXNzLCB0b2tlbklkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS5jb25uZWN0ZWQpIHJldHVybjsKICAgICAgdmFyIHF1ZXJ5ID0gewogICAgICAgIG5mdHM6IGFkZHJlc3MgKyAiOiIgKyB0b2tlbklkLAogICAgICAgIGFkZHJlc3M6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuY29pbmJhc2UKICAgICAgfTsKICAgICAgdGhpcy4kYXBpKCJsaWtlLmxpc3R1c2VybGlrZSIsIHF1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMyLiR0b29scy5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgX3RoaXMyLmluZm8ubGlrZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kdG9vbHMubWVzc2FnZShyZXMuZXJybXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldE1lZGlhOiBmdW5jdGlvbiBnZXRNZWRpYShuZnRzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF9uZnRzID0gbmZ0cy5hZGRyZXNzICsgIjoiICsgbmZ0cy50b2tlbklkOwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgaW5mbzogX25mdHMKICAgICAgfTsKICAgICAgdGhpcy4kYXBpKCJuZnQuZ2V0bWVkaWEiLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMubWVkaWFEYXRhID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFJveWFsdGllczogZnVuY3Rpb24gZ2V0Um95YWx0aWVzKG5mdHMpIHsKICAgICAgdmFyIF9uZnRzID0gbmZ0cy5hZGRyZXNzICsgIjoiICsgbmZ0cy50b2tlbklkOwoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgaW5mbzogX25mdHMKICAgICAgfTsKICAgICAgdGhpcy4kYXBpKCJuZnQuZ2V0cm95YWx0aWVzIiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgZm9yICh2YXIga2V5IGluIHJlcy5kYXRhKSB7CiAgICAgICAgICBpZiAoa2V5ID09IF9uZnRzICYmIHJlcy5kYXRhW2tleV0pIHsKICAgICAgICAgICAgdmFyIGdldHJveWFsdGllcyA9IEpTT04ucGFyc2UocmVzLmRhdGFba2V5XSk7CiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdldHJveWFsdGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyBnZXRyb3lhbHRpZXNbaV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoYXQucm95YWx0aWVzID0gdGhhdC4kdG9vbHMuZGVjaW1hbChjb3VudCAvIDEwMCwgMik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXREZXRhaWxzOiBmdW5jdGlvbiBnZXREZXRhaWxzKCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICB0b2tlbjogdGhpcy50b2tlbi50b2tlbiwKICAgICAgICB0b2tlbklkOiB0aGlzLnRva2VuLnRva2VuSWQKICAgICAgfTsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGlzLiRhcGkoIm5mdC5kZXRhaWwiLCBkYXRhKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgdmFyIGxpc3QsIF9kYXRhLCBjb3VudCwgaTsKCiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghdGhhdC4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhhdC5pc0ZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgdGhhdC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGxpc3QgPSBbcmVzLmRhdGFdOwogICAgICAgICAgICAgICAgICB0aGF0Lm5mdExpc3QgPSBsaXN0OwogICAgICAgICAgICAgICAgICB0aGF0LmluZm8gPSBsaXN0WzBdOwogICAgICAgICAgICAgICAgICB0aGF0LnF1ZXJ5RnVuY3Rpb24obGlzdCk7CiAgICAgICAgICAgICAgICAgIHRoYXQuZ2V0QmlkcygpOwogICAgICAgICAgICAgICAgICB0aGF0LmdldEF1Y3Rpb25zKCk7CgogICAgICAgICAgICAgICAgICBpZiAoIXRoYXQuaW5mby5yb3lhbHRpZXMpIHsKICAgICAgICAgICAgICAgICAgICB0aGF0LmdldFJveWFsdGllcyhyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX2RhdGEgPSBKU09OLnBhcnNlKHRoYXQuaW5mby5yb3lhbHRpZXMpOwogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gMDsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF9kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgX2RhdGFbaV07CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0aGF0LnJveWFsdGllcyA9IHRoYXQuJHRvb2xzLmRlY2ltYWwoY291bnQgLyAxMDAsIDIpOwogICAgICAgICAgICAgICAgICB9IC8vIHRoYXQuY3JlYXRvciA9IHJlcy5kYXRhLmNyZWF0b3I7CgoKICAgICAgICAgICAgICAgICAgdGhhdC5pbmZvLmNhdGVnb3J5ID0gdGhhdC4kc3RvcmUuZ2V0dGVycy5jYXRlZ29yeSh0aGF0LmluZm8uY2F0ZWdvcnlJZCk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuZ2V0Q3JlYXRvcigpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIC8vIHRoYXQuYW5hbHlzaXNORlQoKTsKICAgICAgICAgICAgICAgICAgdGhhdC5nZXRDb250cmFjdCgpOwogICAgICAgICAgICAgICAgICB0aGF0LmdldEF1Y3Rpb25Vc2VySW5mb3MoKTsKICAgICAgICAgICAgICAgICAgdGhhdC5nZXRIaXN0b3J5cygpOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICAgIHRoYXQuJHRvb2xzLm1lc3NhZ2UocmVzLmVycm1zZyk7CgogICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCiAgICBnZXRDcmVhdG9yOiBmdW5jdGlvbiBnZXRDcmVhdG9yKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGFkZHJlc3M6IHRoaXMuaW5mby5jcmVhdG9yCiAgICAgIH07CiAgICAgIHRoaXMuJGFwaSgndXNlci5pbmZvJywgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKF90aGlzNC4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICBfdGhpczQuY3JlYXRvciA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0SGlzdG9yeXM6IGZ1bmN0aW9uIGdldEhpc3RvcnlzKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gewogICAgICAgIHRva2VuOiB0aGlzLnRva2VuLnRva2VuLAogICAgICAgIHRva2VuSWQ6IHRoaXMudG9rZW4udG9rZW5JZAogICAgICB9OwogICAgICB0aGlzLiRhcGkoIm5mdC5oaXN0b3J5IiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKF90aGlzNS4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICB2YXIgaGlzdG9yeXMgPSBbXTsKICAgICAgICAgIHZhciBoaXN0b3J5OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaGlzdG9yeSA9IHJlcy5kYXRhW2ldOwogICAgICAgICAgICBoaXN0b3J5LnBheVRva2VuID0gewogICAgICAgICAgICAgIGFkZHJlc3M6IGhpc3RvcnkucGF5dG9rZW5BZGRyZXNzLAogICAgICAgICAgICAgIHN5bWJvbDogaGlzdG9yeS5wYXl0b2tlblN5bWJvbCwKICAgICAgICAgICAgICBkZWNpbWFsczogaGlzdG9yeS5wYXl0b2tlbkRlY2ltYWxzLAogICAgICAgICAgICAgIG5hbWU6IGhpc3RvcnkucGF5dG9rZW5OYW1lCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGhpc3RvcnlzLnB1c2goaGlzdG9yeSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM1Lmhpc3RvcnlzID0gaGlzdG9yeXM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRCaWRzOiBmdW5jdGlvbiBnZXRCaWRzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB0b2tlbjogX3RoaXM2LnRva2VuLnRva2VuLAogICAgICAgICAgdG9rZW5JZDogX3RoaXM2LnRva2VuLnRva2VuSWQKICAgICAgICB9OwoKICAgICAgICBfdGhpczYuJGFwaSgibmZ0LmJpZHMiLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChfdGhpczYuJHRvb2xzLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICB2YXIgYmlkcyA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciBiaWQgPSByZXMuZGF0YVtpXTsKICAgICAgICAgICAgICBiaWQucGF5VG9rZW4gPSB7CiAgICAgICAgICAgICAgICBhZGRyZXNzOiBiaWQucGF5dG9rZW5BZGRyZXNzLAogICAgICAgICAgICAgICAgc3ltYm9sOiBiaWQucGF5dG9rZW5TeW1ib2wsCiAgICAgICAgICAgICAgICBkZWNpbWFsczogYmlkLnBheXRva2VuRGVjaW1hbHMsCiAgICAgICAgICAgICAgICBuYW1lOiBiaWQucGF5dG9rZW5OYW1lCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBiaWRzLnB1c2goYmlkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXM2LmJpZHMgPSBiaWRzOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM2LiR0b29scy5tZXNzYWdlKHJlcy5lcnJtc2cpOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0QXVjdGlvbnM6IGZ1bmN0aW9uIGdldEF1Y3Rpb25zKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB0b2tlbjogX3RoaXM3LnRva2VuLnRva2VuLAogICAgICAgICAgdG9rZW5JZDogX3RoaXM3LnRva2VuLnRva2VuSWQKICAgICAgICB9OwoKICAgICAgICBfdGhpczcuJGFwaSgiYXVjdGlvbi5saXN0IiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoX3RoaXM3LiR0b29scy5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgdmFyIGF1Y3Rpb25zID0gW107CiAgICAgICAgICAgIHZhciB2YWxpZEF1Y3Rpb25zID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5kYXRhLmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgYXVjdGlvbiA9IHJlcy5kYXRhLmxpc3RbaV07CiAgICAgICAgICAgICAgYXVjdGlvbi5wYXlUb2tlbiA9IHsKICAgICAgICAgICAgICAgIGFkZHJlc3M6IGF1Y3Rpb24ucGF5dG9rZW5BZGRyZXNzLAogICAgICAgICAgICAgICAgc3ltYm9sOiBhdWN0aW9uLnBheXRva2VuU3ltYm9sLAogICAgICAgICAgICAgICAgZGVjaW1hbHM6IGF1Y3Rpb24ucGF5dG9rZW5EZWNpbWFscywKICAgICAgICAgICAgICAgIG5hbWU6IGF1Y3Rpb24ucGF5dG9rZW5OYW1lCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgdmFyIHZhbGlkQXVjdGlvbiA9IF90aGlzNy5nZXRWYWxpZEF1Y3Rpb25zKGF1Y3Rpb24sIF90aGlzNy5vd25lcnMpOwoKICAgICAgICAgICAgICBpZiAodmFsaWRBdWN0aW9uKSB7CiAgICAgICAgICAgICAgICB2YWxpZEF1Y3Rpb25zLnB1c2godmFsaWRBdWN0aW9uKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2YXIgaGlnaGVzdFByaWNlID0gYXVjdGlvbi5oaWdoZXN0UHJpY2U7CgogICAgICAgICAgICAgIGlmICghaGlnaGVzdFByaWNlKSB7CiAgICAgICAgICAgICAgICBhdWN0aW9uLmxvd2VzdFByaWNlID0gX3RoaXM3LiR0b29scy5zaW5nbGVQcmljZShhdWN0aW9uLnN0YXJ0VmFsdWUsIGF1Y3Rpb24uc2VsbFZhbHVlLCBhdWN0aW9uLnBheVRva2VuKTsKICAgICAgICAgICAgICAgIGF1Y3Rpb24ubG93ZXN0VXNkdFByaWNlID0gX3RoaXM3LiR0b29scy5kZWNpbWFsKGF1Y3Rpb24ucGF5VG9rZW4gPyBhdWN0aW9uLmxvd2VzdFByaWNlICogYXVjdGlvbi5wYXlUb2tlbi5yYXRlIDogIjAiKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXVjdGlvbi5sb3dlc3RQcmljZSA9IF90aGlzNy4kdG9vbHMuc2luZ2xlUHJpY2UoaGlnaGVzdFByaWNlLCBhdWN0aW9uLnNlbGxWYWx1ZSwgYXVjdGlvbi5wYXlUb2tlbik7CiAgICAgICAgICAgICAgICBhdWN0aW9uLmxvd2VzdFVzZHRQcmljZSA9IF90aGlzNy4kdG9vbHMuZGVjaW1hbChhdWN0aW9uLnBheVRva2VuID8gYXVjdGlvbi5sb3dlc3RQcmljZSAqIGF1Y3Rpb24ucGF5VG9rZW4ucmF0ZSA6ICIwIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBhdWN0aW9ucy5wdXNoKGF1Y3Rpb24pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczcuYXVjdGlvbnMgPSBhdWN0aW9uczsKICAgICAgICAgICAgX3RoaXM3LnZhbGlkQXVjdGlvbnMgPSB2YWxpZEF1Y3Rpb25zOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFuYWx5c2lzTkZUOiBmdW5jdGlvbiBhbmFseXNpc05GVCgpIHsvLyBpZiAodGhpcy5jb25uZWN0ZWQpIHsKICAgICAgLy8gICB0aGlzLm15QmlkID0gdGhpcy5nZXRBY3RpdmVBZGRyZXNzQmlkKHRoaXMuYmlkcywgdGhpcy51c2VyLmNvaW5iYXNlKTsKICAgICAgLy8gIHRoaXMubXlBdWN0aW9uID0gdGhpcy5oYXNBdWN0aW9uID8gdGhpcy5nZXRBY3RpdmVBZGRyZXNzQXVjdGlvbih0aGlzLmF1Y3Rpb25zLCB0aGlzLnVzZXIuY29pbmJhc2UpIDogbnVsbDsKICAgICAgLy8gfQogICAgICAvLyB0aGlzLmxvd2VzdEFzc2V0ID0gdGhpcy5nZXRMb3dlc3RBc3NldCh0aGlzLm93bmVycyk7CiAgICAgIC8vIHRoaXMubG93ZXN0QXVjdGlvbiA9IHRoaXMuaGFzQXVjdGlvbiA/IHRoaXMuZ2V0TG93ZXN0QXVjdGlvbih0aGlzLmF1Y3Rpb25zLCB0aGlzLm93bmVycykgOiBudWxsOwogICAgICAvLyB0aGlzLmhpZ2hlc3RCaWQgPSB0aGlzLmdldEhpZ2hlc3RCaWQodGhpcy5iaWRzKTsKICAgIH0sCiAgICBzZXRPd25lcnM6IGZ1bmN0aW9uIHNldE93bmVycyhpdGVtcywgc2FsZXMpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwogICAgICB2YXIgbnVtID0gMDsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGtleSkgewogICAgICAgIGlmIChzYWxlcykgewogICAgICAgICAgaWYgKHNhbGVzLmdldChrZXkpKSB7CiAgICAgICAgICAgIHJlc3VsdFtudW1dID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzYWxlcy5nZXQoa2V5KSksIHt9LCB7CiAgICAgICAgICAgICAgb25zZWxsOiB2YWx1ZS5vbnNlbGwsCiAgICAgICAgICAgICAgb25zZWxsVHlwZTogdmFsdWUub25zZWxsVHlwZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdFtudW1dID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdFtudW1dID0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBudW0rKzsKICAgICAgfSwgaXRlbXMpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIGdldENvbnRyYWN0OiBmdW5jdGlvbiBnZXRDb250cmFjdCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBhZGRyZXNzczogdGhpcy5pbmZvLmFkZHJlc3MKICAgICAgfTsKICAgICAgdGhpcy4kYXBpKCJjb250cmFjdC5saXN0YnlhZGRyIiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKF90aGlzOC4kdG9vbHMuY2hlY2tSZXNwb25zZSAmJiByZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzOC5pbmZvLmNvbnRyYWN0ID0gcmVzLmRhdGFbMF07CgogICAgICAgICAgaWYgKCFfdGhpczguaW5mby5jb250cmFjdC5uYW1lIHx8ICFfdGhpczguaW5mby5jb250cmFjdC5zeW1ib2wpIHsKICAgICAgICAgICAgX3RoaXM4LmdldGluZm8oKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldEF1Y3Rpb25Vc2VySW5mb3M6IGZ1bmN0aW9uIGdldEF1Y3Rpb25Vc2VySW5mb3MoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdmFyIGFkZHJMaXN0ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXVjdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBhZGRyTGlzdC5wdXNoKHRoaXMuYXVjdGlvbnNbaV0ub3duZXIpOwogICAgICB9CgogICAgICBhZGRyTGlzdCA9IGFkZHJMaXN0LmpvaW4oIiwiKTsKICAgICAgaWYgKCFhZGRyTGlzdCkgcmV0dXJuOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgIGFkZHJMaXN0OiBhZGRyTGlzdAogICAgICB9OwogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuJGFwaSgidXNlci5saXN0YnlhZGRyIiwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAodGhhdC4kdG9vbHMuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICB2YXIgdXNlcnMgPSB7fTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciB1c2VyID0gcmVzLmRhdGFbaV07CiAgICAgICAgICAgIHVzZXJzW3VzZXIuYWRkcmVzcy50b0xvY2FsZUxvd2VyQ2FzZSgpXSA9IHVzZXI7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGF0LmF1Y3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBhdWN0aW9uID0gX3RoaXM5LmF1Y3Rpb25zW2ldOwogICAgICAgICAgICB2YXIgX3VzZXIgPSB1c2Vyc1thdWN0aW9uLm93bmVyLnRvTG9jYWxlTG93ZXJDYXNlKCldOwogICAgICAgICAgICBpZiAoIV91c2VyKSBjb250aW51ZTsKICAgICAgICAgICAgdGhhdC5hdWN0aW9uc1tpXS5uaWNrbmFtZSA9IF91c2VyLm5pY2tuYW1lOwogICAgICAgICAgICB0aGF0LmF1Y3Rpb25zW2ldLmF2YXRhciA9IF91c2VyLmF2YXRhcjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGF0LmF1Y3Rpb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGF0LmF1Y3Rpb25zKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRpbmZvOiBmdW5jdGlvbiBnZXRpbmZvKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBhZGRyZXNzOiB0aGlzLmluZm8uYWRkcmVzcwogICAgICB9OwogICAgICB0aGlzLiRhcGkoImNvbnRyYWN0LmdldGluZm8iLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMxMC4kdG9vbHMuY2hlY2tSZXNwb25zZSAmJiByZXMuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzMTAuaW5mby5jb250cmFjdC5uYW1lID0gcmVzLmRhdGEubmFtZTsKICAgICAgICAgIF90aGlzMTAuaW5mby5jb250cmFjdC5zeW1ib2wgPSByZXMuZGF0YS5zeW1ib2w7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBkaWFsb2dDb25maXJtOiBmdW5jdGlvbiBkaWFsb2dDb25maXJtKCkgewogICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7CiAgICAgIHRoaXMuZ2V0RGV0YWlscygpOwogICAgfSwKICAgIGRpYWxvZ1NlbGVjdDogZnVuY3Rpb24gZGlhbG9nU2VsZWN0KHNlbGVjdFZhbCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB0aGlzLnNob3dTYWxlVHlwZURpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlbGVjdFZhbCA9PT0gMCkgewogICAgICAgICAgX3RoaXMxMS5zaG93RGlhbG9nKCJzYWxlIiwgX3RoaXMxMS5teUFzc2V0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxMS5zaG93RGlhbG9nKCJhdWN0aW9uIiwgX3RoaXMxMS5teUF1Y3Rpb24pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xpY2tUYWI6IGZ1bmN0aW9uIGNsaWNrVGFiKHRhYikge30KICB9Cn07"},null]}