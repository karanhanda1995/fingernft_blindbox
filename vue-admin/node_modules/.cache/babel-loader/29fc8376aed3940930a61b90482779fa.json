{"remainingRequest":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBox.vue","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\babel.config.js","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1652081856293},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1652081880134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zeW1ib2wiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmFycmF5LmZyb20iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5yZWdleHAucmVwbGFjZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzk3MTU0L0Rlc2t0b3AvU09OR1RSQURFUi1WMi1GVUxML2Zpbmdlcm5mdF9ibGluZGJveC9maW5nZXJuZnRfYmxpbmRib3gvdnVlLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwoKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKaW1wb3J0IGJveFNldCBmcm9tICIuL2JsaW5kQm94U2V0IjsKaW1wb3J0IE1lZGlhIGZyb20gIkAvY29tcG9uZW50cy9NZWRpYSI7CmltcG9ydCB3ZWIzIGZyb20gJ0AvdXRpbHMvd2ViMy9pbmRleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYmxpbmRCb3giLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24sCiAgICBib3hTZXQ6IGJveFNldCwKICAgIE1lZGlhOiBNZWRpYQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciB2YWxpZGF0ZVByaWNlID0gZnVuY3Rpb24gdmFsaWRhdGVQcmljZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKF90aGlzMi5wYXlUeXBlID09PSAyKSB7CiAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSAhPT0gcGFyc2VGbG9hdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcihfdGhpczIuJHQoImJsaW5kLmJveC5pbnRlZ2VyIikpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBsaXN0OiBudWxsLAogICAgICB0b3RhbDogMCwKICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBhcGlMb2FkaW5nOiBmYWxzZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgc29ydDogImNyZWF0ZV90aW1lIiwKICAgICAgICBvcmRlcjogImRlc2MiLAogICAgICAgIGJsaW5kVHlwZU5hbWU6IHVuZGVmaW5lZCwKICAgICAgICBzeW5jOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgc3luY09wdGlvbnM6IFt7CiAgICAgICAgdmFsdWU6IHRydWUsCiAgICAgICAgbGFiZWw6IHRoaXMuJHQoImJsaW5kLnN5bmMiKQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IGZhbHNlLAogICAgICAgIGxhYmVsOiB0aGlzLiR0KCJibGluZC51bnN5bmMiKQogICAgICB9XSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dTdGF0dXM6ICIiLAogICAgICBlcnJvcjogIiIsCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZGVzY3JpYmU6ICIiLAogICAgICAgIG93bmVyOiAiIiwKICAgICAgICB0aW1lczogW10sCiAgICAgICAgaXNSZXBldGl0aW9uOiBmYWxzZSwKICAgICAgICBhbW91bnQ6ICIiLAogICAgICAgIG5mdEFtb3VudDogIiIsCiAgICAgICAgcHJpY2U6ICIiLAogICAgICAgIHBheXRva2VuSWQ6ICIiLAogICAgICAgIGltZ0lkOiAiIiwKICAgICAgICBpbWdVcmw6ICIiLAogICAgICAgIGFuaW0xOiAiIiwKICAgICAgICBhbmltMjogIiIKICAgICAgfSwKICAgICAgcGF5dG9rZW5zOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBhZGRyZXNzOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5ib3guZW1wdHlUeXBlIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5ib3guZW1wdHlOYW1lIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBvd25lcjogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYmxpbmQuYm94LmVtcHR5T3duZXIiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBheXRva2VuSWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJsaW5kLmJveC5lbXB0eVBheVRva2VuIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBhbW91bnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJsaW5kLmJveC5saW1pdEFtb3VudCIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgbmZ0QW1vdW50OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5ib3guZW1wdHlPcGVuQW1vdW50IiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwcmljZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYmxpbmQuYm94LmxpbWl0UHJpY2UiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQcmljZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGltZ1VybDogewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5ib3guZW1wdHlQaWN0dXJlIiksCiAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgIH0sCiAgICAgICAgdGltZXM6IHsKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYmxpbmQuYm94LmVtcHR5VGltZXMiKSwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfQogICAgICB9LAogICAgICBwaWNrZXJPcHRpb25zOiB7CiAgICAgICAgZGlzYWJsZWREYXRlOiBmdW5jdGlvbiBkaXNhYmxlZERhdGUodGltZSkgewogICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpIDwgRGF0ZS5ub3coKSAtIDguNjRlNzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlbGV0ZUlkOiAiIiwKICAgICAgYm94OiBudWxsLAogICAgICBmaWxlSW1hZ2U6ICIiLAogICAgICBmaWxlbGlzdDogW10sCiAgICAgIGFuaW0xSW1hZ2U6ICIiLAogICAgICBhbmltMUxpc3Q6IFtdLAogICAgICBhbmltMkltYWdlOiAiIiwKICAgICAgYW5pbTJMaXN0OiBbXSwKICAgICAgLy8g5o6I5p2DCiAgICAgIGJsaW5kQm94SWQ6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRpYWxvZ1RpdGxlOiBmdW5jdGlvbiBkaWFsb2dUaXRsZSgpIHsKICAgICAgdmFyIGRpYWxvZ1RpdGxlID0gIiI7CgogICAgICBzd2l0Y2ggKHRoaXMuZGlhbG9nU3RhdHVzKSB7CiAgICAgICAgY2FzZSAiYWRkIjoKICAgICAgICAgIGRpYWxvZ1RpdGxlID0gdGhpcy4kdCgiYmxpbmQuYWRkIik7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiZWRpdCI6CiAgICAgICAgICBkaWFsb2dUaXRsZSA9IHRoaXMuJHQoImJsaW5kLmVkaXQiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJkZWwiOgogICAgICAgICAgZGlhbG9nVGl0bGUgPSB0aGlzLiR0KCJibGluZC5kZWxldGUiKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHJldHVybiBkaWFsb2dUaXRsZTsKICAgIH0sCiAgICBjb25uZWN0ZWQ6IGZ1bmN0aW9uIGNvbm5lY3RlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm5ldHdvcmsuY29ubmVjdGVkOwogICAgfSwKICAgIHdlYjM6IGZ1bmN0aW9uIHdlYjMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5uZXR3b3JrLndlYjM7CiAgICB9LAogICAgY29uZmlnOiBmdW5jdGlvbiBjb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmNvbmZpZzsKICAgIH0sCiAgICBibGluZFR5cGVzOiBmdW5jdGlvbiBibGluZFR5cGVzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ibGluZFR5cGVzOwogICAgfSwKICAgIHRhYmxlQmxpbmRUeXBlOiBmdW5jdGlvbiB0YWJsZUJsaW5kVHlwZSgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhZGRyZXNzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuYmxpbmRUeXBlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgaWYgKHRoaXMuYmxpbmRUeXBlc1tpXS5hZGRyZXNzID09PSBhZGRyZXNzKSByZXR1cm4gdGhpcy5ibGluZFR5cGVzW2ldLm5hbWU7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIHRhYmxlVGltZTogZnVuY3Rpb24gdGFibGVUaW1lKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHsKICAgICAgICB2YXIgYWN0aXZlRGF0ZSA9ICIiOwoKICAgICAgICBpZiAoc3RhcnQgJiYgZW5kKSB7CiAgICAgICAgICB2YXIgc3RhcnREYXRlID0gbmV3IERhdGUoc3RhcnQgKiAxMDAwKSwKICAgICAgICAgICAgICBzdGFydERhdGVfZGF0ZSA9IHN0YXJ0RGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSwKICAgICAgICAgICAgICBzdGFydERhdGVfdGltZSA9IHN0YXJ0RGF0ZS50b1RpbWVTdHJpbmcoKS5zbGljZSgwLCA4KSwKICAgICAgICAgICAgICBlbmREYXRlID0gbmV3IERhdGUoZW5kICogMTAwMCksCiAgICAgICAgICAgICAgZW5kRGF0ZV9kYXRlID0gZW5kRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKSwKICAgICAgICAgICAgICBlbmREYXRlX3RpbWUgPSBlbmREYXRlLnRvVGltZVN0cmluZygpLnNsaWNlKDAsIDgpOwogICAgICAgICAgYWN0aXZlRGF0ZSA9IHN0YXJ0RGF0ZV9kYXRlICsgIiAiICsgc3RhcnREYXRlX3RpbWUgKyAi5LiAIiArIGVuZERhdGVfZGF0ZSArICIgIiArIGVuZERhdGVfdGltZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBhY3RpdmVEYXRlOwogICAgICB9OwogICAgfSwKICAgIHBheVR5cGU6IGZ1bmN0aW9uIHBheVR5cGUoKSB7CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnBheXRva2VucyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IHRoaXMuZm9ybURhdGEucGF5dG9rZW5JZCkgewogICAgICAgICAgICByZXR1cm4gaXRlbS50eXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICB0b3RhbEFtb3VudDogZnVuY3Rpb24gdG90YWxBbW91bnQoKSB7CiAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5uZnRBbW91bnQgfHwgIXRoaXMuZm9ybURhdGEuYW1vdW50KSByZXR1cm4gMDsKICAgICAgdmFyIGFtb3VudCA9IHBhcnNlSW50KHRoaXMuZm9ybURhdGEubmZ0QW1vdW50ICogdGhpcy5mb3JtRGF0YS5hbW91bnQpOwogICAgICByZXR1cm4gIWFtb3VudCA/IDAgOiBhbW91bnQ7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb25uZWN0V2FsbGV0OiBmdW5jdGlvbiBjb25uZWN0V2FsbGV0KCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29ubmVjdCIpOwogICAgfSwKICAgIG9uQ29uZmlybTogZnVuY3Rpb24gb25Db25maXJtKCkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMucGF5dG9rZW5MaXN0KCk7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIHBheXRva2VuTGlzdDogZnVuY3Rpb24gcGF5dG9rZW5MaXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJGFwaSgiYmxpbmQucGF5dG9rZW4ubGlzdCIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChfdGhpczMuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICBfdGhpczMucGF5dG9rZW5zID0gcmVzLmRhdGEubGlzdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGFwaSgiYmxpbmQuYm94Lmxpc3QiLCB0aGlzLmxpc3RRdWVyeSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0Lmxpc3QgPSByZXMuZGF0YS5saXN0OwoKICAgICAgICBfdGhpczQuZ2V0TmZ0TGlzdCgpOwoKICAgICAgICBfdGhpczQudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICBfdGhpczQubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5saXN0ID0gW107CiAgICAgICAgX3RoaXM0LnRvdGFsID0gMDsKICAgICAgICBfdGhpczQubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TmZ0TGlzdDogZnVuY3Rpb24gZ2V0TmZ0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgYm94TGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBib3hMaXN0LnB1c2godGhpcy5saXN0W2ldLmlkKTsKICAgICAgfQoKICAgICAgYm94TGlzdCA9IGJveExpc3Quam9pbigiLCIpOwogICAgICB0aGlzLiRhcGkoImJsaW5kLmJveC5uZnRzYnltdWx0aSIsIHsKICAgICAgICBib3hMaXN0OiBib3hMaXN0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChfdGhpczUuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICB2YXIgbmZ0cyA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICB2YXIgYW1vdW50RGljdCA9IHt9OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmZ0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbmZ0ID0gbmZ0c1tpXTsKICAgICAgICAgICAgaWYgKCFhbW91bnREaWN0W25mdC5ibGluZEJveElkXSkgYW1vdW50RGljdFtuZnQuYmxpbmRCb3hJZF0gPSAwOwogICAgICAgICAgICBhbW91bnREaWN0W25mdC5ibGluZEJveElkXSArPSBuZnQuYW1vdW50OwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXM1Lmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHVzZWRBbW91bnQgPSBhbW91bnREaWN0W190aGlzNS5saXN0W2ldLmlkXTsKICAgICAgICAgICAgX3RoaXM1Lmxpc3RbaV0udXNlZEFtb3VudCA9IHVzZWRBbW91bnQgPyB1c2VkQW1vdW50IDogMDsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUubGlzdCA9IFtdLmNvbmNhdChfdGhpczUubGlzdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0Zvcm06IGZ1bmN0aW9uIGNoZWNrRm9ybSgpIHsKICAgICAgdmFyIGVycm9yID0gZmFsc2U7CiAgICAgIHZhciBhbW91bnQgPSBwYXJzZUludCh0aGlzLmZvcm1EYXRhLmFtb3VudCk7CgogICAgICBpZiAoIWFtb3VudCB8fCBhbW91bnQgPCAxKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuJHQoJ2JsaW5kLmJveC5saW1pdEFtb3VudCcpOwogICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIG5mdEFtb3VudCA9IHBhcnNlSW50KHRoaXMuZm9ybURhdGEubmZ0QW1vdW50KTsKCiAgICAgIGlmICghbmZ0QW1vdW50IHx8IG5mdEFtb3VudCA8IDEpIHsKICAgICAgICB0aGlzLmVycm9yID0gdGhpcy4kdCgnYmxpbmQuYm94LmxpbWl0T3BlbkFtb3VudCcpOwogICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIHByaWNlID0gcGFyc2VGbG9hdCh0aGlzLmZvcm1EYXRhLnByaWNlKTsKCiAgICAgIGlmICghcHJpY2UgfHwgcHJpY2UgPCAwKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuJHQoJ2JsaW5kLmJveC5saW1pdFByaWNlJyk7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZmlsZUltYWdlICYmICF0aGlzLmZvcm1EYXRhLmltZ0lkKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuJHQoJ2JsaW5kLmJveC5lbXB0eUNvdmVyJyk7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gIWVycm9yOwogICAgfSwKICAgIGFkZEJveDogZnVuY3Rpb24gYWRkQm94KGRhdGEpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkZm9ybURhdGEgPSB0aGlzLmZvcm1EYXRhLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJGZvcm1EYXRhLmFkZHJlc3MsCiAgICAgICAgICBuYW1lID0gX3RoaXMkZm9ybURhdGEubmFtZSwKICAgICAgICAgIGRlc2NyaWJlID0gX3RoaXMkZm9ybURhdGEuZGVzY3JpYmUsCiAgICAgICAgICBvd25lciA9IF90aGlzJGZvcm1EYXRhLm93bmVyLAogICAgICAgICAgdGltZXMgPSBfdGhpcyRmb3JtRGF0YS50aW1lcywKICAgICAgICAgIGlzUmVwZXRpdGlvbiA9IF90aGlzJGZvcm1EYXRhLmlzUmVwZXRpdGlvbiwKICAgICAgICAgIGFtb3VudCA9IF90aGlzJGZvcm1EYXRhLmFtb3VudCwKICAgICAgICAgIG5mdEFtb3VudCA9IF90aGlzJGZvcm1EYXRhLm5mdEFtb3VudCwKICAgICAgICAgIHByaWNlID0gX3RoaXMkZm9ybURhdGEucHJpY2UsCiAgICAgICAgICBwYXl0b2tlbklkID0gX3RoaXMkZm9ybURhdGEucGF5dG9rZW5JZCwKICAgICAgICAgIGltZ0lkID0gX3RoaXMkZm9ybURhdGEuaW1nSWQsCiAgICAgICAgICBpbWdVcmwgPSBfdGhpcyRmb3JtRGF0YS5pbWdVcmwsCiAgICAgICAgICBhbmltMSA9IF90aGlzJGZvcm1EYXRhLmFuaW0xLAogICAgICAgICAgYW5pbTIgPSBfdGhpcyRmb3JtRGF0YS5hbmltMjsKICAgICAgdmFyIHN0YXJ0VGltZSA9ICF0aW1lc1swXSA/IDAgOiBwYXJzZUludChuZXcgRGF0ZSh0aW1lc1swXSkuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgIHZhciBlbmRUaW1lID0gIXRpbWVzWzFdID8gMCA6IHBhcnNlSW50KG5ldyBEYXRlKHRpbWVzWzFdKS5nZXRUaW1lKCkgLyAxMDAwKTsKCiAgICAgIGlmIChkYXRhLmNvdmVyKSB7CiAgICAgICAgaW1nSWQgPSBkYXRhLmNvdmVyLmlkOwogICAgICAgIGltZ1VybCA9IGRhdGEuY292ZXIudXJsOwogICAgICB9CgogICAgICBpZiAoZGF0YS5hbmltMSkgYW5pbTEgPSBkYXRhLmFuaW0xLnVybDsKICAgICAgaWYgKGRhdGEuYW5pbTIpIGFuaW0yID0gZGF0YS5hbmltMi51cmw7CiAgICAgIHZhciBzZW5kRGF0YSA9IHsKICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgZGVzY3JpYmU6IGRlc2NyaWJlLAogICAgICAgIG93bmVyOiBvd25lciwKICAgICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZSwKICAgICAgICBlbmRUaW1lOiBlbmRUaW1lLAogICAgICAgIGlzUmVwZXRpdGlvbjogaXNSZXBldGl0aW9uLAogICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgIG5mdEFtb3VudDogbmZ0QW1vdW50LAogICAgICAgIHByaWNlOiBwcmljZSwKICAgICAgICBwYXl0b2tlbklkOiBwYXl0b2tlbklkLAogICAgICAgIGltZ0lkOiBpbWdJZCwKICAgICAgICBpbWdVcmw6IGltZ1VybCwKICAgICAgICBhbmltMTogYW5pbTEsCiAgICAgICAgYW5pbTI6IGFuaW0yCiAgICAgIH07CiAgICAgIHRoaXMuYXBpTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGFwaSgiYmxpbmQuYm94LmFkZCIsIHNlbmREYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczYuYXBpTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAoX3RoaXM2LiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgX3RoaXM2LnN1Y2Nlc3NDYWxsYmFjaygpOwoKICAgICAgICAgIF90aGlzNi5nZXRMaXN0KCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXM2LmZhaWxDYWxsYmFjayhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0Qm94OiBmdW5jdGlvbiBlZGl0Qm94KGRhdGEpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkZm9ybURhdGEyID0gdGhpcy5mb3JtRGF0YSwKICAgICAgICAgIHRpbWVzID0gX3RoaXMkZm9ybURhdGEyLnRpbWVzLAogICAgICAgICAgaW1nSWQgPSBfdGhpcyRmb3JtRGF0YTIuaW1nSWQsCiAgICAgICAgICBpbWdVcmwgPSBfdGhpcyRmb3JtRGF0YTIuaW1nVXJsLAogICAgICAgICAgYW5pbTEgPSBfdGhpcyRmb3JtRGF0YTIuYW5pbTEsCiAgICAgICAgICBhbmltMiA9IF90aGlzJGZvcm1EYXRhMi5hbmltMjsKICAgICAgdmFyIHN0YXJ0VGltZSA9ICF0aW1lc1swXSA/IDAgOiBwYXJzZUludChuZXcgRGF0ZSh0aW1lc1swXSkuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgIHZhciBlbmRUaW1lID0gIXRpbWVzWzFdID8gMCA6IHBhcnNlSW50KG5ldyBEYXRlKHRpbWVzWzFdKS5nZXRUaW1lKCkgLyAxMDAwKTsKCiAgICAgIGlmIChkYXRhLmNvdmVyKSB7CiAgICAgICAgaW1nSWQgPSBkYXRhLmNvdmVyLmlkOwogICAgICAgIGltZ1VybCA9IGRhdGEuY292ZXIudXJsOwogICAgICB9CgogICAgICBpZiAoZGF0YS5hbmltMSkgewogICAgICAgIGFuaW0xID0gZGF0YS5hbmltMS51cmw7CiAgICAgIH0KCiAgICAgIGlmIChkYXRhLmFuaW0yKSB7CiAgICAgICAgYW5pbTIgPSBkYXRhLmFuaW0yLnVybDsKICAgICAgfQoKICAgICAgdmFyIHNlbmREYXRhID0gewogICAgICAgIGlkOiB0aGlzLmZvcm1EYXRhLmlkLAogICAgICAgIGFkZHJlc3M6IHRoaXMuZm9ybURhdGEuYWRkcmVzcywKICAgICAgICBuYW1lOiB0aGlzLmZvcm1EYXRhLm5hbWUsCiAgICAgICAgZGVzY3JpYmU6IHRoaXMuZm9ybURhdGEuZGVzY3JpYmUsCiAgICAgICAgb3duZXI6IHRoaXMuZm9ybURhdGEub3duZXIsCiAgICAgICAgaXNSZXBldGl0aW9uOiB0aGlzLmZvcm1EYXRhLmlzUmVwZXRpdGlvbiwKICAgICAgICBhbW91bnQ6IHRoaXMuZm9ybURhdGEuYW1vdW50LAogICAgICAgIG5mdEFtb3VudDogdGhpcy5mb3JtRGF0YS5uZnRBbW91bnQsCiAgICAgICAgcHJpY2U6IHRoaXMuZm9ybURhdGEucHJpY2UsCiAgICAgICAgcGF5dG9rZW5JZDogdGhpcy5mb3JtRGF0YS5wYXl0b2tlbklkLAogICAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLAogICAgICAgIGVuZFRpbWU6IGVuZFRpbWUsCiAgICAgICAgaW1nSWQ6IGltZ0lkLAogICAgICAgIGltZ1VybDogaW1nVXJsLAogICAgICAgIGFuaW0xOiBhbmltMSwKICAgICAgICBhbmltMjogYW5pbTIKICAgICAgfTsKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpKCJibGluZC5ib3guZWRpdCIsIHNlbmREYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczcuYXBpTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAoX3RoaXM3LiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgX3RoaXM3LnN1Y2Nlc3NDYWxsYmFjaygpOwoKICAgICAgICAgIF90aGlzNy5nZXRMaXN0KCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXM3LmZhaWxDYWxsYmFjayhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxCb3g6IGZ1bmN0aW9uIGRlbEJveCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLmFwaUxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRhcGkoImJsaW5kLmJveC5kZWxldGVkIiwgewogICAgICAgIGlkOiB0aGlzLmRlbGV0ZUlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzOC5hcGlMb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChfdGhpczguJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICBfdGhpczguc3VjY2Vzc0NhbGxiYWNrKCk7CgogICAgICAgICAgdmFyIF90aGlzOCRsaXN0UXVlcnkgPSBfdGhpczgubGlzdFF1ZXJ5LAogICAgICAgICAgICAgIHBhZ2UgPSBfdGhpczgkbGlzdFF1ZXJ5LnBhZ2UsCiAgICAgICAgICAgICAgbGltaXQgPSBfdGhpczgkbGlzdFF1ZXJ5LmxpbWl0OwoKICAgICAgICAgIGlmIChwYWdlID4gMSAmJiBfdGhpczgudG90YWwgLSAxIC0gKHBhZ2UgLSAxKSAqIGxpbWl0IDw9IDApIHsKICAgICAgICAgICAgX3RoaXM4Lmxpc3RRdWVyeS5wYWdlIC09IDE7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM4LnRvdGFsIC09IDE7CgogICAgICAgICAgX3RoaXM4LmdldExpc3QoKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBfdGhpczguZmFpbENhbGxiYWNrKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHByZXBhcmVTaWduOiBmdW5jdGlvbiBwcmVwYXJlU2lnbigpIHsKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gdHJ1ZTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRhcGkoImJsaW5kLmJveC5wcmVwYXJlIiwgewogICAgICAgIGlkOiB0aGlzLmJsaW5kQm94SWQsCiAgICAgICAgb3duZXI6IHRoaXMud2ViMy5jb2luYmFzZQogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlcykgewogICAgICAgICAgdmFyIG9yZGVyLCBtZXNzYWdlLCByZXN1bHQ7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF90aGlzLmFwaUxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBvcmRlciA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICBtZXNzYWdlID0gb3JkZXIubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgiMHgiLCAiIik7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICByZXR1cm4gd2ViMy5zaWduKG1lc3NhZ2UsIF90aGlzLndlYjMuY29pbmJhc2UpOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IHJlc3VsdC5lcnJvcjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgb3JkZXIuc2lnbmF0dXJlID0gcmVzdWx0OwoKICAgICAgICAgICAgICAgICAgX3RoaXMuc2lnbkRhdGEob3JkZXIpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgc2lnbkRhdGE6IGZ1bmN0aW9uIHNpZ25EYXRhKG9yZGVyKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpKCJibGluZC5ib3guc2lnbiIsIG9yZGVyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczkuYXBpTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAoX3RoaXM5LiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgX3RoaXM5LnN1Y2Nlc3NDYWxsYmFjaygpOwoKICAgICAgICAgIF90aGlzOS5nZXRMaXN0KCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXM5LmZhaWxDYWxsYmFjayhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBzdWNjZXNzQ2FsbGJhY2s6IGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjaygpIHsKICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgIHRpdGxlOiB0aGlzLiR0KCJibGluZC5zdWNjZXNzIiksCiAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYmxpbmQubWVzc2FnZVN1Y2Nlc3MiKQogICAgICB9KTsKICAgICAgdGhpcy5oYW5kbGVyQ2FuY2VsKCk7CiAgICB9LAogICAgZmFpbENhbGxiYWNrOiBmdW5jdGlvbiBmYWlsQ2FsbGJhY2soZXJyLCBtc2cpIHsKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgdGl0bGU6IHRoaXMuJHQoImJsaW5kLmZhaWwiKSwKICAgICAgICBtZXNzYWdlOiBlcnIgPyAhbXNnID8gdGhpcy4kdCgicmVzcG9uc2UuIiArIGVyci5kYXRhID8gZXJyLmRhdGEuZXJybm8gOiAiIikgOiBtc2cgOiB0aGlzLiR0KCJibGluZC5tZXNzYWdlRmFpbCIpCiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuZGlhbG9nU3RhdHVzID09ICJkZWwiIHx8IHRoaXMuZGlhbG9nU3RhdHVzID09ICJzaWduIikgewogICAgICAgIHRoaXMuaGFuZGxlckNhbmNlbCgpOwogICAgICB9CiAgICB9LAogICAgY2FsbGJhY2tDbG9zZURpYWxvZzogZnVuY3Rpb24gY2FsbGJhY2tDbG9zZURpYWxvZygpIHsKICAgICAgdGhpcy5yZXNldEZvcm0oKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJHJlZnNbImZvcm1EYXRhIl0gPyB0aGlzLiRyZWZzWyJmb3JtRGF0YSJdLmNsZWFyVmFsaWRhdGUoKSA6ICIiOwogICAgICB9KTsKICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAiIjsKICAgICAgdGhpcy5lcnJvciA9ICIiOwogICAgfSwKICAgIHVwbG9hZENoYW5nZTogZnVuY3Rpb24gdXBsb2FkQ2hhbmdlKGZpbGUsIG5hbWUpIHsKICAgICAgdmFyIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50OwogICAgICB2YXIgZmlsZXMgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgIGNhc2UgImNvdmVyIjoKICAgICAgICAgIHRoaXMuZmlsZWxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMuZmlsZUltYWdlID0gZmlsZS5yYXc7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLmZvcm1EYXRhLmltZ1VybCA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIH07CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIm9wZW4iOgogICAgICAgICAgdGhpcy5hbmltMUxpc3QgPSBbXTsKICAgICAgICAgIHRoaXMuYW5pbTFJbWFnZSA9IGZpbGUucmF3OwoKICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5mb3JtRGF0YS5hbmltMSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIH07CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIm9wZW5lZCI6CiAgICAgICAgICB0aGlzLmFuaW0yTGlzdCA9IFtdOwogICAgICAgICAgdGhpcy5hbmltMkltYWdlID0gZmlsZS5yYXc7CgogICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLmZvcm1EYXRhLmFuaW0yID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgfTsKCiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZXMpOwogICAgfSwKICAgIHJlc2V0Rm9ybTogZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICB0aGlzLmZvcm1EYXRhID0gewogICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGRlc2NyaWJlOiAiIiwKICAgICAgICB0aW1lczogW10sCiAgICAgICAgaXNSZXBldGl0aW9uOiBmYWxzZSwKICAgICAgICBhbW91bnQ6ICIiLAogICAgICAgIG5mdEFtb3VudDogIiIsCiAgICAgICAgcHJpY2U6ICIiLAogICAgICAgIHBheXRva2VuSWQ6ICIiLAogICAgICAgIGltZ0lkOiAiIiwKICAgICAgICBpbWdVcmw6ICIiLAogICAgICAgIGFuaW0xOiAiIiwKICAgICAgICBhbmltMjogIiIKICAgICAgfTsKICAgICAgdGhpcy5maWxlSW1hZ2UgPSAiIjsKICAgICAgdGhpcy5hbmltMUltYWdlID0gIiI7CiAgICAgIHRoaXMuYW5pbTJJbWFnZSA9ICIiOwogICAgICB0aGlzLmVycm9yID0gIiI7CiAgICB9LAogICAgaGFuZGxlckJ0bjogZnVuY3Rpb24gaGFuZGxlckJ0bihidG5UeXBlKSB7CiAgICAgIHZhciByb3cgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwoKICAgICAgc3dpdGNoIChidG5UeXBlKSB7CiAgICAgICAgY2FzZSAiYWRkIjoKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1siZm9ybURhdGEiXSA/IHRoaXMuJHJlZnNbImZvcm1EYXRhIl0uY2xlYXJWYWxpZGF0ZSgpIDogIiI7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJlZGl0IjoKICAgICAgICAgIHRoaXMuZmlsZUltYWdlID0gIiI7CiAgICAgICAgICB0aGlzLmFuaW0xSW1hZ2UgPSAiIjsKICAgICAgICAgIHRoaXMuYW5pbTJJbWFnZSA9ICIiOwogICAgICAgICAgdGhpcy5mb3JtRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdyk7CiAgICAgICAgICB2YXIgc3RhcnRUaW1lID0gIXRoaXMuZm9ybURhdGEuc3RhcnRUaW1lID8gIiIgOiBuZXcgRGF0ZSh0aGlzLmZvcm1EYXRhLnN0YXJ0VGltZSAqIDEwMDApOwogICAgICAgICAgdmFyIGVuZFRpbWUgPSAhdGhpcy5mb3JtRGF0YS5lbmRUaW1lID8gIiIgOiBuZXcgRGF0ZSh0aGlzLmZvcm1EYXRhLmVuZFRpbWUgKiAxMDAwKTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1EYXRhLCAidGltZXMiLCBbc3RhcnRUaW1lLCBlbmRUaW1lXSk7CiAgICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnNbImZvcm1EYXRhIl0gPyB0aGlzLiRyZWZzWyJmb3JtRGF0YSJdLmNsZWFyVmFsaWRhdGUoKSA6ICIiOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiZGVsIjoKICAgICAgICAgIHRoaXMuZGVsZXRlSWQgPSByb3cuaWQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAic2lnbiI6CiAgICAgICAgICB0aGlzLmJsaW5kQm94SWQgPSByb3cuaWQ7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAic2V0IjoKICAgICAgICAgIHRoaXMuYm94ID0gcm93OwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ1N0YXR1cyA9IGJ0blR5cGU7CiAgICB9LAogICAgaGFuZGxlckNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9oYW5kbGVyQ29uZmlybSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgICB2YXIgZGF0YSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYXBpTG9hZGluZykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gdGhpcy5kaWFsb2dTdGF0dXM7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IF9jb250ZXh0Mi50MCA9PT0gImFkZCIgPyA1IDogX2NvbnRleHQyLnQwID09PSAiZWRpdCIgPyAyNSA6IF9jb250ZXh0Mi50MCA9PT0gImRlbCIgPyA0NSA6IF9jb250ZXh0Mi50MCA9PT0gInNpZ24iID8gNDcgOiBfY29udGV4dDIudDAgPT09ICJzZXQiID8gNDkgOiA1MTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0Zvcm0oKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgZGF0YSA9IHt9OwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5maWxlSW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZFN0b3JhZ2UodGhpcy5maWxlSW1hZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhLmNvdmVyID0gcmVzdWx0OwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFuaW0xSW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZFN0b3JhZ2UodGhpcy5hbmltMUltYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgZGF0YS5hbmltMSA9IHJlc3VsdDsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbmltMkltYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRTdG9yYWdlKHRoaXMuYW5pbTJJbWFnZSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEuYW5pbTIgPSByZXN1bHQ7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICB0aGlzLmFkZEJveChkYXRhKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDUxKTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrRm9ybSgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgIGRhdGEgPSB7fTsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmlsZUltYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRTdG9yYWdlKHRoaXMuZmlsZUltYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgZGF0YS5jb3ZlciA9IHJlc3VsdDsKCiAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbmltMUltYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRTdG9yYWdlKHRoaXMuYW5pbTFJbWFnZSk7CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEuYW5pbTEgPSByZXN1bHQ7CgogICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYW5pbTJJbWFnZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQxOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBsb2FkU3RvcmFnZSh0aGlzLmFuaW0ySW1hZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhLmFuaW0yID0gcmVzdWx0OwoKICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgdGhpcy5lZGl0Qm94KGRhdGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgNTEpOwoKICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgdGhpcy5kZWxCb3goKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDUxKTsKCiAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgIHRoaXMuc2lnbkRhdGEoKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDUxKTsKCiAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTAuJHJlZnMuY29tU2V0KSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC4kcmVmcy5jb21TZXQuYWRkQm94KCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgNTEpOwoKICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaGFuZGxlckNvbmZpcm0oKSB7CiAgICAgICAgcmV0dXJuIF9oYW5kbGVyQ29uZmlybS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaGFuZGxlckNvbmZpcm07CiAgICB9KCksCiAgICBoYW5kbGVyQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVyQ2FuY2VsKCkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgdXBsb2FkU3RvcmFnZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwbG9hZFN0b3JhZ2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGZpbGUpIHsKICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZSk7CiAgICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gX3RoaXMxMTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMTEuJGFwaSgic3RvcmFnZS5jcmVhdGUiLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTEuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWRTdG9yYWdlKF94MikgewogICAgICAgIHJldHVybiBfdXBsb2FkU3RvcmFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkU3RvcmFnZTsKICAgIH0oKSwKICAgIGhhbmRsZXJGaWx0ZXI6IGZ1bmN0aW9uIGhhbmRsZXJGaWx0ZXIoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["name","components","Pagination","boxSet","Media","data","callback","list","total","listLoading","apiLoading","listQuery","page","limit","sort","order","blindTypeName","sync","syncOptions","value","label","dialogFormVisible","dialogStatus","error","formData","address","describe","owner","times","isRepetition","amount","nftAmount","price","paytokenId","imgId","imgUrl","anim1","anim2","paytokens","rules","required","message","trigger","validator","pickerOptions","disabledDate","time","deleteId","box","fileImage","filelist","anim1Image","anim1List","anim2Image","anim2List","blindBoxId","computed","dialogTitle","connected","web3","config","blindTypes","tableBlindType","tableTime","startDate_date","startDate_time","endDate","endDate_date","endDate_time","activeDate","payType","totalAmount","created","methods","connectWallet","onConfirm","init","paytokenList","getList","then","catch","getNftList","boxList","amountDict","checkForm","addBox","parseInt","startTime","endTime","editBox","id","delBox","prepareSign","_this","res","result","signData","successCallback","title","failCallback","err","msg","callbackCloseDialog","uploadChange","file","reader","resetForm","handlerBtn","btnType","handlerConfirm","handlerCancel","uploadStorage","resolve","reject","handlerFilter"],"sourceRoot":"src/views/blindBoxManagement","sources":["blindBox.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.blindTypeName\" clearable class=\"filter-item w-200 mr-10\" :placeholder=\"$t('blind.placeholder')\" />\n      <el-select v-model=\"listQuery.sync\" class=\"filter-item w-200 mr-10\" :placeholder=\"$t('blind.box.pleaseSelectSync')\" :clearable=\"true\">\n        <el-option v-for=\"item in syncOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\n      </el-select>\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handlerFilter\">{{ $t(\"blind.select\") }}</el-button>\n      <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handlerBtn('add')\" v-permission=\"['POST /admin/blind/box/add']\">{{ $t(\"blind.add\") }}</el-button>\n    </div>\n\n    <el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border>\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-form label-position=\"left\" inline class=\"table-expand\" label-width=\"160px\">\n            <el-form-item :label=\"$t('blind.box.blindType')\">\n              <span>{{ tableBlindType(props.row.address) }}</span>\n            </el-form-item>\n            <el-form-item label=\"payToken\">\n              <span>{{ props.row.payToken }}</span>\n            </el-form-item>\n            <el-form-item label=\"payTokenId\">\n              <span>{{ props.row.payTokenId }}</span>\n            </el-form-item>\n            <el-form-item :label=\"$t('blind.box.times')\">\n              <span>{{ tableTime(props.row.startTime, props.row.endTime) }}</span>\n            </el-form-item>\n            <el-form-item :label=\"$t('blind.box.anim1')\" v-if=\"props.row.anim1\">\n              <media :url=\"props.row.anim1\" type=\"image\" :isPreview=\"true\"></media>\n            </el-form-item>\n            <el-form-item :label=\"$t('blind.box.anim2')\" v-if=\"props.row.anim2\">\n              <media :url=\"props.row.anim2\" type=\"image\" :isPreview=\"true\"></media>\n            </el-form-item>\n\n            <el-form-item :label=\"$t('blind.box.salt')\">\n              <span>{{ props.row.salt }}</span>\n            </el-form-item>\n          </el-form>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"id\" label=\"ID\" sortable> </el-table-column>\n      <el-table-column prop=\"name\" :label=\"$t('blind.box.name')\">\n      </el-table-column>\n      <el-table-column prop=\"amount\" :label=\"$t('blind.box.amount')\">\n      </el-table-column>\n      <el-table-column prop=\"nftAmount\" :label=\"$t('blind.box.NFTAmount')\">\n      </el-table-column>\n      <el-table-column :label=\"$t('blind.box.NFTListInfo')\" align=\"center\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <div class=\"bfont\" :class=\"!scope.row.isRepetition ? 'cblue' : 'cgreen' \">\n            {{ !scope.row.isRepetition? $t('blind.box.unRepeat') : $t('blind.box.isRepeat') }}\n          </div>\n\n          <div class=\"bfont\" :class=\"scope.row.amount * scope.row.nftAmount != scope.row.usedAmount ? 'cred' : 'cgreen' \">\n            {{$t('blind.box.totalAmount')}}: {{ scope.row.amount * scope.row.nftAmount }}({{ scope.row.usedAmount }})\n          </div>\n          <div class=\"cgreen bfont\" v-if=\"scope.row.amount * scope.row.nftAmount == scope.row.usedAmount\">\n            {{$t('blind.box.success')}}\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"price\" :label=\"$t('blind.box.price')\">\n      </el-table-column>\n      <el-table-column width=\"150\" prop=\"imgUrl\" :label=\"$t('blind.box.picture')\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <media :url=\"scope.row.imgUrl\" type=\"image\" :isPreview=\"true\"></media>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"status\" :label=\"$t('blind.status')\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"success\" v-if=\"scope.row.sync\">\n            {{ $t(\"blind.sign\") }}\n          </el-tag>\n          <el-tag type=\"info\" v-else>{{ $t(\"blind.unsign\") }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" :label=\"$t('blind.operation')\" width=\"300\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"success\" size=\"mini\" @click=\"handlerBtn('set', scope.row)\" v-permission=\"['POST /admin/blind/box/addNfts']\">{{ $t(\"blind.box.config\") }}</el-button>\n          <el-button type=\"primary\" size=\"mini\" @click=\"handlerBtn('edit', scope.row)\" v-permission=\"['POST /admin/blind/box/edit']\">{{ $t(\"blind.edit\") }}</el-button>\n\n          <el-button type=\"primary\" size=\"mini\" @click=\"handlerBtn('sign', scope.row)\" v-permission=\"['POST /admin/blind/box/sign']\">{{ $t(\"blind.box.sign\") }}</el-button>\n\n          <el-button type=\"danger\" size=\"mini\" @click=\"handlerBtn('del', scope.row)\" v-permission=\"['POST /admin/blind/box/deleted']\">{{ $t(\"blind.delete\") }}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total > 0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\" :width=\"dialogStatus === 'del' || dialogStatus === 'sync' ? '30%' : '50%'\" @closed=\"callbackCloseDialog\">\n      <template v-if=\"dialogStatus === 'add' || dialogStatus === 'edit'\">\n        <el-form ref=\"formData\" :model=\"formData\" status-icon label-position=\"left\" label-width=\"120px\" :rules=\"rules\">\n          <el-form-item :label=\"$t('blind.box.blindType')\" prop=\"address\">\n            <el-select v-model=\"formData.address\" :placeholder=\"$t('blind.box.pleaseSelect')\">\n              <el-option v-for=\"(blindType, index) in blindTypes\" :key=\"index\" :label=\"blindType.name\" :value=\"blindType.address\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.name')\" prop=\"name\">\n            <el-input v-model=\"formData.name\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.brief')\" prop=\"describe\">\n            <el-input type=\"textarea\" v-model=\"formData.describe\"></el-input>\n          </el-form-item>\n\n          <el-form-item :label=\"$t('blind.box.times')\" prop=\"times\">\n            <el-date-picker v-model=\"formData.times\" type=\"datetimerange\" :range-separator=\"$t('blind.time.to')\" :start-placeholder=\"$t('blind.time.start')\" :end-placeholder=\"$t('blind.time.end')\" picker-options=\"pickerOptions\">\n            </el-date-picker>\n          </el-form-item>\n\n          <el-form-item :label=\"$t('blind.box.repetition')\" prop=\"isRepetition\">\n            <el-switch v-model=\"formData.isRepetition\"></el-switch>\n          </el-form-item>\n\n          <el-form-item :label=\"$t('blind.box.amount')\" prop=\"amount\">\n            <el-input-number v-model=\"formData.amount\"></el-input-number>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.NFTAmount')\" prop=\"nftAmount\">\n            <el-input-number v-model=\"formData.nftAmount\"></el-input-number>\n          </el-form-item>\n          <div class=\"form-tip\">{{ $t('blind.box.totalAmount') }} :\n            <span class=\"cblue\"> {{ totalAmount }}</span>\n          </div>\n          <el-form-item :label=\"$t('blind.box.price')\" prop=\"price\">\n            <el-input-number v-model=\"formData.price\" :controls=\"false\"></el-input-number>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.address')\" prop=\"paytokenId\">\n            <el-select v-model=\"formData.paytokenId\" :placeholder=\"$t('blind.box.pleaseSelect')\">\n              <el-option v-for=\"(paytoken, index) in paytokens\" :key=\"index\" :label=\"paytoken.symbol\" :value=\"paytoken.id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.picture')\" prop=\"imgUrl\">\n            <el-upload ref=\"upload\" action=\"\" :auto-upload=\"false\" :show-file-list=\"false\" :file-list=\"filelist\" :limit=\"1\" class=\"avatar-uploader\" accept=\"image/jpg, image/jpeg, image/png, image/gif\" :on-change=\" (file) => { uploadChange(file, 'cover'); }\">\n              <template v-if=\"formData.imgUrl\">\n                <media :url=\"formData.imgUrl\" type=\"image\"></media>\n              </template>\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.openGif')\" prop=\"anim1\">\n            <el-upload ref=\"upload\" action=\"\" :auto-upload=\"false\" :show-file-list=\"false\" :file-list=\"anim1List\" :limit=\"1\" class=\"avatar-uploader\" accept=\"image/jpg, image/jpeg, image/png, image/gif\" :on-change=\" (file) => { uploadChange(file, 'open');}\">\n              <template v-if=\"formData.anim1\">\n                <media :url=\"formData.anim1\" type=\"image\"></media>\n              </template>\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item :label=\"$t('blind.box.openedGif')\" prop=\"anim2\">\n            <el-upload ref=\"upload\" action=\"\" :auto-upload=\"false\" :show-file-list=\"false\" :file-list=\"anim2List\" :limit=\"1\" class=\"avatar-uploader\" accept=\"image/jpg, image/jpeg, image/png, image/gif\" :on-change=\" (file) => { uploadChange(file, 'opened');}\">\n              <template v-if=\"formData.anim2\">\n                <media :url=\"formData.anim2\" type=\"image\"></media>\n              </template>\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n      </template>\n      <!--  -->\n      <template v-if=\"dialogStatus === 'del'\">\n        <span>{{ $t(\"blind.deleteTip\") }}</span>\n      </template>\n      <template v-if=\"dialogStatus === 'sign'\">\n        <p class=\"mb-20\">\n          <span class=\"bfont\"> {{ $t('blind.box.signTip') }} </span>\n        </p>\n        <div class=\"error-tip text-center mb-10\" v-if=\"error\"> {{ error }} </div>\n        <div class=\"mb-20 text-center\">\n          <el-button type=\"warning\" v-if=\"!connected\" @click=\"connectWallet\"> {{ $t(\"global.connectWallet\") }}</el-button>\n          <el-button :loading=\"apiLoading\" type=\"primary\" v-else @click=\"prepareSign\"> {{ $t('blind.box.sign') }}</el-button>\n        </div>\n      </template>\n      <template v-if=\"dialogStatus === 'set'\">\n        <box-set ref=\"comSet\" :box=\"box\" @confirm=\"onConfirm\"></box-set>\n      </template>\n      <!--  -->\n      <div slot=\"footer\" class=\"flex align-center\" v-if=\"dialogStatus != 'set' && dialogStatus != 'sign'\">\n        <div class=\"\" v-if=\"error\">\n          <span class=\"cred bfont\">{{ error }}</span>\n        </div>\n        <div class=\"flex1\">\n          <el-button @click=\"handlerCancel\">{{ $t(\"blind.cancel\") }}</el-button>\n          <el-button :loading=\"apiLoading\" type=\"primary\" @click.native.prevent=\"handlerConfirm\">{{ $t(\"blind.confirm\") }}</el-button>\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Pagination from \"@/components/Pagination\";\n  import boxSet from \"./blindBoxSet\";\n  import Media from \"@/components/Media\";\n  import web3 from '@/utils/web3/index';\n  export default {\n    name: \"blindBox\",\n    components: { Pagination, boxSet, Media },\n    data () {\n      var validatePrice = (rule, value, callback) => {\n        if (this.payType === 2) {\n          if (parseInt(value) !== parseFloat(value)) {\n            callback(new Error(this.$t(\"blind.box.integer\")));\n          } else {\n            callback();\n          }\n        } else {\n          callback();\n        }\n      };\n      return {\n        list: null,\n        total: 0,\n        listLoading: false,\n        apiLoading: false,\n        listQuery: {\n          page: 1,\n          limit: 10,\n          sort: \"create_time\",\n          order: \"desc\",\n          blindTypeName: undefined,\n          sync: undefined,\n        },\n        syncOptions: [\n          {\n            value: true,\n            label: this.$t(\"blind.sync\"),\n          },\n          {\n            value: false,\n            label: this.$t(\"blind.unsync\"),\n          },\n        ],\n        dialogFormVisible: false,\n        dialogStatus: \"\",\n        error: \"\",\n        formData: {\n          address: \"\",\n          name: \"\",\n          describe: \"\",\n          owner: \"\",\n          times: [],\n          isRepetition: false,\n          amount: \"\",\n          nftAmount: \"\",\n          price: \"\",\n          paytokenId: \"\",\n          imgId: \"\",\n          imgUrl: \"\",\n          anim1: \"\",\n          anim2: \"\",\n        },\n        paytokens: [],\n        rules: {\n          address: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.emptyType\"),\n              trigger: \"blur\",\n            },\n          ],\n          name: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.emptyName\"),\n              trigger: \"blur\",\n            },\n          ],\n          owner: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.emptyOwner\"),\n              trigger: \"blur\",\n            },\n          ],\n          paytokenId: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.emptyPayToken\"),\n              trigger: \"blur\",\n            },\n          ],\n          amount: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.limitAmount\"),\n              trigger: \"blur\",\n            },\n          ],\n          nftAmount: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.emptyOpenAmount\"),\n              trigger: \"blur\",\n            },\n          ],\n          price: [\n            {\n              required: true,\n              message: this.$t(\"blind.box.limitPrice\"),\n              trigger: \"blur\",\n            },\n            {\n              validator: validatePrice,\n              trigger: \"blur\",\n            },\n          ],\n          imgUrl: {\n            required: true,\n            message: this.$t(\"blind.box.emptyPicture\"),\n            trigger: \"change\",\n          },\n          times: {\n            required: true,\n            message: this.$t(\"blind.box.emptyTimes\"),\n            trigger: \"change\",\n          },\n        },\n        pickerOptions: {\n          disabledDate (time) {\n            return time.getTime() < Date.now() - 8.64e7;\n          }\n        },\n        deleteId: \"\",\n        box: null,\n        fileImage: \"\",\n        filelist: [],\n        anim1Image: \"\",\n        anim1List: [],\n        anim2Image: \"\",\n        anim2List: [],\n        // \n        blindBoxId: \"\",\n      };\n    },\n    computed: {\n      dialogTitle () {\n        let dialogTitle = \"\";\n        switch (this.dialogStatus) {\n          case \"add\":\n            dialogTitle = this.$t(\"blind.add\");\n            break;\n          case \"edit\":\n            dialogTitle = this.$t(\"blind.edit\");\n            break;\n          case \"del\":\n            dialogTitle = this.$t(\"blind.delete\");\n            break;\n          default:\n            break;\n        }\n        return dialogTitle;\n      },\n      connected(){\n        return this.$store.state.network.connected;\n      },\n      web3(){\n        return this.$store.state.network.web3;\n      },\n      config () {\n        return this.$store.state.user.config;\n      },\n      blindTypes () {\n        return this.$store.state.user.blindTypes;\n      },\n      tableBlindType () {\n        return function (address) {\n          for (let i = 0, len = this.blindTypes.length;i < len;i++) {\n            if (this.blindTypes[i].address === address)\n              return this.blindTypes[i].name;\n          }\n        };\n      },\n      tableTime () {\n        return function (start, end) {\n          let activeDate = \"\";\n          if (start && end) {\n            let startDate = new Date(start * 1000),\n              startDate_date = startDate.toLocaleDateString(),\n              startDate_time = startDate.toTimeString().slice(0, 8),\n              endDate = new Date(end * 1000),\n              endDate_date = endDate.toLocaleDateString(),\n              endDate_time = endDate.toTimeString().slice(0, 8);\n            activeDate =\n              startDate_date +\n              \" \" +\n              startDate_time +\n              \"\" +\n              endDate_date +\n              \" \" +\n              endDate_time;\n          }\n          return activeDate;\n        };\n      },\n      payType () {\n        for (let item of this.paytokens) {\n          if (item.id === this.formData.paytokenId) {\n            return item.type;\n          }\n        }\n        return null\n      },\n      totalAmount () {\n        if (!this.formData.nftAmount || !this.formData.amount) return 0;\n        let amount = parseInt(this.formData.nftAmount * this.formData.amount)\n        return !amount ? 0 : amount;\n      },\n    },\n    created () {\n      this.init();\n    },\n    methods: {\n      connectWallet(){\n        this.$store.dispatch(\"connect\");\n      },\n      onConfirm () {\n        this.dialogFormVisible = false;\n        this.getList();\n      },\n      init(){\n        this.paytokenList();\n        this.getList();\n      },\n      paytokenList(){\n        this.$api(\"blind.paytoken.list\").then(res => {\n          if(this.$tool.checkResponse(res)){\n            this.paytokens = res.data.list;\n          }\n        });\n      },\n      getList () {\n        this.listLoading = true;\n        this.$api(\"blind.box.list\", this.listQuery)\n          .then((res) => {\n            this.list = res.data.list;\n            this.getNftList();\n            this.total = res.data.total;\n            this.listLoading = false;\n          })\n          .catch(() => {\n            this.list = [];\n            this.total = 0;\n            this.listLoading = false;\n          });\n      },\n      getNftList(){\n        var boxList = [];\n        for(var i = 0; i < this.list.length; i++){\n          boxList.push(this.list[i].id);\n        }\n        boxList = boxList.join(\",\");\n        this.$api(\"blind.box.nftsbymulti\",  { boxList }).then(res => {\n          if(this.$tool.checkResponse(res)){\n            var nfts = res.data.list;\n            var amountDict = {};\n            for(var i = 0; i < nfts.length; i++){\n              var nft = nfts[i];\n              if(!amountDict[nft.blindBoxId]) amountDict[nft.blindBoxId] = 0;\n              amountDict[nft.blindBoxId] += nft.amount;\n            }\n            for(var i = 0; i < this.list.length; i++){\n              var usedAmount = amountDict[this.list[i].id];\n              this.list[i].usedAmount = usedAmount ? usedAmount : 0;\n            }\n            this.list = [].concat(this.list);\n          }\n        });\n      },\n      checkForm () {\n        let error = false;\n        let amount = parseInt(this.formData.amount);\n        if (!amount || amount < 1) {\n          this.error = this.$t('blind.box.limitAmount')\n          error = true;\n        }\n        let nftAmount = parseInt(this.formData.nftAmount);\n        if (!nftAmount || nftAmount < 1) {\n          this.error = this.$t('blind.box.limitOpenAmount')\n          error = true;\n        }\n        let price = parseFloat(this.formData.price);\n        if (!price || price < 0) {\n          this.error = this.$t('blind.box.limitPrice')\n          error = true;\n        }\n        if (!this.fileImage && !this.formData.imgId) {\n          this.error = this.$t('blind.box.emptyCover')\n          error = true;\n        }\n        return !error;\n      },\n      addBox (data) {\n        let {\n          address,\n          name,\n          describe,\n          owner,\n          times,\n          isRepetition,\n          amount,\n          nftAmount,\n          price,\n          paytokenId,\n          imgId,\n          imgUrl,\n          anim1,\n          anim2,\n        } = this.formData;\n        let startTime = !times[0] ? 0\n          : parseInt(new Date(times[0]).getTime() / 1000);\n        let endTime = !times[1] ? 0\n          : parseInt(new Date(times[1]).getTime() / 1000);\n        if (data.cover) {\n          imgId = data.cover.id;\n          imgUrl = data.cover.url;\n        }\n        if (data.anim1) anim1 = data.anim1.url;\n\n        if (data.anim2) anim2 = data.anim2.url;\n\n        let sendData = {\n          address,\n          name,\n          describe,\n          owner,\n          startTime,\n          endTime,\n          isRepetition,\n          amount,\n          nftAmount,\n          price,\n          paytokenId,\n          imgId,\n          imgUrl,\n          anim1,\n          anim2,\n        };\n        this.apiLoading = true;\n        this.$api(\"blind.box.add\", sendData)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.successCallback();\n              this.getList();\n            }\n          })\n          .catch((err) => {\n            this.failCallback(err);\n          });\n      },\n      editBox (data) {\n        let { times, imgId, imgUrl, anim1, anim2 } = this.formData;\n        let startTime = !times[0] ? 0\n          : parseInt(new Date(times[0]).getTime() / 1000);\n        let endTime = !times[1] ? 0\n          : parseInt(new Date(times[1]).getTime() / 1000);\n        if (data.cover) {\n          imgId = data.cover.id;\n          imgUrl = data.cover.url;\n        }\n        if (data.anim1) {\n          anim1 = data.anim1.url;\n        }\n        if (data.anim2) {\n          anim2 = data.anim2.url;\n        }\n\n        let sendData = {\n          id: this.formData.id,\n          address: this.formData.address,\n          name: this.formData.name,\n          describe: this.formData.describe,\n          owner: this.formData.owner,\n          isRepetition: this.formData.isRepetition,\n          amount: this.formData.amount,\n          nftAmount: this.formData.nftAmount,\n          price: this.formData.price,\n          paytokenId: this.formData.paytokenId,\n          startTime,\n          endTime,\n          imgId,\n          imgUrl,\n          anim1,\n          anim2,\n        };\n        this.apiLoading = true;\n        this.$api(\"blind.box.edit\", sendData)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.successCallback();\n              this.getList();\n            }\n          })\n          .catch((err) => {\n            this.failCallback(err);\n          });\n      },\n      delBox () {\n        this.apiLoading = true;\n        this.$api(\"blind.box.deleted\", { id: this.deleteId })\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.successCallback();\n              let { page, limit } = this.listQuery;\n              if (page > 1 && this.total - 1 - (page - 1) * limit <= 0) {\n                this.listQuery.page -= 1;\n              }\n              this.total -= 1;\n              this.getList();\n            }\n          })\n          .catch((err) => {\n            this.failCallback(err);\n          });\n      },\n      prepareSign(){\n        this.apiLoading = true;\n        var _this = this;\n        this.$api(\"blind.box.prepare\", {\n          id: this.blindBoxId,\n          owner: this.web3.coinbase,\n        }).then(async function(res){\n          _this.apiLoading = false;\n          if(_this.$tool.checkResponse(res)){\n            var order = res.data;\n            var message = order.message;\n            message = message.replace(\"0x\", \"\");\n            var result = await web3.sign(message, _this.web3.coinbase);\n            if(result.error){\n              _this.error = result.error;\n            }\n            order.signature = result;\n            _this.signData(order);\n          }\n        });\n      },\n      signData (order) {\n        this.apiLoading = true;\n        this.$api(\"blind.box.sign\", order).then((res) => {\n          this.apiLoading = false;\n          if (this.$tool.checkResponse(res)) {\n            this.successCallback();\n            this.getList();\n          }\n        }).catch((err) => {\n          this.failCallback(err);\n        });\n      },\n      successCallback () {\n        this.$notify.success({\n          title: this.$t(\"blind.success\"),\n          message: this.$t(\"blind.messageSuccess\"),\n        });\n        this.handlerCancel();\n      },\n      failCallback (err, msg) {\n        this.apiLoading = false;\n        this.$notify.error({\n          title: this.$t(\"blind.fail\"),\n          message: err\n            ? (!msg ? this.$t(\"response.\" + err.data ? err.data.errno : \"\") : msg)\n            : this.$t(\"blind.messageFail\"),\n        });\n        if (this.dialogStatus == \"del\" || this.dialogStatus == \"sign\") {\n          this.handlerCancel();\n        }\n      },\n      callbackCloseDialog () {\n        this.resetForm();\n        this.$nextTick(function () {\n          this.$refs[\"formData\"] ? this.$refs[\"formData\"].clearValidate() : \"\";\n        });\n\n        this.dialogStatus = \"\";\n        this.error = \"\";\n      },\n      uploadChange (file, name) {\n        var event = event || window.event;\n        var files = event.target.files[0];\n        var reader = new FileReader();\n        var _this = this;\n        switch (name) {\n          case \"cover\":\n            this.filelist = [];\n            this.fileImage = file.raw;\n            reader.onload = function (e) {\n              _this.formData.imgUrl = e.target.result;\n            };\n            break;\n          case \"open\":\n            this.anim1List = [];\n            this.anim1Image = file.raw;\n            reader.onload = function (e) {\n              _this.formData.anim1 = e.target.result;\n            };\n            break;\n          case \"opened\":\n            this.anim2List = [];\n            this.anim2Image = file.raw;\n            reader.onload = function (e) {\n              _this.formData.anim2 = e.target.result;\n            };\n            break;\n        }\n        reader.readAsDataURL(files);\n      },\n      resetForm () {\n        this.formData = {\n          address: \"\",\n          name: \"\",\n          describe: \"\",\n          times: [],\n          isRepetition: false,\n          amount: \"\",\n          nftAmount: \"\",\n          price: \"\",\n          paytokenId: \"\",\n          imgId: \"\",\n          imgUrl: \"\",\n          anim1: \"\",\n          anim2: \"\",\n        };\n        this.fileImage = \"\";\n        this.anim1Image = \"\";\n        this.anim2Image = \"\";\n        this.error = \"\";\n      },\n      handlerBtn (btnType, row = {}) {\n        switch (btnType) {\n          case \"add\":\n            this.$nextTick(function () {\n              this.$refs[\"formData\"]\n                ? this.$refs[\"formData\"].clearValidate()\n                : \"\";\n            });\n            break;\n          case \"edit\":\n            this.fileImage = \"\";\n            this.anim1Image = \"\";\n            this.anim2Image = \"\";\n            this.formData = Object.assign({}, row);\n            let startTime = !this.formData.startTime\n              ? \"\"\n              : new Date(this.formData.startTime * 1000);\n            let endTime = !this.formData.endTime\n              ? \"\"\n              : new Date(this.formData.endTime * 1000);\n            this.$set(this.formData, \"times\", [startTime, endTime]);\n            this.$nextTick(function () {\n              this.$refs[\"formData\"]\n                ? this.$refs[\"formData\"].clearValidate()\n                : \"\";\n            });\n            break;\n          case \"del\":\n            this.deleteId = row.id;\n            break;\n          case \"sign\":\n            this.blindBoxId = row.id;\n            break;\n          case \"set\":\n            this.box = row;\n            break;\n        }\n        this.dialogFormVisible = true;\n        this.dialogStatus = btnType;\n      },\n      async handlerConfirm () {\n        if (this.apiLoading) return;\n\n        switch (this.dialogStatus) {\n          case \"add\":\n            if (!this.checkForm()) return;\n            var data = {};\n            if (this.fileImage) {\n              var result = await this.uploadStorage(this.fileImage);\n              data.cover = result;\n            }\n            if (this.anim1Image) {\n              var result = await this.uploadStorage(this.anim1Image);\n              data.anim1 = result;\n            }\n            if (this.anim2Image) {\n              var result = await this.uploadStorage(this.anim2Image);\n              data.anim2 = result;\n            }\n            this.addBox(data);\n            break;\n          case \"edit\":\n            if (!this.checkForm()) return;\n            var data = {};\n            if (this.fileImage) {\n              var result = await this.uploadStorage(this.fileImage);\n              data.cover = result;\n            }\n            if (this.anim1Image) {\n              var result = await this.uploadStorage(this.anim1Image);\n              data.anim1 = result;\n            }\n            if (this.anim2Image) {\n              var result = await this.uploadStorage(this.anim2Image);\n              data.anim2 = result;\n            }\n            this.editBox(data);\n            break;\n          case \"del\":\n            this.delBox();\n            break;\n          case \"sign\":\n            this.signData();\n            break;\n          case \"set\":\n            this.$nextTick(() => {\n              if (this.$refs.comSet) {\n                this.$refs.comSet.addBox();\n              }\n            });\n            break;\n        }\n      },\n      handlerCancel () {\n        this.dialogFormVisible = false;\n      },\n      async uploadStorage (file) {\n        return new Promise((resolve, reject) => {\n          const formData = new FormData();\n          formData.append(\"file\", file);\n          var that = this;\n          this.$api(\"storage.create\", formData)\n            .then((res) => {\n              if (this.$tool.checkResponse(res)) {\n                resolve(res.data);\n              } else {\n                reject(res);\n              }\n            }).catch((err) => {\n              reject(err);\n            });\n        });\n      },\n      handlerFilter () {\n        this.listQuery.page = 1;\n        this.getList();\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #20a0ff;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n  }\n  .avatar {\n    width: 145px;\n    height: 145px;\n    display: block;\n  }\n\n  .property-group {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 15px;\n    .property {\n      flex: 1;\n    }\n    .left {\n      padding-right: 40px;\n    }\n  }\n  .form-tip {\n    font-weight: bold;\n    padding: 0 0 10px 120px;\n  }\n</style>\n"]}]}