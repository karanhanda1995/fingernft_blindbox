{"remainingRequest":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBoxSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBoxSet.vue","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\babel.config.js","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1652081856293},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1652081880134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2LnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzovVXNlcnMvOTcxNTQvRGVza3RvcC9TT05HVFJBREVSLVYyLUZVTEwvZmluZ2VybmZ0X2JsaW5kYm94L2Zpbmdlcm5mdF9ibGluZGJveC92dWUtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE1lZGlhIGZyb20gIkAvY29tcG9uZW50cy9NZWRpYSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibmZ0U2V0IiwKICBjb21wb25lbnRzOiB7CiAgICBNZWRpYTogTWVkaWEKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWI6ICJuZnRzIiwKICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgIGxpc3Q6IFtdLAogICAgICBuZnRzTG9hZGluZzogdHJ1ZSwKICAgICAgbmZ0czogW10sCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwKICAgICAgYXBpTG9hZGluZzogZmFsc2UsCiAgICAgIGVycm9yOiAiIiwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICAgIHN0b3JhZ2VJZDogIiIsCiAgICAgICAgaW1nVXJsOiAiIiwKICAgICAgICBhbmltU3RvcmFnZUlkOiAiIiwKICAgICAgICBhbmltVXJsOiAiIiwKICAgICAgICBhbmltVHlwZTogIiIsCiAgICAgICAgcHJvcGVydGllczogW3sKICAgICAgICAgIGtleTogIiIsCiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9XQogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgiYmxpbmQubmZ0LmVtcHR5VHlwZSIpLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9LAogICAgICAgIGltZ1VybDogewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5uZnQuZW1wdHlQaWN0dXJlIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZpbGVJbWFnZTogIiIsCiAgICAgIGZpbGVWaWRlbzogIiIsCiAgICAgIGZpbGVMaXN0SW1hZ2U6IFtdLAogICAgICBmaWxlTGlzdFZpZGVvOiBbXQogICAgfTsKICB9LAogIHByb3BzOiBbImJveCJdLAogIGNvbXB1dGVkOiB7CiAgICB1c2VBbW91bnQ6IGZ1bmN0aW9uIHVzZUFtb3VudCgpIHsKICAgICAgdmFyIGFtb3VudCA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubmZ0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBfYW1vdW50ID0gcGFyc2VJbnQodGhpcy5uZnRzW2ldLmFtb3VudCk7CgogICAgICAgIGFtb3VudCArPSAhX2Ftb3VudCA/IDAgOiBfYW1vdW50OwogICAgICB9CgogICAgICByZXR1cm4gYW1vdW50OwogICAgfSwKICAgIHJlcGVhdFRpcDogZnVuY3Rpb24gcmVwZWF0VGlwKCkgewogICAgICBpZiAodGhpcy5ib3guaXNSZXBldGl0aW9uKSByZXR1cm47CiAgICAgIHZhciBtYXggPSAwOwogICAgICB2YXIgdHlwZUFtb3VudCA9IHRoaXMubmZ0cy5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubmZ0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBfYW1vdW50ID0gcGFyc2VJbnQodGhpcy5uZnRzW2ldLmFtb3VudCk7CgogICAgICAgIG1heCA9IF9hbW91bnQgJiYgX2Ftb3VudCA+IG1heCA/IF9hbW91bnQgOiBtYXg7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgbWF4OiBtYXggPD0gcGFyc2VJbnQodGhpcy5ib3guYW1vdW50KSwKICAgICAgICB0eXBlQW1vdW50OiB0eXBlQW1vdW50ID49IHBhcnNlSW50KHRoaXMuYm94Lm5mdEFtb3VudCkKICAgICAgfTsKICAgIH0sCiAgICBibGluZFR5cGVzOiBmdW5jdGlvbiBibGluZFR5cGVzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ibGluZFR5cGVzOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TmZ0cygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvYmFiaWxpdHk6IGZ1bmN0aW9uIGdldFByb2JhYmlsaXR5KG5mdCkgewogICAgICB2YXIgYW1vdW50ID0gcGFyc2VJbnQobmZ0LmFtb3VudCk7CiAgICAgIGlmICghYW1vdW50KSByZXR1cm4gMDsKCiAgICAgIGlmICghdGhpcy5ib3guaXNSZXBldGl0aW9uKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHRvb2wuZGVjaW1hbChhbW91bnQgKiAxMDAgLyB0aGlzLmJveC5hbW91bnQsIDIpOwogICAgICB9CgogICAgICB2YXIgdG90YWxBbW91bnQgPSB0aGlzLmJveC5hbW91bnQgKiB0aGlzLmJveC5uZnRBbW91bnQ7CiAgICAgIHZhciBwcm9iYWJpbGl0eSA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYm94Lm5mdEFtb3VudDsgaSsrKSB7CiAgICAgICAgaWYgKCFwcm9iYWJpbGl0eSkgewogICAgICAgICAgcHJvYmFiaWxpdHkgPSAodG90YWxBbW91bnQgLSBhbW91bnQgLSBpKSAvIHRvdGFsQW1vdW50OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9iYWJpbGl0eSA9IHByb2JhYmlsaXR5ICogKHRvdGFsQW1vdW50IC0gYW1vdW50IC0gaSkgLyB0b3RhbEFtb3VudDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiR0b29sLmRlY2ltYWwoKDEgLSBwcm9iYWJpbGl0eSkgKiAxMDAsIDIpOwogICAgfSwKICAgIG9uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoc2NvcGUsIGUpIHsKICAgICAgdGhpcy5uZnRzID0gW10uY29uY2F0KHRoaXMubmZ0cyk7CiAgICB9LAogICAgZ2V0TmZ0czogZnVuY3Rpb24gZ2V0TmZ0cygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLm5mdHNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpKCJibGluZC5ib3gubmZ0cyIsIHsKICAgICAgICBibGluZEJveElkOiB0aGlzLmJveC5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMyLiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBuZnQgPSByZXMuZGF0YS5saXN0W2ldOwogICAgICAgICAgICBuZnQubWV0YWRhdGFDb250ZW50ID0gSlNPTi5wYXJzZShuZnQubWV0YWRhdGFDb250ZW50KTsKCiAgICAgICAgICAgIF90aGlzMi5uZnRzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgbmZ0KSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpczIubmZ0c0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5uZnRzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRhcGkoImJsaW5kLm5mdC5hbGwiLCB7CiAgICAgICAgYWRkcmVzczogdGhpcy5ib3guYWRkcmVzcwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMzLiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgX3RoaXMzLmZvcm1hdERhdGEocmVzLmRhdGEubGlzdCk7CgogICAgICAgICAgX3RoaXMzLmxpc3QgPSByZXMuZGF0YS5saXN0OwoKICAgICAgICAgIF90aGlzMy5jaGVja1NlbGVjdGVkKCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzMy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0Zvcm06IGZ1bmN0aW9uIGNoZWNrRm9ybSgpIHsKICAgICAgdmFyIGVycm9yID0gZmFsc2U7CiAgICAgIHZhciB0b3RhbCA9IHRoaXMuYm94LmFtb3VudCAqIHRoaXMuYm94Lm5mdEFtb3VudDsKCiAgICAgIGlmICh0b3RhbCA8IHRoaXMudXNlQW1vdW50KSB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuJHQoJ2JsaW5kLmJveC5saW1pdFRvdGFsQW1vdW50JykgKyB0b3RhbDsKICAgICAgICBlcnJvciA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5ib3guaXNSZXBldGl0aW9uICYmICF0aGlzLnJlcGVhdFRpcC5tYXgpIHsKICAgICAgICB0aGlzLmVycm9yID0gdGhpcy4kdCgnYmxpbmQuYm94LmxpbWl0TWF4QW1vdW50JykgKyB0aGlzLmJveC5hbW91bnQ7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gIWVycm9yOwogICAgfSwKICAgIGFkZERhdGE6IGZ1bmN0aW9uIGFkZERhdGEoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmNoZWNrRm9ybSgpKSByZXR1cm47CiAgICAgIGlmICh0aGlzLmFwaUxvYWRpbmcpIHJldHVybjsKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIG5mdHMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5uZnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG5mdCA9IHRoaXMubmZ0c1tpXTsKICAgICAgICBuZnRzLnB1c2goX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBibGluZE5mdElkOiB0aGlzLm5mdHNbaV0uaWQsCiAgICAgICAgICBhbW91bnQ6IHRoaXMubmZ0c1tpXS5hbW91bnQsCiAgICAgICAgICBibGluZEJveElkOiB0aGlzLmJveC5pZAogICAgICAgIH0sIG5mdCkpOwogICAgICB9CgogICAgICBuZnRzID0gSlNPTi5zdHJpbmdpZnkobmZ0cyk7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGJsaW5kQm94SWQ6IHRoaXMuYm94LmlkLAogICAgICAgIG5mdHM6IG5mdHMKICAgICAgfTsKICAgICAgdGhpcy4kYXBpKCJibGluZC5ib3guYWRkTmZ0cyIsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNC5hcGlMb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChfdGhpczQuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICBfdGhpczQuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6IF90aGlzNC4kdCgiYmxpbmQuc3VjY2VzcyIpLAogICAgICAgICAgICBtZXNzYWdlOiBfdGhpczQuJHQoImJsaW5kLm1lc3NhZ2VTdWNjZXNzIikKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzNC4kZW1pdCgiY29uZmlybSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzNC5hcGlMb2FkaW5nID0gZmFsc2U7CgogICAgICAgIF90aGlzNC4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgIHRpdGxlOiBfdGhpczQuJHQoImJsaW5kLmZhaWwiKSwKICAgICAgICAgIG1lc3NhZ2U6IF90aGlzNC4kdCgicmVzcG9uc2UuIiArIGVyci5kYXRhID8gZXJyLmRhdGEuZXJybm8gOiAiIikKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ29OZnRzOiBmdW5jdGlvbiBnb05mdHMoKSB7CiAgICAgIHRoaXMudGFiID0gIm5mdHMiOwogICAgfSwKICAgIGdvQ29uZmlnOiBmdW5jdGlvbiBnb0NvbmZpZygpIHsKICAgICAgdGhpcy5lcnJvciA9ICIiOwogICAgICB0aGlzLnRhYiA9ICJjb25maWciOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgIH0sCiAgICBzZWxORlRzOiBmdW5jdGlvbiBzZWxORlRzKCkgewogICAgICB0aGlzLm5mdHMgPSB0aGlzLm11bHRpcGxlU2VsZWN0aW9uOwogICAgICB2YXIgbmZ0cyA9IFtdOwogICAgICBjb25zb2xlLmxvZygidGhpcy5uZnRzIiwgdGhpcy5uZnRzKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5uZnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc29sZS5sb2coImkiLCBpKTsKICAgICAgICB2YXIgbmZ0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5uZnRzW2ldKTsKICAgICAgICBuZnQuYW1vdW50ID0gMTsKICAgICAgICBuZnRzLnB1c2gobmZ0KTsKICAgICAgfQoKICAgICAgdGhpcy5uZnRzID0gbmZ0czsKICAgICAgdGhpcy5nb05mdHMoKTsKICAgIH0sCiAgICBkZWxORlQ6IGZ1bmN0aW9uIGRlbE5GVChpbmRleCkgewogICAgICB0aGlzLm5mdHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5uZnRzID0gW10uY29uY2F0KHRoaXMubmZ0cyk7CiAgICB9LAogICAgb25PcGVuOiBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgIHRoaXMuZm9ybURhdGEgPSB7CiAgICAgICAgYWRkcmVzczogdGhpcy5ib3guYWRkcmVzcywKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgaW1nVXJsOiAiIiwKICAgICAgICBzdG9yYWdlSWQ6ICIiLAogICAgICAgIGFuaW1Vcmw6ICIiLAogICAgICAgIGFuaW1TdG9yYWdlSWQ6ICIiLAogICAgICAgIHByb3BlcnRpZXM6IFt7CiAgICAgICAgICBrZXk6ICIiLAogICAgICAgICAgdmFsdWU6ICIiCiAgICAgICAgfV0KICAgICAgfTsKICAgICAgdGhpcy5maWxlSW1hZ2UgPSAiIjsKICAgICAgdGhpcy5maWxlVmlkZW8gPSAiIjsKICAgIH0sCiAgICBmb3JtYXREYXRhOiBmdW5jdGlvbiBmb3JtYXREYXRhKGRhdGEpIHsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBkYXRhW2ldLm1ldGFkYXRhQ29udGVudCA9IEpTT04ucGFyc2UoZGF0YVtpXS5tZXRhZGF0YUNvbnRlbnQpOwogICAgICB9CiAgICB9LAogICAgY2hlY2tTZWxlY3RlZDogZnVuY3Rpb24gY2hlY2tTZWxlY3RlZCgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcm93ID0gdGhpcy5saXN0W2ldOwoKICAgICAgICAgIGlmICghdGhpcy5leGlzdHNORlQocm93LmlkKSkgewogICAgICAgICAgICB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgZmFsc2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZXhpc3RzTkZUOiBmdW5jdGlvbiBleGlzdHNORlQoaWQpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5mdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbmZ0ID0gdGhpcy5uZnRzW2ldOwogICAgICAgIGlmIChuZnQuYmxpbmROZnRJZCA9PSBpZCkgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBwcm9wZXJ0eUlucHV0OiBmdW5jdGlvbiBwcm9wZXJ0eUlucHV0KGUpIHsKICAgICAgdmFyIGVtcHR5QyA9IDA7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZm9ybURhdGEucHJvcGVydGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwcm9wZXJ0eSA9IHRoaXMuZm9ybURhdGEucHJvcGVydGllc1tpXTsKICAgICAgICBpZiAoIXByb3BlcnR5LmtleSB8fCAhcHJvcGVydHkudmFsdWUpIGVtcHR5QyArPSAxOwogICAgICB9CgogICAgICBpZiAoZW1wdHlDICE9IDEpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXMgPSB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXMuZmlsdGVyKGZ1bmN0aW9uIChwcm9wZXJ0eSkgewogICAgICAgICAgcmV0dXJuIHByb3BlcnR5LmtleSB8fCBwcm9wZXJ0eS52YWx1ZTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXMucHVzaCh7CiAgICAgICAgICBrZXk6ICIiLAogICAgICAgICAgdmFsdWU6ICIiCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybURhdGEpKTsKICAgIH0sCiAgICBmdWxsUHJvcGVydGllczogZnVuY3Rpb24gZnVsbFByb3BlcnRpZXMocHJvcGVydGllcykgewogICAgICB2YXIgX3Byb3BlcnRpZXMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBwcm9wZXJ0aWVzW2ldLmtleS50cmltKCk7CiAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1tpXS52YWx1ZS50cmltKCk7CiAgICAgICAgaWYgKCFrZXkgfHwgIXZhbHVlKSBjb250aW51ZTsKICAgICAgICB2YXIgdHJhaXRfdHlwZSA9IGtleTsKCiAgICAgICAgX3Byb3BlcnRpZXMucHVzaCh7CiAgICAgICAgICBrZXk6IGtleSwKICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgIHRyYWl0X3R5cGU6IHRyYWl0X3R5cGUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9wcm9wZXJ0aWVzOwogICAgfSwKICAgIHVwbG9hZENoYW5nZTogZnVuY3Rpb24gdXBsb2FkQ2hhbmdlKGZpbGVzLCB1cGxvYWRUeXBlKSB7CiAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkSW1hZ2UiKSB7CiAgICAgICAgdGhpcy5maWxlTGlzdEltYWdlID0gW107CiAgICAgICAgdGhpcy5maWxlSW1hZ2UgPSBmaWxlcy5yYXc7CiAgICAgIH0KCiAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkVmlkZW8iKSB7CiAgICAgICAgdGhpcy5maWxlTGlzdFZpZGVvID0gW107CiAgICAgICAgdGhpcy5maWxlVmlkZW8gPSBmaWxlcy5yYXc7CiAgICAgIH0KCiAgICAgIHZhciBldmVudCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDsKICAgICAgdmFyIGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkSW1hZ2UiKSB7CiAgICAgICAgICBfdGhpcy5mb3JtRGF0YS5pbWdVcmwgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBpZiAodXBsb2FkVHlwZSA9PT0gInVwbG9hZFZpZGVvIikgewogICAgICAgICAgX3RoaXMuZm9ybURhdGEuYW5pbVVybCA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgIF90aGlzLmZvcm1EYXRhLmFuaW1UeXBlID0gZmlsZS50eXBlOwogICAgICAgICAgY29uc29sZS5sb2coImFuaW1UeXBlIiwgZmlsZS50eXBlKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgIH0sCiAgICBoYW5kbGVyVXBsb2FkSW1hZ2U6IGZ1bmN0aW9uIGhhbmRsZXJVcGxvYWRJbWFnZSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZSIsIF90aGlzNS5maWxlSW1hZ2UpOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmxhZyIsICJpcGZzIik7CgogICAgICAgIF90aGlzNS4kYXBpKCJzdG9yYWdlLmNyZWF0ZSIsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChfdGhpczUuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHJlcyk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZXJVcGxvYWRWaWRlbzogZnVuY3Rpb24gaGFuZGxlclVwbG9hZFZpZGVvKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlcyIsIF90aGlzNi5maWxlVmlkZW8pOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZXMiLCBfdGhpczYuZmlsZUltYWdlKTsKCiAgICAgICAgX3RoaXM2LiRhcGkoInN0b3JhZ2UubXVsdGl1cGxvYWQiLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoX3RoaXM2LiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRGb3JtOiBmdW5jdGlvbiBhZGRGb3JtKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbImZvcm1EYXRhIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkICYmICFfdGhpczcuYXBpTG9hZGluZykgewogICAgICAgICAgX3RoaXM3LmFwaUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgdmFyIHByb21pc2VBcnIgPSBbXTsKCiAgICAgICAgICBpZiAoX3RoaXM3LmZpbGVWaWRlbykgewogICAgICAgICAgICBwcm9taXNlQXJyID0gW190aGlzNy5oYW5kbGVyVXBsb2FkVmlkZW8oKV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9taXNlQXJyID0gW190aGlzNy5oYW5kbGVyVXBsb2FkSW1hZ2UoKV07CiAgICAgICAgICB9CgogICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZUFycikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzNy5hZGRORlQocmVzKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgX3RoaXM3LmZhaWxDYWxsYmFjaygpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRORlQ6IGZ1bmN0aW9uIGFkZE5GVChmaWxlRGF0YSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyRmb3JtRGF0YSA9IHRoaXMuZm9ybURhdGEsCiAgICAgICAgICBhZGRyZXNzID0gX3RoaXMkZm9ybURhdGEuYWRkcmVzcywKICAgICAgICAgIG5hbWUgPSBfdGhpcyRmb3JtRGF0YS5uYW1lLAogICAgICAgICAgZGVzY3JpcHRpb24gPSBfdGhpcyRmb3JtRGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICAgIHN0b3JhZ2VJZCA9IF90aGlzJGZvcm1EYXRhLnN0b3JhZ2VJZCwKICAgICAgICAgIGltZ1VybCA9IF90aGlzJGZvcm1EYXRhLmltZ1VybCwKICAgICAgICAgIGFuaW1TdG9yYWdlSWQgPSBfdGhpcyRmb3JtRGF0YS5hbmltU3RvcmFnZUlkLAogICAgICAgICAgYW5pbVVybCA9IF90aGlzJGZvcm1EYXRhLmFuaW1VcmwsCiAgICAgICAgICBwcm9wZXJ0aWVzID0gX3RoaXMkZm9ybURhdGEucHJvcGVydGllczsKCiAgICAgIGlmIChmaWxlRGF0YSkgewogICAgICAgIHN0b3JhZ2VJZCA9IHRoaXMuZmlsZVZpZGVvID8gZmlsZURhdGFbMF1bMV0uaWQgOiBmaWxlRGF0YVswXS5pZDsKICAgICAgICBpbWdVcmwgPSB0aGlzLmZpbGVWaWRlbyA/IGZpbGVEYXRhWzBdWzFdLmlwZnNoYXNoIDogZmlsZURhdGFbMF0uaXBmc2hhc2g7CiAgICAgICAgYW5pbVN0b3JhZ2VJZCA9IHRoaXMuZmlsZVZpZGVvID8gZmlsZURhdGFbMF1bMF0uaWQgOiAiIjsKICAgICAgICBhbmltVXJsID0gdGhpcy5maWxlVmlkZW8gPyBmaWxlRGF0YVswXVswXS5pcGZzaGFzaCA6ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JhZ2VJZCA9IGltZ1VybCA9IGFuaW1TdG9yYWdlSWQgPSBhbmltVXJsID0gIiI7CiAgICAgIH0KCiAgICAgIHZhciBwcm9wZXJ0eXMgPSB0aGlzLmZ1bGxQcm9wZXJ0aWVzKHByb3BlcnRpZXMpOwogICAgICBwcm9wZXJ0eXMgPSBKU09OLnN0cmluZ2lmeShwcm9wZXJ0eXMpOwogICAgICB2YXIgc2VuZERhdGEgPSB7CiAgICAgICAgYWRkcmVzczogYWRkcmVzcywKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiwKICAgICAgICB0eXBlOiA1LAogICAgICAgIHN0b3JhZ2VJZDogc3RvcmFnZUlkLAogICAgICAgIGltZ1VybDogaW1nVXJsLAogICAgICAgIGFuaW1TdG9yYWdlSWQ6IGFuaW1TdG9yYWdlSWQsCiAgICAgICAgYW5pbVVybDogYW5pbVVybCwKICAgICAgICBwcm9wZXJ0eXM6IHByb3BlcnR5cwogICAgICB9OwogICAgICB0aGlzLiRhcGkoImJsaW5kLm5mdC5hZGQiLCBzZW5kRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM4LmFwaUxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzOC4kdG9vbC5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgIF90aGlzOC4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogX3RoaXM4LiR0KCJibGluZC5zdWNjZXNzIiksCiAgICAgICAgICAgIG1lc3NhZ2U6IF90aGlzOC4kdCgiYmxpbmQubWVzc2FnZVN1Y2Nlc3MiKQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXM4LmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczguZ2V0TGlzdCgpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzOC5mYWlsQ2FsbGJhY2soZXJyKTsKICAgICAgfSk7CiAgICB9LAogICAgZmFpbENhbGxiYWNrOiBmdW5jdGlvbiBmYWlsQ2FsbGJhY2soZXJyKSB7CiAgICAgIHRoaXMuYXBpTG9hZGluZyA9IGZhbHNlOwogICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgIHRpdGxlOiB0aGlzLiR0KCJibGluZC5mYWlsIiksCiAgICAgICAgbWVzc2FnZTogZXJyID8gdGhpcy4kdCgicmVzcG9uc2UuIiArIGVyci5kYXRhID8gZXJyLmRhdGEuZXJybm8gOiAiIikgOiB0aGlzLiR0KCJibGluZC5tZXNzYWdlRmFpbCIpCiAgICAgIH0pOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;EACAA,cADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC,IAHA,kBAGA;IACA;MACAC,WADA;MAEAC,iBAFA;MAGAC,QAHA;MAIAC,iBAJA;MAKAC,QALA;MAMAC,qBANA;MAOAC,iBAPA;MAQAC,SARA;MASAC,oBATA;MAUAC;QACAC,WADA;QAEAd,QAFA;QAGAe,eAHA;QAIAC,aAJA;QAKAC,UALA;QAMAC,iBANA;QAOAC,WAPA;QAQAC,YARA;QASAC;UAAAC;UAAAC;QAAA;MATA,CAVA;MAqBAC;QACAV;UACAW,cADA;UAEAC,uCAFA;UAGAC;QAHA,CADA;QAMAV;UACAQ,cADA;UAEAC,0CAFA;UAGAC;QAHA;MANA,CArBA;MAiCAC,aAjCA;MAkCAC,aAlCA;MAmCAC,iBAnCA;MAoCAC;IApCA;EAsCA,CA1CA;EA2CAC,cA3CA;EA4CAC;IACAC,SADA,uBACA;MACA;;MACA;QACA;;QACAC;MACA;;MACA;IACA,CARA;IASAC,SATA,uBASA;MACA;MACA;MACA;;MACA;QACA;;QACAC;MACA;;MACA;QACAA,qCADA;QAEAC;MAFA;IAIA,CArBA;IAsBAC,UAtBA,wBAsBA;MACA;IACA;EAxBA,CA5CA;EAsEAC,OAtEA,qBAsEA;IACA;EACA,CAxEA;EAyEAC;IACAC,cADA,0BACAC,GADA,EACA;MACA;MACA;;MACA;QACA;MACA;;MACA;MACA;;MACA;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA;MACA;;MACA;IACA,CAjBA;IAkBAC,OAlBA,mBAkBAC,KAlBA,EAkBAC,CAlBA,EAkBA;MACA;IACA,CApBA;IAqBAC,OArBA,qBAqBA;MAAA;;MACA;MACA;QAAAC;MAAA,GACAC,IADA,CACA;QACA;UACA;YACA;YACAP,iCACAA,mBADA;;YAGA;UACA;QACA;;QACA;MACA,CAZA,EAaAQ,KAbA,CAaA;QACA;MACA,CAfA;IAgBA,CAvCA;IAwCAC,OAxCA,qBAwCA;MAAA;;MACA;MACA;QAAAtC;MAAA,GACAoC,IADA,CACA;QACA;UACA;;UACA;;UACA;QACA;;QACA;MACA,CARA,EASAC,KATA,CASA;QACA;MACA,CAXA;IAYA,CAtDA;IAuDAE,SAvDA,uBAuDA;MACA;MACA;;MACA;QACA;QACA1C;MACA;;MACA;QACA;QACAA;MACA;;MAEA;IACA,CApEA;IAqEA2C,OArEA,qBAqEA;MAAA;;MACA;MAEA;MACA;MAEA;;MACA;QACA;QACA9C;UACA+C,2BADA;UAEApB,2BAFA;UAGAc;QAHA,GAIAN,GAJA;MAMA;;MACAnC;MACA;QACAyC,uBADA;QAEAzC;MAFA;MAIA,qCACA0C,IADA,CACA;QACA;;QACA;UACA;YACAM,iCADA;YAEA9B;UAFA;;UAIA;QACA;MACA,CAVA,EAWAyB,KAXA,CAWA;QACA;;QACA;UACAK,8BADA;UAEA9B;QAFA;MAIA,CAjBA;IAkBA,CA5GA;IA6GA+B,MA7GA,oBA6GA;MACA;IACA,CA/GA;IAgHAC,QAhHA,sBAgHA;MACA;MACA;MACA;IACA,CApHA;IAqHAC,qBArHA,iCAqHAC,GArHA,EAqHA;MACA;IACA,CAvHA;IAwHAC,OAxHA,qBAwHA;MACA;MACA;MACAC;;MACA;QACAA;QACA;QACAnB;QACAnC;MACA;;MACA;MACA;IACA,CApIA;IAqIAuD,MArIA,kBAqIAC,KArIA,EAqIA;MACA;MACA;IACA,CAxIA;IAyIAC,MAzIA,oBAyIA;MACA;QACAnD,yBADA;QAEAd,QAFA;QAGAe,eAHA;QAIAE,UAJA;QAKAD,aALA;QAMAG,WANA;QAOAD,iBAPA;QAQAG;UAAAC;UAAAC;QAAA;MARA;MAUA;MACA;IACA,CAtJA;IAuJA2C,UAvJA,sBAuJA/D,IAvJA,EAuJA;MACA;QACAA;MACA;IACA,CA3JA;IA4JAgE,aA5JA,2BA4JA;MACA;QACA;UACA;;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA;MACA,CATA;IAUA,CAvKA;IAwKAC,SAxKA,qBAwKAC,EAxKA,EAwKA;MACA;QACA;QACA;MACA;;MACA;IACA,CA9KA;IA+KAC,aA/KA,yBA+KAvB,CA/KA,EA+KA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA,qEACAwB,QADA,EAEA;UACA;QACA,CAJA;QAKA;UAAAjD;UAAAC;QAAA;MACA;;MACA;IACA,CA9LA;IA+LAiD,cA/LA,0BA+LAnD,UA/LA,EA+LA;MACA;;MACA;QACA;QACA;QACA;QACA;;QACAoD;UAAAnD;UAAAC;UAAAmD;QAAA;MACA;;MACA;IACA,CAzMA;IA0MAC,YA1MA,wBA0MAC,KA1MA,EA0MAC,UA1MA,EA0MA;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;MACA;MACA;;MACA;;MACAC;QACA;UACAC;QACA;;QACA;UACAA;UACAA;UACAjB;QACA;MACA,CATA;;MAUAgB;IACA,CAlOA;IAmOAE,kBAnOA,gCAmOA;MAAA;;MACA;QACA;QACAnE;QACAA;;QACA,wCACAqC,IADA,CACA;UACA;YACA+B;UACA,CAFA,MAEA;YACAC;UACA;QACA,CAPA,EAQA/B,KARA,CAQA;UACA+B;QACA,CAVA;MAWA,CAfA;IAgBA,CApPA;IAqPAC,kBArPA,gCAqPA;MAAA;;MACA;QACA;QACAtE;QACAA;;QACA,6CACAqC,IADA,CACA;UACA;YACA+B;UACA,CAFA,MAEA;YACAC;UACA;QACA,CAPA,EAQA/B,KARA,CAQA;UACA+B;QACA,CAVA;MAWA,CAfA;IAgBA,CAtQA;IAuQAE,OAvQA,qBAuQA;MAAA;;MACA;QACA;UACA;UACA;;UACA;YACAC;UACA,CAFA,MAEA;YACAA;UACA;;UACAC,wBACApC,IADA,CACA;YACA;UACA,CAHA,EAIAC,KAJA,CAIA;YACA;UACA,CANA;QAOA;MACA,CAjBA;IAkBA,CA1RA;IA2RAoC,MA3RA,kBA2RAC,QA3RA,EA2RA;MAAA;;MACA,qBASA,aATA;MAAA,IACA1E,OADA,kBACAA,OADA;MAAA,IAEAd,IAFA,kBAEAA,IAFA;MAAA,IAGAe,WAHA,kBAGAA,WAHA;MAAA,IAIAC,SAJA,kBAIAA,SAJA;MAAA,IAKAC,MALA,kBAKAA,MALA;MAAA,IAMAC,aANA,kBAMAA,aANA;MAAA,IAOAC,OAPA,kBAOAA,OAPA;MAAA,IAQAE,UARA,kBAQAA,UARA;;MAUA;QACAL;QACAC,0BACAuE,uBADA,GAEAA,oBAFA;QAGAtE;QACAC;MACA,CAPA,MAOA;QACAH;MACA;;MACA;MACAyE;MACA;QACA3E,gBADA;QAEAd,UAFA;QAGAe,wBAHA;QAIA2E,OAJA;QAKA1E,oBALA;QAMAC,cANA;QAOAC,4BAPA;QAQAC,gBARA;QASAsE;MATA;MAWA,qCACAvC,IADA,CACA;QACA;;QACA;UACA;YACAM,iCADA;YAEA9B;UAFA;;UAIA;;UACA;QACA;MACA,CAXA,EAYAyB,KAZA,CAYA;QACA;MACA,CAdA;IAeA,CA5UA;IA6UAwC,YA7UA,wBA6UAC,GA7UA,EA6UA;MACA;MACA;QACApC,4BADA;QAEA9B,eACA,qDADA,GAEA;MAJA;MAMA;IACA;EAtVA;AAzEA","names":["name","components","Media","data","tab","listLoading","list","nftsLoading","nfts","multipleSelection","apiLoading","error","dialogVisible","formData","address","description","storageId","imgUrl","animStorageId","animUrl","animType","properties","key","value","rules","required","message","trigger","fileImage","fileVideo","fileListImage","fileListVideo","props","computed","useAmount","amount","repeatTip","max","typeAmount","blindTypes","created","methods","getProbability","nft","probability","onInput","scope","e","getNfts","blindBoxId","then","catch","getList","checkForm","addData","blindNftId","title","goNfts","goConfig","handleSelectionChange","val","selNFTs","console","delNFT","index","onOpen","formatData","checkSelected","existsNFT","id","propertyInput","property","fullProperties","_properties","trait_type","uploadChange","files","uploadType","reader","_this","handlerUploadImage","resolve","reject","handlerUploadVideo","addForm","promiseArr","Promise","addNFT","fileData","propertys","type","failCallback","err"],"sourceRoot":"src/views/blindBoxManagement","sources":["blindBoxSet.vue"],"sourcesContent":["<template>\n  <div class=\"set-wrap\">\n    <div class=\"table-container\" v-if=\"tab != 'config'\" :key=\"'nfts'\">\n      <div class=\"table-header\">\n        <div class=\"left\">\n          <span class=\"bfont mr-10\" :class=\"!box.isRepetition ? 'cblue' : 'cgreen' \">\n            {{ !box.isRepetition ? $t('blind.box.unRepeat') : $t('blind.box.isRepeat') }}</span>\n          <template v-if=\"!box.isRepetition\">\n            <span class=\"bfont mr-10\" :class=\"!repeatTip.max ? 'cred' : 'cgreen'\">\n              {{ $t('blind.box.amount') }} &le; {{ box.amount }}</span>\n            <span class=\"bfont mr-10\" :class=\"!repeatTip.typeAmount ? 'cred' : 'cgreen'\">\n              {{ $t('blind.box.NFTTypes') }} &ge; {{ box.nftAmount}}</span>\n          </template>\n          <span class=\"bfont mr-10\" :class=\"box.amount * box.nftAmount != useAmount ? 'cred' : 'cgreen'\">\n            {{$t('blind.box.totalAmount')}}:{{ box.amount * box.nftAmount}}({{ useAmount }})\n          </span>\n          <span class=\"cgreen bfont mr-10\" v-if=\"useAmount == box.amount * box.nftAmount\">{{$t('blind.box.success')}}</span>\n        </div>\n        <div class=\"right\">\n          <el-button @click=\"goConfig\" size=\"mini\" type=\"primary\">\n            {{ $t(\"blind.set.select\") }}\n          </el-button>\n        </div>\n      </div>\n      <el-table class=\"table-body\" v-loading=\"nftsLoading\" :data=\"nfts\" :element-loading-text=\"$t('util.loadingText')\" border tooltip-effect=\"dark\" style=\"width: 100%\">\n        <el-table-column align=\"center\" label=\"ID\" prop=\"id\" sortable></el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.name')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.name\">\n            {{scope.row.metadataContent.name}}\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.property')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.attributes\">\n            <div v-for=\"(attribute, i) in scope.row.metadataContent.attributes\" :key=\"i\">\n              {{ attribute.key}}: {{ attribute.value }}\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.set.picture')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.image\">\n            <media :isPreview=\"true\" :url=\"scope.row.metadataContent.image\" type=\"image\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.set.audioORvideo')\" prop=\"metadataContent\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.animation_url\">\n            <media :url=\"scope.row.metadataContent.animation_url\" :isPreview=\"true\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column :label=\"$t('blind.set.amount')\" width=\"120px\">\n          <template slot-scope=\"scope\">\n            <el-input @input=\"(e) => { onInput(scope, e) }\" type=\"number\" v-model=\"scope.row.amount\" :min=\"1\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column :label=\"$t('blind.box.probability')\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <span class=\"cred bfont\" v-if=\"useAmount != box.amount * box.nftAmount\"> - </span>\n            <span class=\"cgreen bfont\" v-else>{{ getProbability(scope.row) }}%</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column :label=\"$t('blind.operation')\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"danger\" size=\"mini\" @click=\"delNFT(scope.$index)\">{{ $t(\"blind.delete\") }}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"table-footer\">\n        <div class=\"left\">\n          <span class=\"cred bfont\" v-if=\"error\"> {{ error}} </span>\n        </div>\n        <div class=\"right\">\n          <el-button :loading=\"apiLoading\" @click=\"addData\" type=\"primary\">{{ $t(\"blind.confirm\") }}</el-button>\n        </div>\n\n      </div>\n    </div>\n    <div class=\"table-container\" v-else :key=\"'config'\">\n      <div class=\"table-header\">\n        <div class=\"left\">\n          <el-button type=\"text\" @click=\"goNfts\">\n            {{ $t(\"blind.set.back\") }}\n          </el-button>\n        </div>\n        <div class=\"right\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"dialogVisible = true\">\n            {{ $t(\"blind.box.addNFT\") }}\n          </el-button>\n        </div>\n      </div>\n      <el-table class=\"table-body\" ref=\"multipleTable\" v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border tooltip-effect=\"dark\" style=\"width: 100%\"\n        @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n        <el-table-column align=\"center\" label=\"ID\" prop=\"id\" sortable></el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.name')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.name\">\n            {{scope.row.metadataContent.name}}\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.property')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.attributes\">\n            <div v-for=\"(attribute, i) in scope.row.metadataContent.attributes\" :key=\"i\">\n              {{ attribute.key}}: {{ attribute.value }}\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.set.picture')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.image\">\n            <media :isPreview=\"true\" :url=\"scope.row.metadataContent.image\" type=\"image\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.set.audioORvideo')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.animation_url\">\n            <media :url=\"scope.row.metadataContent.animation_url\" :isPreview=\"true\"></media>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"table-footer\">\n        <div class=\"right\">\n          <el-button @click=\"selNFTs\" type=\"primary\">\n            {{ $t(\"blind.confirm\") }}\n          </el-button>\n        </div>\n      </div>\n    </div>\n    <el-dialog :title=\"$t('blind.add')\" :visible.sync=\"dialogVisible\" @open=\"onOpen\" append-to-body>\n      <el-form ref=\"formData\" :model=\"formData\" status-icon label-position=\"left\" label-width=\"120px\" :rules=\"rules\">\n        <el-form-item :label=\"$t('blind.nft.blindType')\" prop=\"address\">\n          <el-select disabled v-model=\"formData.address\" :placeholder=\"$t('blind.nft.pleaseSelect')\">\n            <el-option v-for=\"(blindType, index) in blindTypes\" :key=\"index\" :label=\"blindType.name\" :value=\"blindType.address\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.name')\" prop=\"name\">\n          <el-input v-model=\"formData.name\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.brief')\" prop=\"description\">\n          <el-input type=\"textarea\" v-model=\"formData.description\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.picture')\" prop=\"imgUrl\">\n          <el-upload ref=\"upload\" action=\"\" :auto-upload=\"false\" :show-file-list=\"false\" :file-list=\"fileListImage\" :limit=\"1\" class=\"avatar-uploader\"\n            accept=\"image/jpg, image/jpeg, image/png, image/gif\" :on-change=\"(file) => { uploadChange(file, 'uploadImage'); }\">\n            <template v-if=\"formData.imgUrl\">\n              <media :url=\"formData.imgUrl\" type=\"image\"></media>\n            </template>\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.audioORvideo')\" prop=\"animUrl\">\n          <el-upload ref=\"upload\" action=\"\"\n              :auto-upload=\"false\"\n              :show-file-list=\"false\"\n              :file-list=\"fileListVideo\"\n              :limit=\"1\"\n              class=\"avatar-uploader\"\n              accept=\"audio/mp3, audio/wav, audio/oga, video/webm, video/mp4, video/m4v, video/ogg, video/ogv, video/mov\"\n              :on-change=\" (file) => { uploadChange(file, 'uploadVideo'); }\"\n              >\n            <template v-if=\"formData.animUrl\">\n              <media :url=\"formData.animUrl\" :type=\"formData.animType\"></media>\n            </template>\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.property')\">\n          <div class=\"property-group\" v-for=\"(property, i) in formData.properties\" :key=\"i\">\n            <div class=\"property left\">\n              <el-input v-model=\"property.key\" :placeholder=\"$t('blind.property.key')\" @input=\"propertyInput\"> </el-input>\n            </div>\n            <div class=\"property right\">\n              <el-input v-model=\"property.value\" :placeholder=\"$t('blind.property.value')\" @input=\"propertyInput\"> </el-input>\n            </div>\n          </div>\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click.native.prevent=\"dialogVisible=false\">\n          {{ $t(\"blind.cancel\") }}\n        </el-button>\n        <el-button :loading=\"apiLoading\" type=\"primary\" @click.native.prevent=\"addForm\">{{ $t(\"blind.confirm\") }}\n        </el-button>\n      </div>\n\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Media from \"@/components/Media\";\n  export default {\n    name: \"nftSet\",\n    components: { Media },\n    data () {\n      return {\n        tab: \"nfts\",\n        listLoading: true,\n        list: [],\n        nftsLoading: true,\n        nfts: [],\n        multipleSelection: [],\n        apiLoading: false,\n        error: \"\",\n        dialogVisible: false,\n        formData: {\n          address: \"\",\n          name: \"\",\n          description: \"\",\n          storageId: \"\",\n          imgUrl: \"\",\n          animStorageId: \"\",\n          animUrl: \"\",\n          animType: \"\",\n          properties: [{ key: \"\", value: \"\" }],\n        },\n        rules: {\n          address: {\n            required: true,\n            message: this.$t(\"blind.nft.emptyType\"),\n            trigger: \"change\",\n          },\n          imgUrl: {\n            required: true,\n            message: this.$t(\"blind.nft.emptyPicture\"),\n            trigger: \"blur\",\n          },\n        },\n        fileImage: \"\",\n        fileVideo: \"\",\n        fileListImage: [],\n        fileListVideo: [],\n      };\n    },\n    props: [\"box\"],\n    computed: {\n      useAmount () {\n        let amount = 0;\n        for (var i = 0;i < this.nfts.length;i++) {\n          var _amount = parseInt(this.nfts[i].amount)\n          amount += !_amount ? 0 : _amount;\n        }\n        return amount;\n      },\n      repeatTip () {\n        if (this.box.isRepetition) return;\n        let max = 0;\n        let typeAmount = this.nfts.length;\n        for (var i = 0;i < this.nfts.length;i++) {\n          var _amount = parseInt(this.nfts[i].amount)\n          max = _amount && _amount > max ? _amount : max;\n        }\n        return {\n          max: max <= parseInt(this.box.amount),\n          typeAmount: typeAmount >= parseInt(this.box.nftAmount)\n        }\n      },\n      blindTypes () {\n        return this.$store.state.user.blindTypes;\n      },\n    },\n    created () {\n      this.getNfts();\n    },\n    methods: {\n      getProbability (nft) {\n        let amount = parseInt(nft.amount)\n        if (!amount) return 0;\n        if (!this.box.isRepetition) {\n          return this.$tool.decimal((amount * 100) / this.box.amount, 2);\n        }\n        let totalAmount = this.box.amount * this.box.nftAmount;\n        let probability = 0;\n        for (var i = 0;i < this.box.nftAmount;i++) {\n          if (!probability) {\n            probability = (totalAmount - amount - i) / totalAmount;\n          } else {\n            probability = probability * (totalAmount - amount - i) / totalAmount;\n          }\n        }\n        return this.$tool.decimal((1 - probability) * 100, 2);\n      },\n      onInput (scope, e) {\n        this.nfts = [].concat(this.nfts);\n      },\n      getNfts () {\n        this.nftsLoading = true;\n        this.$api(\"blind.box.nfts\", { blindBoxId: this.box.id })\n          .then((res) => {\n            if (this.$tool.checkResponse(res)) {\n              for (var i = 0;i < res.data.list.length;i++) {\n                let nft = res.data.list[i];\n                nft.metadataContent = JSON.parse(\n                  nft.metadataContent\n                );\n                this.nfts.push(Object.assign({}, nft));\n              }\n            }\n            this.nftsLoading = false;\n          })\n          .catch(() => {\n            this.nftsLoading = false;\n          });\n      },\n      getList () {\n        this.listLoading = true;\n        this.$api(\"blind.nft.all\", { address: this.box.address })\n          .then((res) => {\n            if (this.$tool.checkResponse(res)) {\n              this.formatData(res.data.list);\n              this.list = res.data.list;\n              this.checkSelected();\n            }\n            this.listLoading = false;\n          })\n          .catch((err) => {\n            this.listLoading = false;\n          });\n      },\n      checkForm () {\n        let error = false\n        let total = this.box.amount * this.box.nftAmount;\n        if (total < this.useAmount) {\n          this.error = this.$t('blind.box.limitTotalAmount') + total;\n          error = true;\n        }\n        if (!this.box.isRepetition && !this.repeatTip.max) {\n          this.error = this.$t('blind.box.limitMaxAmount') + this.box.amount;\n          error = true;\n        }\n\n        return !error;\n      },\n      addData () {\n        if (!this.checkForm()) return;\n\n        if (this.apiLoading) return;\n        this.apiLoading = true;\n\n        let nfts = [];\n        for (var i = 0;i < this.nfts.length;i++) {\n          var nft = this.nfts[i];\n          nfts.push({\n            blindNftId: this.nfts[i].id,\n            amount: this.nfts[i].amount,\n            blindBoxId: this.box.id,\n            ...nft\n          });\n        }\n        nfts = JSON.stringify(nfts);\n        let data = {\n          blindBoxId: this.box.id,\n          nfts: nfts,\n        };\n        this.$api(\"blind.box.addNfts\", data)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.$notify.success({\n                title: this.$t(\"blind.success\"),\n                message: this.$t(\"blind.messageSuccess\"),\n              });\n              this.$emit(\"confirm\");\n            }\n          })\n          .catch((err) => {\n            this.apiLoading = false;\n            this.$notify.error({\n              title: this.$t(\"blind.fail\"),\n              message: this.$t(\"response.\" + err.data ? err.data.errno : \"\"),\n            });\n          });\n      },\n      goNfts () {\n        this.tab = \"nfts\";\n      },\n      goConfig () {\n        this.error = \"\";\n        this.tab = \"config\";\n        this.getList();\n      },\n      handleSelectionChange (val) {\n        this.multipleSelection = val;\n      },\n      selNFTs () {\n        this.nfts = this.multipleSelection;\n        var nfts = [];\n        console.log(\"this.nfts\", this.nfts);\n        for(var i = 0; i < this.nfts.length; i++){\n          console.log(\"i\", i);\n          var nft = Object.assign({}, this.nfts[i]);\n          nft.amount = 1;\n          nfts.push(nft);\n        }\n        this.nfts = nfts;\n        this.goNfts();\n      },\n      delNFT (index) {\n        this.nfts.splice(index, 1);\n        this.nfts = [].concat(this.nfts);\n      },\n      onOpen () {\n        this.formData = {\n          address: this.box.address,\n          name: \"\",\n          description: \"\",\n          imgUrl: \"\",\n          storageId: \"\",\n          animUrl: \"\",\n          animStorageId: \"\",\n          properties: [{ key: \"\", value: \"\" }],\n        };\n        this.fileImage = \"\";\n        this.fileVideo = \"\";\n      },\n      formatData (data) {\n        for (let i = 0, len = data.length;i < len;i++) {\n          data[i].metadataContent = JSON.parse(data[i].metadataContent);\n        }\n      },\n      checkSelected () {\n        this.$nextTick(function () {\n          for (var i = 0;i < this.list.length;i++) {\n            let row = this.list[i];\n            if (!this.existsNFT(row.id)) {\n              this.$refs.multipleTable.toggleRowSelection(row, false);\n            } else {\n              this.$refs.multipleTable.toggleRowSelection(row, true);\n            }\n          }\n        });\n      },\n      existsNFT (id) {\n        for (var i = 0;i < this.nfts.length;i++) {\n          let nft = this.nfts[i];\n          if (nft.blindNftId == id) return true;\n        }\n        return false;\n      },\n      propertyInput (e) {\n        let emptyC = 0;\n        for (var i = 0;i < this.formData.properties.length;i++) {\n          var property = this.formData.properties[i];\n          if (!property.key || !property.value) emptyC += 1;\n        }\n        if (emptyC != 1) {\n          this.formData.properties = this.formData.properties.filter(function (\n            property\n          ) {\n            return property.key || property.value;\n          });\n          this.formData.properties.push({ key: \"\", value: \"\" });\n        }\n        this.formData = JSON.parse(JSON.stringify(this.formData));\n      },\n      fullProperties (properties) {\n        var _properties = [];\n        for (var i = 0;i < properties.length;i++) {\n          var key = properties[i].key.trim();\n          var value = properties[i].value.trim();\n          if (!key || !value) continue;\n          var trait_type = key;\n          _properties.push({ key, value, trait_type });\n        }\n        return _properties;\n      },\n      uploadChange (files, uploadType) {\n        if (uploadType === \"uploadImage\") {\n          this.fileListImage = [];\n          this.fileImage = files.raw;\n        }\n        if (uploadType === \"uploadVideo\") {\n          this.fileListVideo = [];\n          this.fileVideo = files.raw;\n        }\n        var event = event || window.event;\n        var file = event.target.files[0];\n        var reader = new FileReader();\n        var _this = this;\n        reader.onload = function (e) {\n          if (uploadType === \"uploadImage\") {\n            _this.formData.imgUrl = e.target.result;\n          }\n          if (uploadType === \"uploadVideo\") {\n            _this.formData.animUrl = e.target.result;\n            _this.formData.animType = file.type;\n            console.log(\"animType\", file.type);\n          }\n        };\n        reader.readAsDataURL(file);\n      },\n      handlerUploadImage () {\n        return new Promise((resolve, reject) => {\n          let formData = new FormData();\n          formData.append(\"file\", this.fileImage);\n          formData.append(\"flag\", \"ipfs\");\n          this.$api(\"storage.create\", formData)\n            .then((res) => {\n              if (this.$tool.checkResponse(res)) {\n                resolve(res.data);\n              } else {\n                reject(res);\n              }\n            })\n            .catch((err) => {\n              reject(err);\n            });\n        });\n      },\n      handlerUploadVideo () {\n        return new Promise((resolve, reject) => {\n          let formData = new FormData();\n          formData.append(\"files\", this.fileVideo);\n          formData.append(\"files\", this.fileImage);\n          this.$api(\"storage.multiupload\", formData)\n            .then((res) => {\n              if (this.$tool.checkResponse(res)) {\n                resolve(res.data);\n              } else {\n                reject(res);\n              }\n            })\n            .catch((err) => {\n              reject(err);\n            });\n        });\n      },\n      addForm () {\n        this.$refs[\"formData\"].validate((valid) => {\n          if (valid && !this.apiLoading) {\n            this.apiLoading = true;\n            let promiseArr = [];\n            if (this.fileVideo) {\n              promiseArr = [this.handlerUploadVideo()];\n            } else {\n              promiseArr = [this.handlerUploadImage()];\n            }\n            Promise.all(promiseArr)\n              .then((res) => {\n                this.addNFT(res);\n              })\n              .catch((err) => {\n                this.failCallback();\n              });\n          }\n        });\n      },\n      addNFT (fileData) {\n        let {\n          address,\n          name,\n          description,\n          storageId,\n          imgUrl,\n          animStorageId,\n          animUrl,\n          properties,\n        } = this.formData;\n        if (fileData) {\n          storageId = this.fileVideo ? fileData[0][1].id : fileData[0].id;\n          imgUrl = this.fileVideo\n            ? fileData[0][1].ipfshash\n            : fileData[0].ipfshash;\n          animStorageId = this.fileVideo ? fileData[0][0].id : \"\";\n          animUrl = this.fileVideo ? fileData[0][0].ipfshash : \"\";\n        } else {\n          storageId = imgUrl = animStorageId = animUrl = \"\";\n        }\n        let propertys = this.fullProperties(properties);\n        propertys = JSON.stringify(propertys);\n        let sendData = {\n          address,\n          name,\n          description,\n          type: 5,\n          storageId,\n          imgUrl,\n          animStorageId,\n          animUrl,\n          propertys,\n        };\n        this.$api(\"blind.nft.add\", sendData)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.$notify.success({\n                title: this.$t(\"blind.success\"),\n                message: this.$t(\"blind.messageSuccess\"),\n              });\n              this.dialogVisible = false;\n              this.getList();\n            }\n          })\n          .catch((err) => {\n            this.failCallback(err);\n          });\n      },\n      failCallback (err) {\n        this.apiLoading = false;\n        this.$notify.error({\n          title: this.$t(\"blind.fail\"),\n          message: err\n            ? this.$t(\"response.\" + err.data ? err.data.errno : \"\")\n            : this.$t(\"blind.messageFail\"),\n        });\n        this.dialogVisible = false;\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .table-container {\n    position: relative;\n    height: 60vh;\n    .table-body {\n      position: absolute;\n      top: 35px;\n      left: 0;\n      right: 0;\n      bottom: 50px;\n      overflow-y: scroll;\n    }\n    .table-footer {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n  }\n\n  .el-table__row audio {\n    width: 80%;\n  }\n  .table-header {\n    display: flex;\n    margin-bottom: 10px;\n    align-items: center;\n    .right {\n      flex: 1;\n      text-align: right;\n    }\n  }\n  .table-footer {\n    display: flex;\n    margin-top: 10px;\n    .right {\n      flex: 1;\n      text-align: right;\n    }\n  }\n  .set-wrap {\n    max-height: 60vh;\n    overflow: hidden;\n    overflow-y: auto;\n  }\n\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #20a0ff;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n  }\n  .avatar {\n    width: 145px;\n    height: 145px;\n    display: block;\n  }\n\n  .el-table__row audio {\n    width: 80%;\n  }\n\n  .property-group {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 15px;\n    .property {\n      flex: 1;\n    }\n    .left {\n      padding-right: 40px;\n    }\n  }\n  .el-upload audio {\n    width: 300px;\n  }\n</style>\n"]}]}