{"remainingRequest":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBoxSet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\blindBoxManagement\\blindBoxSet.vue","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1652081856293},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1652081880134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNZWRpYSBmcm9tICJAL2NvbXBvbmVudHMvTWVkaWEiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm5mdFNldCIsCiAgY29tcG9uZW50czogeyBNZWRpYSB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFiOiAibmZ0cyIsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBsaXN0OiBbXSwKICAgICAgbmZ0c0xvYWRpbmc6IHRydWUsCiAgICAgIG5mdHM6IFtdLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIGFwaUxvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogIiIsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgICBzdG9yYWdlSWQ6ICIiLAogICAgICAgIGltZ1VybDogIiIsCiAgICAgICAgYW5pbVN0b3JhZ2VJZDogIiIsCiAgICAgICAgYW5pbVVybDogIiIsCiAgICAgICAgYW5pbVR5cGU6ICIiLAogICAgICAgIHByb3BlcnRpZXM6IFt7IGtleTogIiIsIHZhbHVlOiAiIiB9XSwKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJsaW5kLm5mdC5lbXB0eVR5cGUiKSwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLAogICAgICAgIH0sCiAgICAgICAgaW1nVXJsOiB7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJsaW5kLm5mdC5lbXB0eVBpY3R1cmUiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICB9LAogICAgICB9LAogICAgICBmaWxlSW1hZ2U6ICIiLAogICAgICBmaWxlVmlkZW86ICIiLAogICAgICBmaWxlTGlzdEltYWdlOiBbXSwKICAgICAgZmlsZUxpc3RWaWRlbzogW10sCiAgICB9OwogIH0sCiAgcHJvcHM6IFsiYm94Il0sCiAgY29tcHV0ZWQ6IHsKICAgIHVzZUFtb3VudCAoKSB7CiAgICAgIGxldCBhbW91bnQgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDtpIDwgdGhpcy5uZnRzLmxlbmd0aDtpKyspIHsKICAgICAgICB2YXIgX2Ftb3VudCA9IHBhcnNlSW50KHRoaXMubmZ0c1tpXS5hbW91bnQpCiAgICAgICAgYW1vdW50ICs9ICFfYW1vdW50ID8gMCA6IF9hbW91bnQ7CiAgICAgIH0KICAgICAgcmV0dXJuIGFtb3VudDsKICAgIH0sCiAgICByZXBlYXRUaXAgKCkgewogICAgICBpZiAodGhpcy5ib3guaXNSZXBldGl0aW9uKSByZXR1cm47CiAgICAgIGxldCBtYXggPSAwOwogICAgICBsZXQgdHlwZUFtb3VudCA9IHRoaXMubmZ0cy5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkgPSAwO2kgPCB0aGlzLm5mdHMubGVuZ3RoO2krKykgewogICAgICAgIHZhciBfYW1vdW50ID0gcGFyc2VJbnQodGhpcy5uZnRzW2ldLmFtb3VudCkKICAgICAgICBtYXggPSBfYW1vdW50ICYmIF9hbW91bnQgPiBtYXggPyBfYW1vdW50IDogbWF4OwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgbWF4OiBtYXggPD0gcGFyc2VJbnQodGhpcy5ib3guYW1vdW50KSwKICAgICAgICB0eXBlQW1vdW50OiB0eXBlQW1vdW50ID49IHBhcnNlSW50KHRoaXMuYm94Lm5mdEFtb3VudCkKICAgICAgfQogICAgfSwKICAgIGJsaW5kVHlwZXMgKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5ibGluZFR5cGVzOwogICAgfSwKICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXROZnRzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQcm9iYWJpbGl0eSAobmZ0KSB7CiAgICAgIGxldCBhbW91bnQgPSBwYXJzZUludChuZnQuYW1vdW50KQogICAgICBpZiAoIWFtb3VudCkgcmV0dXJuIDA7CiAgICAgIGlmICghdGhpcy5ib3guaXNSZXBldGl0aW9uKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHRvb2wuZGVjaW1hbCgoYW1vdW50ICogMTAwKSAvIHRoaXMuYm94LmFtb3VudCwgMik7CiAgICAgIH0KICAgICAgbGV0IHRvdGFsQW1vdW50ID0gdGhpcy5ib3guYW1vdW50ICogdGhpcy5ib3gubmZ0QW1vdW50OwogICAgICBsZXQgcHJvYmFiaWxpdHkgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDtpIDwgdGhpcy5ib3gubmZ0QW1vdW50O2krKykgewogICAgICAgIGlmICghcHJvYmFiaWxpdHkpIHsKICAgICAgICAgIHByb2JhYmlsaXR5ID0gKHRvdGFsQW1vdW50IC0gYW1vdW50IC0gaSkgLyB0b3RhbEFtb3VudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJvYmFiaWxpdHkgPSBwcm9iYWJpbGl0eSAqICh0b3RhbEFtb3VudCAtIGFtb3VudCAtIGkpIC8gdG90YWxBbW91bnQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiR0b29sLmRlY2ltYWwoKDEgLSBwcm9iYWJpbGl0eSkgKiAxMDAsIDIpOwogICAgfSwKICAgIG9uSW5wdXQgKHNjb3BlLCBlKSB7CiAgICAgIHRoaXMubmZ0cyA9IFtdLmNvbmNhdCh0aGlzLm5mdHMpOwogICAgfSwKICAgIGdldE5mdHMgKCkgewogICAgICB0aGlzLm5mdHNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBpKCJibGluZC5ib3gubmZ0cyIsIHsgYmxpbmRCb3hJZDogdGhpcy5ib3guaWQgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy4kdG9vbC5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IHJlcy5kYXRhLmxpc3QubGVuZ3RoO2krKykgewogICAgICAgICAgICAgIGxldCBuZnQgPSByZXMuZGF0YS5saXN0W2ldOwogICAgICAgICAgICAgIG5mdC5tZXRhZGF0YUNvbnRlbnQgPSBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgbmZ0Lm1ldGFkYXRhQ29udGVudAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgdGhpcy5uZnRzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgbmZ0KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubmZ0c0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLm5mdHNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGlzdCAoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLiRhcGkoImJsaW5kLm5mdC5hbGwiLCB7IGFkZHJlc3M6IHRoaXMuYm94LmFkZHJlc3MgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBpZiAodGhpcy4kdG9vbC5jaGVja1Jlc3BvbnNlKHJlcykpIHsKICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRhKHJlcy5kYXRhLmxpc3QpOwogICAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5saXN0OwogICAgICAgICAgICB0aGlzLmNoZWNrU2VsZWN0ZWQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tGb3JtICgpIHsKICAgICAgbGV0IGVycm9yID0gZmFsc2UKICAgICAgbGV0IHRvdGFsID0gdGhpcy5ib3guYW1vdW50ICogdGhpcy5ib3gubmZ0QW1vdW50OwogICAgICBpZiAodG90YWwgPCB0aGlzLnVzZUFtb3VudCkgewogICAgICAgIHRoaXMuZXJyb3IgPSB0aGlzLiR0KCdibGluZC5ib3gubGltaXRUb3RhbEFtb3VudCcpICsgdG90YWw7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICB9CiAgICAgIGlmICghdGhpcy5ib3guaXNSZXBldGl0aW9uICYmICF0aGlzLnJlcGVhdFRpcC5tYXgpIHsKICAgICAgICB0aGlzLmVycm9yID0gdGhpcy4kdCgnYmxpbmQuYm94LmxpbWl0TWF4QW1vdW50JykgKyB0aGlzLmJveC5hbW91bnQ7CiAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gIWVycm9yOwogICAgfSwKICAgIGFkZERhdGEgKCkgewogICAgICBpZiAoIXRoaXMuY2hlY2tGb3JtKCkpIHJldHVybjsKCiAgICAgIGlmICh0aGlzLmFwaUxvYWRpbmcpIHJldHVybjsKICAgICAgdGhpcy5hcGlMb2FkaW5nID0gdHJ1ZTsKCiAgICAgIGxldCBuZnRzID0gW107CiAgICAgIGZvciAodmFyIGkgPSAwO2kgPCB0aGlzLm5mdHMubGVuZ3RoO2krKykgewogICAgICAgIHZhciBuZnQgPSB0aGlzLm5mdHNbaV07CiAgICAgICAgbmZ0cy5wdXNoKHsKICAgICAgICAgIGJsaW5kTmZ0SWQ6IHRoaXMubmZ0c1tpXS5pZCwKICAgICAgICAgIGFtb3VudDogdGhpcy5uZnRzW2ldLmFtb3VudCwKICAgICAgICAgIGJsaW5kQm94SWQ6IHRoaXMuYm94LmlkLAogICAgICAgICAgLi4ubmZ0CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbmZ0cyA9IEpTT04uc3RyaW5naWZ5KG5mdHMpOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBibGluZEJveElkOiB0aGlzLmJveC5pZCwKICAgICAgICBuZnRzOiBuZnRzLAogICAgICB9OwogICAgICB0aGlzLiRhcGkoImJsaW5kLmJveC5hZGROZnRzIiwgZGF0YSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmFwaUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGlmICh0aGlzLiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoImJsaW5kLnN1Y2Nlc3MiKSwKICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCJibGluZC5tZXNzYWdlU3VjY2VzcyIpLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgiY29uZmlybSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuYXBpTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHQoImJsaW5kLmZhaWwiKSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgicmVzcG9uc2UuIiArIGVyci5kYXRhID8gZXJyLmRhdGEuZXJybm8gOiAiIiksCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnb05mdHMgKCkgewogICAgICB0aGlzLnRhYiA9ICJuZnRzIjsKICAgIH0sCiAgICBnb0NvbmZpZyAoKSB7CiAgICAgIHRoaXMuZXJyb3IgPSAiIjsKICAgICAgdGhpcy50YWIgPSAiY29uZmlnIjsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbiA9IHZhbDsKICAgIH0sCiAgICBzZWxORlRzICgpIHsKICAgICAgdGhpcy5uZnRzID0gdGhpcy5tdWx0aXBsZVNlbGVjdGlvbjsKICAgICAgdmFyIG5mdHMgPSBbXTsKICAgICAgY29uc29sZS5sb2coInRoaXMubmZ0cyIsIHRoaXMubmZ0cyk7CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLm5mdHMubGVuZ3RoOyBpKyspewogICAgICAgIGNvbnNvbGUubG9nKCJpIiwgaSk7CiAgICAgICAgdmFyIG5mdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMubmZ0c1tpXSk7CiAgICAgICAgbmZ0LmFtb3VudCA9IDE7CiAgICAgICAgbmZ0cy5wdXNoKG5mdCk7CiAgICAgIH0KICAgICAgdGhpcy5uZnRzID0gbmZ0czsKICAgICAgdGhpcy5nb05mdHMoKTsKICAgIH0sCiAgICBkZWxORlQgKGluZGV4KSB7CiAgICAgIHRoaXMubmZ0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLm5mdHMgPSBbXS5jb25jYXQodGhpcy5uZnRzKTsKICAgIH0sCiAgICBvbk9wZW4gKCkgewogICAgICB0aGlzLmZvcm1EYXRhID0gewogICAgICAgIGFkZHJlc3M6IHRoaXMuYm94LmFkZHJlc3MsCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICAgIGltZ1VybDogIiIsCiAgICAgICAgc3RvcmFnZUlkOiAiIiwKICAgICAgICBhbmltVXJsOiAiIiwKICAgICAgICBhbmltU3RvcmFnZUlkOiAiIiwKICAgICAgICBwcm9wZXJ0aWVzOiBbeyBrZXk6ICIiLCB2YWx1ZTogIiIgfV0sCiAgICAgIH07CiAgICAgIHRoaXMuZmlsZUltYWdlID0gIiI7CiAgICAgIHRoaXMuZmlsZVZpZGVvID0gIiI7CiAgICB9LAogICAgZm9ybWF0RGF0YSAoZGF0YSkgewogICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gZGF0YS5sZW5ndGg7aSA8IGxlbjtpKyspIHsKICAgICAgICBkYXRhW2ldLm1ldGFkYXRhQ29udGVudCA9IEpTT04ucGFyc2UoZGF0YVtpXS5tZXRhZGF0YUNvbnRlbnQpOwogICAgICB9CiAgICB9LAogICAgY2hlY2tTZWxlY3RlZCAoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDtpIDwgdGhpcy5saXN0Lmxlbmd0aDtpKyspIHsKICAgICAgICAgIGxldCByb3cgPSB0aGlzLmxpc3RbaV07CiAgICAgICAgICBpZiAoIXRoaXMuZXhpc3RzTkZUKHJvdy5pZCkpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93LCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGV4aXN0c05GVCAoaWQpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IHRoaXMubmZ0cy5sZW5ndGg7aSsrKSB7CiAgICAgICAgbGV0IG5mdCA9IHRoaXMubmZ0c1tpXTsKICAgICAgICBpZiAobmZ0LmJsaW5kTmZ0SWQgPT0gaWQpIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBwcm9wZXJ0eUlucHV0IChlKSB7CiAgICAgIGxldCBlbXB0eUMgPSAwOwogICAgICBmb3IgKHZhciBpID0gMDtpIDwgdGhpcy5mb3JtRGF0YS5wcm9wZXJ0aWVzLmxlbmd0aDtpKyspIHsKICAgICAgICB2YXIgcHJvcGVydHkgPSB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXNbaV07CiAgICAgICAgaWYgKCFwcm9wZXJ0eS5rZXkgfHwgIXByb3BlcnR5LnZhbHVlKSBlbXB0eUMgKz0gMTsKICAgICAgfQogICAgICBpZiAoZW1wdHlDICE9IDEpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXMgPSB0aGlzLmZvcm1EYXRhLnByb3BlcnRpZXMuZmlsdGVyKGZ1bmN0aW9uICgKICAgICAgICAgIHByb3BlcnR5CiAgICAgICAgKSB7CiAgICAgICAgICByZXR1cm4gcHJvcGVydHkua2V5IHx8IHByb3BlcnR5LnZhbHVlOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZm9ybURhdGEucHJvcGVydGllcy5wdXNoKHsga2V5OiAiIiwgdmFsdWU6ICIiIH0pOwogICAgICB9CiAgICAgIHRoaXMuZm9ybURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybURhdGEpKTsKICAgIH0sCiAgICBmdWxsUHJvcGVydGllcyAocHJvcGVydGllcykgewogICAgICB2YXIgX3Byb3BlcnRpZXMgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IHByb3BlcnRpZXMubGVuZ3RoO2krKykgewogICAgICAgIHZhciBrZXkgPSBwcm9wZXJ0aWVzW2ldLmtleS50cmltKCk7CiAgICAgICAgdmFyIHZhbHVlID0gcHJvcGVydGllc1tpXS52YWx1ZS50cmltKCk7CiAgICAgICAgaWYgKCFrZXkgfHwgIXZhbHVlKSBjb250aW51ZTsKICAgICAgICB2YXIgdHJhaXRfdHlwZSA9IGtleTsKICAgICAgICBfcHJvcGVydGllcy5wdXNoKHsga2V5LCB2YWx1ZSwgdHJhaXRfdHlwZSB9KTsKICAgICAgfQogICAgICByZXR1cm4gX3Byb3BlcnRpZXM7CiAgICB9LAogICAgdXBsb2FkQ2hhbmdlIChmaWxlcywgdXBsb2FkVHlwZSkgewogICAgICBpZiAodXBsb2FkVHlwZSA9PT0gInVwbG9hZEltYWdlIikgewogICAgICAgIHRoaXMuZmlsZUxpc3RJbWFnZSA9IFtdOwogICAgICAgIHRoaXMuZmlsZUltYWdlID0gZmlsZXMucmF3OwogICAgICB9CiAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkVmlkZW8iKSB7CiAgICAgICAgdGhpcy5maWxlTGlzdFZpZGVvID0gW107CiAgICAgICAgdGhpcy5maWxlVmlkZW8gPSBmaWxlcy5yYXc7CiAgICAgIH0KICAgICAgdmFyIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50OwogICAgICB2YXIgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkSW1hZ2UiKSB7CiAgICAgICAgICBfdGhpcy5mb3JtRGF0YS5pbWdVcmwgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgfQogICAgICAgIGlmICh1cGxvYWRUeXBlID09PSAidXBsb2FkVmlkZW8iKSB7CiAgICAgICAgICBfdGhpcy5mb3JtRGF0YS5hbmltVXJsID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgX3RoaXMuZm9ybURhdGEuYW5pbVR5cGUgPSBmaWxlLnR5cGU7CiAgICAgICAgICBjb25zb2xlLmxvZygiYW5pbVR5cGUiLCBmaWxlLnR5cGUpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICB9LAogICAgaGFuZGxlclVwbG9hZEltYWdlICgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCB0aGlzLmZpbGVJbWFnZSk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJmbGFnIiwgImlwZnMiKTsKICAgICAgICB0aGlzLiRhcGkoInN0b3JhZ2UuY3JlYXRlIiwgZm9ybURhdGEpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlclVwbG9hZFZpZGVvICgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVzIiwgdGhpcy5maWxlVmlkZW8pOwogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZmlsZXMiLCB0aGlzLmZpbGVJbWFnZSk7CiAgICAgICAgdGhpcy4kYXBpKCJzdG9yYWdlLm11bHRpdXBsb2FkIiwgZm9ybURhdGEpCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLiR0b29sLmNoZWNrUmVzcG9uc2UocmVzKSkgewogICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdChyZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkRm9ybSAoKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm1EYXRhIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkICYmICF0aGlzLmFwaUxvYWRpbmcpIHsKICAgICAgICAgIHRoaXMuYXBpTG9hZGluZyA9IHRydWU7CiAgICAgICAgICBsZXQgcHJvbWlzZUFyciA9IFtdOwogICAgICAgICAgaWYgKHRoaXMuZmlsZVZpZGVvKSB7CiAgICAgICAgICAgIHByb21pc2VBcnIgPSBbdGhpcy5oYW5kbGVyVXBsb2FkVmlkZW8oKV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9taXNlQXJyID0gW3RoaXMuaGFuZGxlclVwbG9hZEltYWdlKCldOwogICAgICAgICAgfQogICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZUFycikKICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuYWRkTkZUKHJlcyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5mYWlsQ2FsbGJhY2soKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRORlQgKGZpbGVEYXRhKSB7CiAgICAgIGxldCB7CiAgICAgICAgYWRkcmVzcywKICAgICAgICBuYW1lLAogICAgICAgIGRlc2NyaXB0aW9uLAogICAgICAgIHN0b3JhZ2VJZCwKICAgICAgICBpbWdVcmwsCiAgICAgICAgYW5pbVN0b3JhZ2VJZCwKICAgICAgICBhbmltVXJsLAogICAgICAgIHByb3BlcnRpZXMsCiAgICAgIH0gPSB0aGlzLmZvcm1EYXRhOwogICAgICBpZiAoZmlsZURhdGEpIHsKICAgICAgICBzdG9yYWdlSWQgPSB0aGlzLmZpbGVWaWRlbyA/IGZpbGVEYXRhWzBdWzFdLmlkIDogZmlsZURhdGFbMF0uaWQ7CiAgICAgICAgaW1nVXJsID0gdGhpcy5maWxlVmlkZW8KICAgICAgICAgID8gZmlsZURhdGFbMF1bMV0uaXBmc2hhc2gKICAgICAgICAgIDogZmlsZURhdGFbMF0uaXBmc2hhc2g7CiAgICAgICAgYW5pbVN0b3JhZ2VJZCA9IHRoaXMuZmlsZVZpZGVvID8gZmlsZURhdGFbMF1bMF0uaWQgOiAiIjsKICAgICAgICBhbmltVXJsID0gdGhpcy5maWxlVmlkZW8gPyBmaWxlRGF0YVswXVswXS5pcGZzaGFzaCA6ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JhZ2VJZCA9IGltZ1VybCA9IGFuaW1TdG9yYWdlSWQgPSBhbmltVXJsID0gIiI7CiAgICAgIH0KICAgICAgbGV0IHByb3BlcnR5cyA9IHRoaXMuZnVsbFByb3BlcnRpZXMocHJvcGVydGllcyk7CiAgICAgIHByb3BlcnR5cyA9IEpTT04uc3RyaW5naWZ5KHByb3BlcnR5cyk7CiAgICAgIGxldCBzZW5kRGF0YSA9IHsKICAgICAgICBhZGRyZXNzLAogICAgICAgIG5hbWUsCiAgICAgICAgZGVzY3JpcHRpb24sCiAgICAgICAgdHlwZTogNSwKICAgICAgICBzdG9yYWdlSWQsCiAgICAgICAgaW1nVXJsLAogICAgICAgIGFuaW1TdG9yYWdlSWQsCiAgICAgICAgYW5pbVVybCwKICAgICAgICBwcm9wZXJ0eXMsCiAgICAgIH07CiAgICAgIHRoaXMuJGFwaSgiYmxpbmQubmZ0LmFkZCIsIHNlbmREYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuYXBpTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgaWYgKHRoaXMuJHRvb2wuY2hlY2tSZXNwb25zZShyZXMpKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgiYmxpbmQuc3VjY2VzcyIpLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoImJsaW5kLm1lc3NhZ2VTdWNjZXNzIiksCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy5mYWlsQ2FsbGJhY2soZXJyKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBmYWlsQ2FsbGJhY2sgKGVycikgewogICAgICB0aGlzLmFwaUxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICB0aXRsZTogdGhpcy4kdCgiYmxpbmQuZmFpbCIpLAogICAgICAgIG1lc3NhZ2U6IGVycgogICAgICAgICAgPyB0aGlzLiR0KCJyZXNwb25zZS4iICsgZXJyLmRhdGEgPyBlcnIuZGF0YS5lcnJubyA6ICIiKQogICAgICAgICAgOiB0aGlzLiR0KCJibGluZC5tZXNzYWdlRmFpbCIpLAogICAgICB9KTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["blindBoxSet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"blindBoxSet.vue","sourceRoot":"src/views/blindBoxManagement","sourcesContent":["<template>\n  <div class=\"set-wrap\">\n    <div class=\"table-container\" v-if=\"tab != 'config'\" :key=\"'nfts'\">\n      <div class=\"table-header\">\n        <div class=\"left\">\n          <span class=\"bfont mr-10\" :class=\"!box.isRepetition ? 'cblue' : 'cgreen' \">\n            {{ !box.isRepetition ? $t('blind.box.unRepeat') : $t('blind.box.isRepeat') }}</span>\n          <template v-if=\"!box.isRepetition\">\n            <span class=\"bfont mr-10\" :class=\"!repeatTip.max ? 'cred' : 'cgreen'\">\n              {{ $t('blind.box.amount') }} &le; {{ box.amount }}</span>\n            <span class=\"bfont mr-10\" :class=\"!repeatTip.typeAmount ? 'cred' : 'cgreen'\">\n              {{ $t('blind.box.NFTTypes') }} &ge; {{ box.nftAmount}}</span>\n          </template>\n          <span class=\"bfont mr-10\" :class=\"box.amount * box.nftAmount != useAmount ? 'cred' : 'cgreen'\">\n            {{$t('blind.box.totalAmount')}}:{{ box.amount * box.nftAmount}}({{ useAmount }})\n          </span>\n          <span class=\"cgreen bfont mr-10\" v-if=\"useAmount == box.amount * box.nftAmount\">{{$t('blind.box.success')}}</span>\n        </div>\n        <div class=\"right\">\n          <el-button @click=\"goConfig\" size=\"mini\" type=\"primary\">\n            {{ $t(\"blind.set.select\") }}\n          </el-button>\n        </div>\n      </div>\n      <el-table class=\"table-body\" v-loading=\"nftsLoading\" :data=\"nfts\" :element-loading-text=\"$t('util.loadingText')\" border tooltip-effect=\"dark\" style=\"width: 100%\">\n        <el-table-column align=\"center\" label=\"ID\" prop=\"id\" sortable></el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.name')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.name\">\n            {{scope.row.metadataContent.name}}\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.property')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.attributes\">\n            <div v-for=\"(attribute, i) in scope.row.metadataContent.attributes\" :key=\"i\">\n              {{ attribute.key}}: {{ attribute.value }}\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.set.picture')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.image\">\n            <media :isPreview=\"true\" :url=\"scope.row.metadataContent.image\" type=\"image\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.set.audioORvideo')\" prop=\"metadataContent\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.animation_url\">\n            <media :url=\"scope.row.metadataContent.animation_url\" :isPreview=\"true\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column :label=\"$t('blind.set.amount')\" width=\"120px\">\n          <template slot-scope=\"scope\">\n            <el-input @input=\"(e) => { onInput(scope, e) }\" type=\"number\" v-model=\"scope.row.amount\" :min=\"1\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column :label=\"$t('blind.box.probability')\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <span class=\"cred bfont\" v-if=\"useAmount != box.amount * box.nftAmount\"> - </span>\n            <span class=\"cgreen bfont\" v-else>{{ getProbability(scope.row) }}%</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column :label=\"$t('blind.operation')\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"danger\" size=\"mini\" @click=\"delNFT(scope.$index)\">{{ $t(\"blind.delete\") }}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"table-footer\">\n        <div class=\"left\">\n          <span class=\"cred bfont\" v-if=\"error\"> {{ error}} </span>\n        </div>\n        <div class=\"right\">\n          <el-button :loading=\"apiLoading\" @click=\"addData\" type=\"primary\">{{ $t(\"blind.confirm\") }}</el-button>\n        </div>\n\n      </div>\n    </div>\n    <div class=\"table-container\" v-else :key=\"'config'\">\n      <div class=\"table-header\">\n        <div class=\"left\">\n          <el-button type=\"text\" @click=\"goNfts\">\n            {{ $t(\"blind.set.back\") }}\n          </el-button>\n        </div>\n        <div class=\"right\">\n          <el-button size=\"mini\" type=\"primary\" @click=\"dialogVisible = true\">\n            {{ $t(\"blind.box.addNFT\") }}\n          </el-button>\n        </div>\n      </div>\n      <el-table class=\"table-body\" ref=\"multipleTable\" v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border tooltip-effect=\"dark\" style=\"width: 100%\"\n        @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n        <el-table-column align=\"center\" label=\"ID\" prop=\"id\" sortable></el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.name')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.name\">\n            {{scope.row.metadataContent.name}}\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.nft.property')\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.attributes\">\n            <div v-for=\"(attribute, i) in scope.row.metadataContent.attributes\" :key=\"i\">\n              {{ attribute.key}}: {{ attribute.value }}\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column align=\"center\" :label=\"$t('blind.set.picture')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.image\">\n            <media :isPreview=\"true\" :url=\"scope.row.metadataContent.image\" type=\"image\"></media>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" :label=\"$t('blind.set.audioORvideo')\" prop=\"metadataContent\" width=\"200px\">\n          <template slot-scope=\"scope\" v-if=\"scope.row.metadataContent.animation_url\">\n            <media :url=\"scope.row.metadataContent.animation_url\" :isPreview=\"true\"></media>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"table-footer\">\n        <div class=\"right\">\n          <el-button @click=\"selNFTs\" type=\"primary\">\n            {{ $t(\"blind.confirm\") }}\n          </el-button>\n        </div>\n      </div>\n    </div>\n    <el-dialog :title=\"$t('blind.add')\" :visible.sync=\"dialogVisible\" @open=\"onOpen\" append-to-body>\n      <el-form ref=\"formData\" :model=\"formData\" status-icon label-position=\"left\" label-width=\"120px\" :rules=\"rules\">\n        <el-form-item :label=\"$t('blind.nft.blindType')\" prop=\"address\">\n          <el-select disabled v-model=\"formData.address\" :placeholder=\"$t('blind.nft.pleaseSelect')\">\n            <el-option v-for=\"(blindType, index) in blindTypes\" :key=\"index\" :label=\"blindType.name\" :value=\"blindType.address\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.name')\" prop=\"name\">\n          <el-input v-model=\"formData.name\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.brief')\" prop=\"description\">\n          <el-input type=\"textarea\" v-model=\"formData.description\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.picture')\" prop=\"imgUrl\">\n          <el-upload ref=\"upload\" action=\"\" :auto-upload=\"false\" :show-file-list=\"false\" :file-list=\"fileListImage\" :limit=\"1\" class=\"avatar-uploader\"\n            accept=\"image/jpg, image/jpeg, image/png, image/gif\" :on-change=\"(file) => { uploadChange(file, 'uploadImage'); }\">\n            <template v-if=\"formData.imgUrl\">\n              <media :url=\"formData.imgUrl\" type=\"image\"></media>\n            </template>\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.audioORvideo')\" prop=\"animUrl\">\n          <el-upload ref=\"upload\" action=\"\"\n              :auto-upload=\"false\"\n              :show-file-list=\"false\"\n              :file-list=\"fileListVideo\"\n              :limit=\"1\"\n              class=\"avatar-uploader\"\n              accept=\"audio/mp3, audio/wav, audio/oga, video/webm, video/mp4, video/m4v, video/ogg, video/ogv, video/mov\"\n              :on-change=\" (file) => { uploadChange(file, 'uploadVideo'); }\"\n              >\n            <template v-if=\"formData.animUrl\">\n              <media :url=\"formData.animUrl\" :type=\"formData.animType\"></media>\n            </template>\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <el-form-item :label=\"$t('blind.nft.property')\">\n          <div class=\"property-group\" v-for=\"(property, i) in formData.properties\" :key=\"i\">\n            <div class=\"property left\">\n              <el-input v-model=\"property.key\" :placeholder=\"$t('blind.property.key')\" @input=\"propertyInput\"> </el-input>\n            </div>\n            <div class=\"property right\">\n              <el-input v-model=\"property.value\" :placeholder=\"$t('blind.property.value')\" @input=\"propertyInput\"> </el-input>\n            </div>\n          </div>\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click.native.prevent=\"dialogVisible=false\">\n          {{ $t(\"blind.cancel\") }}\n        </el-button>\n        <el-button :loading=\"apiLoading\" type=\"primary\" @click.native.prevent=\"addForm\">{{ $t(\"blind.confirm\") }}\n        </el-button>\n      </div>\n\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Media from \"@/components/Media\";\n  export default {\n    name: \"nftSet\",\n    components: { Media },\n    data () {\n      return {\n        tab: \"nfts\",\n        listLoading: true,\n        list: [],\n        nftsLoading: true,\n        nfts: [],\n        multipleSelection: [],\n        apiLoading: false,\n        error: \"\",\n        dialogVisible: false,\n        formData: {\n          address: \"\",\n          name: \"\",\n          description: \"\",\n          storageId: \"\",\n          imgUrl: \"\",\n          animStorageId: \"\",\n          animUrl: \"\",\n          animType: \"\",\n          properties: [{ key: \"\", value: \"\" }],\n        },\n        rules: {\n          address: {\n            required: true,\n            message: this.$t(\"blind.nft.emptyType\"),\n            trigger: \"change\",\n          },\n          imgUrl: {\n            required: true,\n            message: this.$t(\"blind.nft.emptyPicture\"),\n            trigger: \"blur\",\n          },\n        },\n        fileImage: \"\",\n        fileVideo: \"\",\n        fileListImage: [],\n        fileListVideo: [],\n      };\n    },\n    props: [\"box\"],\n    computed: {\n      useAmount () {\n        let amount = 0;\n        for (var i = 0;i < this.nfts.length;i++) {\n          var _amount = parseInt(this.nfts[i].amount)\n          amount += !_amount ? 0 : _amount;\n        }\n        return amount;\n      },\n      repeatTip () {\n        if (this.box.isRepetition) return;\n        let max = 0;\n        let typeAmount = this.nfts.length;\n        for (var i = 0;i < this.nfts.length;i++) {\n          var _amount = parseInt(this.nfts[i].amount)\n          max = _amount && _amount > max ? _amount : max;\n        }\n        return {\n          max: max <= parseInt(this.box.amount),\n          typeAmount: typeAmount >= parseInt(this.box.nftAmount)\n        }\n      },\n      blindTypes () {\n        return this.$store.state.user.blindTypes;\n      },\n    },\n    created () {\n      this.getNfts();\n    },\n    methods: {\n      getProbability (nft) {\n        let amount = parseInt(nft.amount)\n        if (!amount) return 0;\n        if (!this.box.isRepetition) {\n          return this.$tool.decimal((amount * 100) / this.box.amount, 2);\n        }\n        let totalAmount = this.box.amount * this.box.nftAmount;\n        let probability = 0;\n        for (var i = 0;i < this.box.nftAmount;i++) {\n          if (!probability) {\n            probability = (totalAmount - amount - i) / totalAmount;\n          } else {\n            probability = probability * (totalAmount - amount - i) / totalAmount;\n          }\n        }\n        return this.$tool.decimal((1 - probability) * 100, 2);\n      },\n      onInput (scope, e) {\n        this.nfts = [].concat(this.nfts);\n      },\n      getNfts () {\n        this.nftsLoading = true;\n        this.$api(\"blind.box.nfts\", { blindBoxId: this.box.id })\n          .then((res) => {\n            if (this.$tool.checkResponse(res)) {\n              for (var i = 0;i < res.data.list.length;i++) {\n                let nft = res.data.list[i];\n                nft.metadataContent = JSON.parse(\n                  nft.metadataContent\n                );\n                this.nfts.push(Object.assign({}, nft));\n              }\n            }\n            this.nftsLoading = false;\n          })\n          .catch(() => {\n            this.nftsLoading = false;\n          });\n      },\n      getList () {\n        this.listLoading = true;\n        this.$api(\"blind.nft.all\", { address: this.box.address })\n          .then((res) => {\n            if (this.$tool.checkResponse(res)) {\n              this.formatData(res.data.list);\n              this.list = res.data.list;\n              this.checkSelected();\n            }\n            this.listLoading = false;\n          })\n          .catch((err) => {\n            this.listLoading = false;\n          });\n      },\n      checkForm () {\n        let error = false\n        let total = this.box.amount * this.box.nftAmount;\n        if (total < this.useAmount) {\n          this.error = this.$t('blind.box.limitTotalAmount') + total;\n          error = true;\n        }\n        if (!this.box.isRepetition && !this.repeatTip.max) {\n          this.error = this.$t('blind.box.limitMaxAmount') + this.box.amount;\n          error = true;\n        }\n\n        return !error;\n      },\n      addData () {\n        if (!this.checkForm()) return;\n\n        if (this.apiLoading) return;\n        this.apiLoading = true;\n\n        let nfts = [];\n        for (var i = 0;i < this.nfts.length;i++) {\n          var nft = this.nfts[i];\n          nfts.push({\n            blindNftId: this.nfts[i].id,\n            amount: this.nfts[i].amount,\n            blindBoxId: this.box.id,\n            ...nft\n          });\n        }\n        nfts = JSON.stringify(nfts);\n        let data = {\n          blindBoxId: this.box.id,\n          nfts: nfts,\n        };\n        this.$api(\"blind.box.addNfts\", data)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.$notify.success({\n                title: this.$t(\"blind.success\"),\n                message: this.$t(\"blind.messageSuccess\"),\n              });\n              this.$emit(\"confirm\");\n            }\n          })\n          .catch((err) => {\n            this.apiLoading = false;\n            this.$notify.error({\n              title: this.$t(\"blind.fail\"),\n              message: this.$t(\"response.\" + err.data ? err.data.errno : \"\"),\n            });\n          });\n      },\n      goNfts () {\n        this.tab = \"nfts\";\n      },\n      goConfig () {\n        this.error = \"\";\n        this.tab = \"config\";\n        this.getList();\n      },\n      handleSelectionChange (val) {\n        this.multipleSelection = val;\n      },\n      selNFTs () {\n        this.nfts = this.multipleSelection;\n        var nfts = [];\n        console.log(\"this.nfts\", this.nfts);\n        for(var i = 0; i < this.nfts.length; i++){\n          console.log(\"i\", i);\n          var nft = Object.assign({}, this.nfts[i]);\n          nft.amount = 1;\n          nfts.push(nft);\n        }\n        this.nfts = nfts;\n        this.goNfts();\n      },\n      delNFT (index) {\n        this.nfts.splice(index, 1);\n        this.nfts = [].concat(this.nfts);\n      },\n      onOpen () {\n        this.formData = {\n          address: this.box.address,\n          name: \"\",\n          description: \"\",\n          imgUrl: \"\",\n          storageId: \"\",\n          animUrl: \"\",\n          animStorageId: \"\",\n          properties: [{ key: \"\", value: \"\" }],\n        };\n        this.fileImage = \"\";\n        this.fileVideo = \"\";\n      },\n      formatData (data) {\n        for (let i = 0, len = data.length;i < len;i++) {\n          data[i].metadataContent = JSON.parse(data[i].metadataContent);\n        }\n      },\n      checkSelected () {\n        this.$nextTick(function () {\n          for (var i = 0;i < this.list.length;i++) {\n            let row = this.list[i];\n            if (!this.existsNFT(row.id)) {\n              this.$refs.multipleTable.toggleRowSelection(row, false);\n            } else {\n              this.$refs.multipleTable.toggleRowSelection(row, true);\n            }\n          }\n        });\n      },\n      existsNFT (id) {\n        for (var i = 0;i < this.nfts.length;i++) {\n          let nft = this.nfts[i];\n          if (nft.blindNftId == id) return true;\n        }\n        return false;\n      },\n      propertyInput (e) {\n        let emptyC = 0;\n        for (var i = 0;i < this.formData.properties.length;i++) {\n          var property = this.formData.properties[i];\n          if (!property.key || !property.value) emptyC += 1;\n        }\n        if (emptyC != 1) {\n          this.formData.properties = this.formData.properties.filter(function (\n            property\n          ) {\n            return property.key || property.value;\n          });\n          this.formData.properties.push({ key: \"\", value: \"\" });\n        }\n        this.formData = JSON.parse(JSON.stringify(this.formData));\n      },\n      fullProperties (properties) {\n        var _properties = [];\n        for (var i = 0;i < properties.length;i++) {\n          var key = properties[i].key.trim();\n          var value = properties[i].value.trim();\n          if (!key || !value) continue;\n          var trait_type = key;\n          _properties.push({ key, value, trait_type });\n        }\n        return _properties;\n      },\n      uploadChange (files, uploadType) {\n        if (uploadType === \"uploadImage\") {\n          this.fileListImage = [];\n          this.fileImage = files.raw;\n        }\n        if (uploadType === \"uploadVideo\") {\n          this.fileListVideo = [];\n          this.fileVideo = files.raw;\n        }\n        var event = event || window.event;\n        var file = event.target.files[0];\n        var reader = new FileReader();\n        var _this = this;\n        reader.onload = function (e) {\n          if (uploadType === \"uploadImage\") {\n            _this.formData.imgUrl = e.target.result;\n          }\n          if (uploadType === \"uploadVideo\") {\n            _this.formData.animUrl = e.target.result;\n            _this.formData.animType = file.type;\n            console.log(\"animType\", file.type);\n          }\n        };\n        reader.readAsDataURL(file);\n      },\n      handlerUploadImage () {\n        return new Promise((resolve, reject) => {\n          let formData = new FormData();\n          formData.append(\"file\", this.fileImage);\n          formData.append(\"flag\", \"ipfs\");\n          this.$api(\"storage.create\", formData)\n            .then((res) => {\n              if (this.$tool.checkResponse(res)) {\n                resolve(res.data);\n              } else {\n                reject(res);\n              }\n            })\n            .catch((err) => {\n              reject(err);\n            });\n        });\n      },\n      handlerUploadVideo () {\n        return new Promise((resolve, reject) => {\n          let formData = new FormData();\n          formData.append(\"files\", this.fileVideo);\n          formData.append(\"files\", this.fileImage);\n          this.$api(\"storage.multiupload\", formData)\n            .then((res) => {\n              if (this.$tool.checkResponse(res)) {\n                resolve(res.data);\n              } else {\n                reject(res);\n              }\n            })\n            .catch((err) => {\n              reject(err);\n            });\n        });\n      },\n      addForm () {\n        this.$refs[\"formData\"].validate((valid) => {\n          if (valid && !this.apiLoading) {\n            this.apiLoading = true;\n            let promiseArr = [];\n            if (this.fileVideo) {\n              promiseArr = [this.handlerUploadVideo()];\n            } else {\n              promiseArr = [this.handlerUploadImage()];\n            }\n            Promise.all(promiseArr)\n              .then((res) => {\n                this.addNFT(res);\n              })\n              .catch((err) => {\n                this.failCallback();\n              });\n          }\n        });\n      },\n      addNFT (fileData) {\n        let {\n          address,\n          name,\n          description,\n          storageId,\n          imgUrl,\n          animStorageId,\n          animUrl,\n          properties,\n        } = this.formData;\n        if (fileData) {\n          storageId = this.fileVideo ? fileData[0][1].id : fileData[0].id;\n          imgUrl = this.fileVideo\n            ? fileData[0][1].ipfshash\n            : fileData[0].ipfshash;\n          animStorageId = this.fileVideo ? fileData[0][0].id : \"\";\n          animUrl = this.fileVideo ? fileData[0][0].ipfshash : \"\";\n        } else {\n          storageId = imgUrl = animStorageId = animUrl = \"\";\n        }\n        let propertys = this.fullProperties(properties);\n        propertys = JSON.stringify(propertys);\n        let sendData = {\n          address,\n          name,\n          description,\n          type: 5,\n          storageId,\n          imgUrl,\n          animStorageId,\n          animUrl,\n          propertys,\n        };\n        this.$api(\"blind.nft.add\", sendData)\n          .then((res) => {\n            this.apiLoading = false;\n            if (this.$tool.checkResponse(res)) {\n              this.$notify.success({\n                title: this.$t(\"blind.success\"),\n                message: this.$t(\"blind.messageSuccess\"),\n              });\n              this.dialogVisible = false;\n              this.getList();\n            }\n          })\n          .catch((err) => {\n            this.failCallback(err);\n          });\n      },\n      failCallback (err) {\n        this.apiLoading = false;\n        this.$notify.error({\n          title: this.$t(\"blind.fail\"),\n          message: err\n            ? this.$t(\"response.\" + err.data ? err.data.errno : \"\")\n            : this.$t(\"blind.messageFail\"),\n        });\n        this.dialogVisible = false;\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .table-container {\n    position: relative;\n    height: 60vh;\n    .table-body {\n      position: absolute;\n      top: 35px;\n      left: 0;\n      right: 0;\n      bottom: 50px;\n      overflow-y: scroll;\n    }\n    .table-footer {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n  }\n\n  .el-table__row audio {\n    width: 80%;\n  }\n  .table-header {\n    display: flex;\n    margin-bottom: 10px;\n    align-items: center;\n    .right {\n      flex: 1;\n      text-align: right;\n    }\n  }\n  .table-footer {\n    display: flex;\n    margin-top: 10px;\n    .right {\n      flex: 1;\n      text-align: right;\n    }\n  }\n  .set-wrap {\n    max-height: 60vh;\n    overflow: hidden;\n    overflow-y: auto;\n  }\n\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #20a0ff;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n  }\n  .avatar {\n    width: 145px;\n    height: 145px;\n    display: block;\n  }\n\n  .el-table__row audio {\n    width: 80%;\n  }\n\n  .property-group {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 15px;\n    .property {\n      flex: 1;\n    }\n    .left {\n      padding-right: 40px;\n    }\n  }\n  .el-upload audio {\n    width: 300px;\n  }\n</style>\n"]}]}