{"remainingRequest":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\sys\\role.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\src\\views\\sys\\role.vue","mtime":1650964597000},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1652081856293},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652081880827},{"path":"C:\\Users\\97154\\Desktop\\SONGTRADER-V2-FULL\\fingernft_blindbox\\fingernft_blindbox\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1652081880134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogIlJvbGUiLAoJY29tcG9uZW50czogeyBQYWdpbmF0aW9uIH0sCglkYXRhICgpIHsKCQlyZXR1cm4gewoJCQlsaXN0OiBudWxsLAoJCQl0b3RhbDogMCwKCQkJbGlzdExvYWRpbmc6IHRydWUsCgkJCWxpc3RRdWVyeTogewoJCQkJcGFnZTogMSwKCQkJCWxpbWl0OiAyMCwKCQkJCW5hbWU6ICcnLAoJCQkJc29ydDogImNyZWF0ZV90aW1lIiwKCQkJCW9yZGVyOiAiZGVzYyIsCgkJCX0sCgkJCWRhdGFGb3JtOiB7CgkJCQlpZDogdW5kZWZpbmVkLAoJCQkJbmFtZTogdW5kZWZpbmVkLAoJCQkJZGVzYzogdW5kZWZpbmVkLAoJCQl9LAoJCQlkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCgkJCWRpYWxvZ1N0YXR1czogIiIsCgkJCXRleHRNYXA6IHsKCQkJCXVwZGF0ZTogdGhpcy4kdCgnc3lzdGVtTWFuYWdlbWVudC5lZGl0JyksCgkJCQljcmVhdGU6IHRoaXMuJHQoJ3N5c3RlbU1hbmFnZW1lbnQuY3JlYXRlJyksCgkJCX0sCgkJCXJ1bGVzOiB7CgkJCQluYW1lOiBbCgkJCQkJeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgnc3lzdGVtTWFuYWdlbWVudC5ydWxlMycpLCB0cmlnZ2VyOiAiYmx1ciIgfSwKCQkJCV0sCgkJCX0sCgkJCXBlcm1pc3Npb25EaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCgkJCXN5c3RlbVBlcm1pc3Npb25zOiBudWxsLAoJCQlhc3NpZ25lZFBlcm1pc3Npb25zOiBudWxsLAoJCQlwZXJtaXNzaW9uRm9ybTogewoJCQkJcm9sZUlkOiB1bmRlZmluZWQsCgkJCQlwZXJtaXNzaW9uczogW10sCgkJCX0sCgkJfTsKCX0sCgljcmVhdGVkICgpIHsKCQl0aGlzLmdldExpc3QoKTsKCX0sCgltZXRob2RzOiB7CgkJZ2V0TGlzdCAoKSB7CgkJCXRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwoJCQl0aGlzLiRhcGkoInJvbGUubGlzdCIsIHRoaXMubGlzdFF1ZXJ5KQoJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0OwoJCQkJCXRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwoJCQkJCXRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKCQkJCX0pCgkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCXRoaXMubGlzdCA9IFtdOwoJCQkJCXRoaXMudG90YWwgPSAwOwoJCQkJCXRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKCQkJCX0pOwoJCX0sCgkJaGFuZGxlRmlsdGVyICgpIHsKCQkJdGhpcy5saXN0UXVlcnkucGFnZSA9IDE7CgkJCXRoaXMuZ2V0TGlzdCgpOwoJCX0sCgkJcmVzZXRGb3JtICgpIHsKCQkJdGhpcy5kYXRhRm9ybSA9IHsKCQkJCWlkOiB1bmRlZmluZWQsCgkJCQluYW1lOiB1bmRlZmluZWQsCgkJCQlkZXNjOiB1bmRlZmluZWQsCgkJCX07CgkJfSwKCQloYW5kbGVDcmVhdGUgKCkgewoJCQl0aGlzLnJlc2V0Rm9ybSgpOwoJCQl0aGlzLmRpYWxvZ1N0YXR1cyA9ICJjcmVhdGUiOwoJCQl0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKCQkJdGhpcy4kbmV4dFRpY2soKCkgPT4gewoJCQkJdGhpcy4kcmVmc1siZGF0YUZvcm0iXS5jbGVhclZhbGlkYXRlKCk7CgkJCX0pOwoJCX0sCgkJY3JlYXRlRGF0YSAoKSB7CgkJCXRoaXMuJHJlZnNbImRhdGFGb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CgkJCQlpZiAodmFsaWQpIHsKCQkJCQl0aGlzLiRhcGkoJ3JvbGUuY3JlYXRlUm9sZScsIHRoaXMuZGF0YUZvcm0pCgkJCQkJCS50aGVuKChyZXNwb25zZSkgPT4gewoJCQkJCQkJdGhpcy5saXN0LnVuc2hpZnQocmVzcG9uc2UuZGF0YS5kYXRhKTsKCQkJCQkJCXRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCQkJCQkJCXRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKCQkJCQkJCQl0aXRsZTogdGhpcy4kdCgndXRpbC5zdWNjZXNzJyksCgkJCQkJCQkJbWVzc2FnZTogdGhpcy4kdCgnc3lzdGVtTWFuYWdlbWVudC5yb2xlQWRkZWRTdWNjZXNzZnVsbHknKSwKCQkJCQkJCX0pOwoJCQkJCQkJdGhpcy5nZXRMaXN0KCk7CgkJCQkJCX0pCgkJCQkJCS5jYXRjaCgocmVzcG9uc2UpID0+IHsKCQkJCQkJCXRoaXMuJG5vdGlmeS5lcnJvcih7CgkJCQkJCQkJdGl0bGU6IHRoaXMuJHQoJ3V0aWwuZmFpbCcpLAoJCQkJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoJ3Jlc3BvbnNlLicgKyByZXNwb25zZS5kYXRhLmVycm5vKSwKCQkJCQkJCX0pOwoJCQkJCQl9KTsKCQkJCX0KCQkJfSk7CgkJfSwKCQloYW5kbGVVcGRhdGUgKHJvdykgewoJCQl0aGlzLmRhdGFGb3JtID0gT2JqZWN0LmFzc2lnbih7fSwgcm93KTsKCQkJdGhpcy5kaWFsb2dTdGF0dXMgPSAidXBkYXRlIjsKCQkJdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CgkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHsKCQkJCXRoaXMuJHJlZnNbImRhdGFGb3JtIl0uY2xlYXJWYWxpZGF0ZSgpOwoJCQl9KTsKCQl9LAoJCXVwZGF0ZURhdGEgKCkgewoJCQl0aGlzLiRyZWZzWyJkYXRhRm9ybSJdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewoJCQkJaWYgKHZhbGlkKSB7CgkJCQkJdGhpcy4kYXBpKCdyb2xlLnVwZGF0ZVJvbGUnLCB0aGlzLmRhdGFGb3JtKQoJCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJCQkJCWZvciAoY29uc3QgdiBvZiB0aGlzLmxpc3QpIHsKCQkJCQkJCQlpZiAodi5pZCA9PT0gdGhpcy5kYXRhRm9ybS5pZCkgewoJCQkJCQkJCQljb25zdCBpbmRleCA9IHRoaXMubGlzdC5pbmRleE9mKHYpOwoJCQkJCQkJCQl0aGlzLmxpc3Quc3BsaWNlKGluZGV4LCAxLCB0aGlzLmRhdGFGb3JtKTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwoJCQkJCQkJaWYgKCFyZXNwb25zZS5lcnJubykgewoJCQkJCQkJCXRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKCQkJCQkJCQkJdGl0bGU6IHRoaXMuJHQoJ3V0aWwuc3VjY2VzcycpLAoJCQkJCQkJCQltZXNzYWdlOiB0aGlzLiR0KCdzeXN0ZW1NYW5hZ2VtZW50LnVwZGF0ZUFkbWluaXN0cmF0b3JTdWNjZWVkZWQnKSwKCQkJCQkJCQl9KTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UgewoJCQkJCQkJCXRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKCQkJCQkJCQkJdGl0bGU6IHRoaXMuJHQoJ3V0aWwuZmFpbCcpLAoJCQkJCQkJCQltZXNzYWdlOiB0aGlzLiR0KCdzeXN0ZW1NYW5hZ2VtZW50LnVwZGF0ZUFkbWluaXN0cmF0b3JGYWlsZWQnKSwKCQkJCQkJCQl9KTsKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQkJLmNhdGNoKChyZXNwb25zZSkgPT4gewoJCQkJCQkJdGhpcy4kbm90aWZ5LmVycm9yKHsKCQkJCQkJCQl0aXRsZTogdGhpcy4kdCgndXRpbC5mYWlsJyksCgkJCQkJCQkJbWVzc2FnZTogdGhpcy4kdCgncmVzcG9uc2UuJyArIHJlc3BvbnNlLmRhdGEuZXJybm8pLAoJCQkJCQkJfSk7CgkJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQl9LAoJCWhhbmRsZURlbGV0ZSAocm93KSB7CgkJCXRoaXMuJGFwaSgncm9sZS5kZWxldGVSb2xlJywgeyBpZDogcm93LmlkIH0pCgkJCQkudGhlbigocmVzcG9uc2UpID0+IHsKCQkJCQlpZiAoIXJlc3BvbnNlLmVycm5vKSB7CgkJCQkJCXRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKCQkJCQkJCXRpdGxlOiB0aGlzLiR0KCd1dGlsLnN1Y2Nlc3MnKSwKCQkJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoJ3N5c3RlbU1hbmFnZW1lbnQuYWRtaW5pc3RyYXRvckRlbGV0ZWRTdWNjZXNzZnVsbHknKSwKCQkJCQkJfSk7CgkJCQkJfQoJCQkJCWVsc2UgewoJCQkJCQl0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CgkJCQkJCQl0aXRsZTogdGhpcy4kdCgndXRpbC5mYWlsJyksCgkJCQkJCQltZXNzYWdlOiB0aGlzLiR0KCdzeXN0ZW1NYW5hZ2VtZW50LmZhaWxlZFRvRGVsZXRlQWRtaW5pc3RyYXRvcicpLAoJCQkJCQl9KTsKCQkJCQl9CgkJCQkJdGhpcy5nZXRMaXN0KCk7CgkJCQl9KQoJCQkJLmNhdGNoKChyZXNwb25zZSkgPT4gewoJCQkJCXRoaXMuJG5vdGlmeS5lcnJvcih7CgkJCQkJCXRpdGxlOiB0aGlzLiR0KCd1dGlsLmZhaWwnKSwKCQkJCQkJbWVzc2FnZTogdGhpcy4kdCgncmVzcG9uc2UuJyArIHJlc3BvbnNlLmRhdGEuZXJybm8pLAoJCQkJCX0pOwoJCQkJfSk7CgkJfSwKCQloYW5kbGVQZXJtaXNzaW9uIChyb3cpIHsKCQkJdGhpcy5wZXJtaXNzaW9uRGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwoJCQl0aGlzLnBlcm1pc3Npb25Gb3JtLnJvbGVJZCA9IHJvdy5pZDsKCQkJdGhpcy4kYXBpKCJyb2xlLmdldFBlcm1pc3Npb24iLCB7IHJvbGVJZDogcm93LmlkIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQl0aGlzLnN5c3RlbVBlcm1pc3Npb25zID0gcmVzcG9uc2UuZGF0YS5zeXN0ZW1QZXJtaXNzaW9uczsKCQkJCXRoaXMuYXNzaWduZWRQZXJtaXNzaW9ucyA9IHJlc3BvbnNlLmRhdGEuYXNzaWduZWRQZXJtaXNzaW9uczsKCQkJfSkKCQl9LAoJCXVwZGF0ZVBlcm1pc3Npb24gKCkgewoJCQl0aGlzLnBlcm1pc3Npb25Gb3JtLnBlcm1pc3Npb25zID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKHRydWUpLmpvaW4oIiwiKTsKCQkJdGhpcy4kYXBpKCJyb2xlLnVwZGF0ZVBlcm1pc3Npb24iLCB0aGlzLnBlcm1pc3Npb25Gb3JtKQoJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJdGhpcy5wZXJtaXNzaW9uRGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCQkJCQlpZiAoIXJlc3BvbnNlLmVycm5vKSB7CgkJCQkJCXRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKCQkJCQkJCXRpdGxlOiB0aGlzLiR0KCd1dGlsLnN1Y2Nlc3MnKSwKCQkJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoJ3N5c3RlbU1hbmFnZW1lbnQuYXV0aG9yaXphdGlvblN1Y2NlZWRlZCcpLAoJCQkJCQl9KTsKCQkJCQl9IGVsc2UgewoJCQkJCQl0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CgkJCQkJCQl0aXRsZTogdGhpcy4kdCgndXRpbC5mYWlsJyksCgkJCQkJCQltZXNzYWdlOiB0aGlzLiR0KCdzeXN0ZW1NYW5hZ2VtZW50LmF1dGhvcml6YXRpb25GYWlsZWQnKSwKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfSkKCQkJCS5jYXRjaCgocmVzcG9uc2UpID0+IHsKCQkJCQl0aGlzLiRub3RpZnkuZXJyb3IoewoJCQkJCQl0aXRsZTogdGhpcy4kdCgndXRpbC5mYWlsJyksCgkJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoJ3Jlc3BvbnNlLicgKyByZXNwb25zZS5kYXRhLmVycm5vKSwKCQkJCQl9KTsKCQkJCX0pOwoJCX0sCgl9LAp9Owo="},{"version":3,"sources":["role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"role.vue","sourceRoot":"src/views/sys","sourcesContent":["<template>\n\t<div class=\"app-container\">\n\n\t\t<!-- 查询和其他操作 -->\n\t\t<div class=\"filter-container\">\n\t\t\t<el-input v-model=\"listQuery.name\" clearable class=\"filter-item width-200px mr-10\" :placeholder=\"$t('systemManagement.placeholder3')\" />\n\t\t\t<el-button v-permission=\"['GET /admin/role/list']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">{{$t('systemManagement.select')}}</el-button>\n\t\t\t<el-button v-permission=\"['POST /admin/role/create']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleCreate\">{{$t('systemManagement.add')}}</el-button>\n\t\t</div>\n\n\t\t<!-- 查询结果 -->\n\t\t<el-table v-loading=\"listLoading\" :data=\"list\" :element-loading-text=\"$t('util.loadingText')\" border fit highlight-current-row>\n\t\t\t<el-table-column align=\"center\" :label=\"$t('systemManagement.roleName')\" prop=\"name\" sortable />\n\n\t\t\t<el-table-column align=\"center\" :label=\"$t('systemManagement.description')\" prop=\"desc\" />\n\n\t\t\t<el-table-column align=\"center\" :label=\"$t('systemManagement.operation')\" class-name=\"small-padding fixed-width\">\n\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t<el-button v-permission=\"['POST /admin/role/update']\" type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope.row)\">{{$t('systemManagement.edit')}}</el-button>\n\t\t\t\t\t<el-button v-permission=\"['POST /admin/role/delete']\" type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.row)\">{{$t('systemManagement.delete')}}</el-button>\n\t\t\t\t\t<el-button v-permission=\"['POST /admin/role/permissions']\" type=\"primary\" size=\"mini\" @click=\"handlePermission(scope.row)\">{{$t('systemManagement.authorization')}}</el-button>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</el-table>\n\n\t\t<pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n\t\t<!-- 添加或修改对话框 -->\n\t\t<el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n\t\t\t<el-form ref=\"dataForm\" :rules=\"rules\" :model=\"dataForm\" status-icon label-position=\"left\" label-width=\"100px\" class=\"dataFormClass\">\n\t\t\t\t<el-form-item :label=\"$t('systemManagement.roleName')\" prop=\"name\">\n\t\t\t\t\t<el-input v-model=\"dataForm.name\" />\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item :label=\"$t('systemManagement.description')\" prop=\"desc\">\n\t\t\t\t\t<el-input v-model=\"dataForm.desc\" />\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"dialogFormVisible = false\">{{$t('util.cancel')}}</el-button>\n\t\t\t\t<el-button v-if=\"dialogStatus=='create'\" type=\"primary\" @click=\"createData\">{{$t('util.confirm')}}</el-button>\n\t\t\t\t<el-button v-else type=\"primary\" @click=\"updateData\">{{$t('util.confirm')}}</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t\t<!-- 权限配置对话框 -->\n\t\t<el-dialog :visible.sync=\"permissionDialogFormVisible\" :title=\"$t('systemManagement.permissionConfiguration')\">\n\t\t\t<el-tree ref=\"tree\" :data=\"systemPermissions\" :default-checked-keys=\"assignedPermissions\" show-checkbox node-key=\"id\" highlight-current>\n\t\t\t\t<span slot-scope=\"{ data }\" class=\"custom-tree-node\">\n\t\t\t\t\t<span>{{ data.label }}</span>\n\t\t\t\t\t<el-tag v-if=\"data.api\" type=\"success\" size=\"mini\">{{ data.api }}</el-tag>\n\t\t\t\t</span>\n\t\t\t</el-tree>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"permissionDialogFormVisible = false\">{{$t('util.cancel')}}</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"updatePermission\">{{$t('util.confirm')}}</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\n\t</div>\n</template>\n\n<script>\n\timport Pagination from \"@/components/Pagination\";\n\texport default {\n\t\tname: \"Role\",\n\t\tcomponents: { Pagination },\n\t\tdata () {\n\t\t\treturn {\n\t\t\t\tlist: null,\n\t\t\t\ttotal: 0,\n\t\t\t\tlistLoading: true,\n\t\t\t\tlistQuery: {\n\t\t\t\t\tpage: 1,\n\t\t\t\t\tlimit: 20,\n\t\t\t\t\tname: '',\n\t\t\t\t\tsort: \"create_time\",\n\t\t\t\t\torder: \"desc\",\n\t\t\t\t},\n\t\t\t\tdataForm: {\n\t\t\t\t\tid: undefined,\n\t\t\t\t\tname: undefined,\n\t\t\t\t\tdesc: undefined,\n\t\t\t\t},\n\t\t\t\tdialogFormVisible: false,\n\t\t\t\tdialogStatus: \"\",\n\t\t\t\ttextMap: {\n\t\t\t\t\tupdate: this.$t('systemManagement.edit'),\n\t\t\t\t\tcreate: this.$t('systemManagement.create'),\n\t\t\t\t},\n\t\t\t\trules: {\n\t\t\t\t\tname: [\n\t\t\t\t\t\t{ required: true, message: this.$t('systemManagement.rule3'), trigger: \"blur\" },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tpermissionDialogFormVisible: false,\n\t\t\t\tsystemPermissions: null,\n\t\t\t\tassignedPermissions: null,\n\t\t\t\tpermissionForm: {\n\t\t\t\t\troleId: undefined,\n\t\t\t\t\tpermissions: [],\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tcreated () {\n\t\t\tthis.getList();\n\t\t},\n\t\tmethods: {\n\t\t\tgetList () {\n\t\t\t\tthis.listLoading = true;\n\t\t\t\tthis.$api(\"role.list\", this.listQuery)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.list = response.data.list;\n\t\t\t\t\t\tthis.total = response.data.total;\n\t\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.list = [];\n\t\t\t\t\t\tthis.total = 0;\n\t\t\t\t\t\tthis.listLoading = false;\n\t\t\t\t\t});\n\t\t\t},\n\t\t\thandleFilter () {\n\t\t\t\tthis.listQuery.page = 1;\n\t\t\t\tthis.getList();\n\t\t\t},\n\t\t\tresetForm () {\n\t\t\t\tthis.dataForm = {\n\t\t\t\t\tid: undefined,\n\t\t\t\t\tname: undefined,\n\t\t\t\t\tdesc: undefined,\n\t\t\t\t};\n\t\t\t},\n\t\t\thandleCreate () {\n\t\t\t\tthis.resetForm();\n\t\t\t\tthis.dialogStatus = \"create\";\n\t\t\t\tthis.dialogFormVisible = true;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs[\"dataForm\"].clearValidate();\n\t\t\t\t});\n\t\t\t},\n\t\t\tcreateData () {\n\t\t\t\tthis.$refs[\"dataForm\"].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.$api('role.createRole', this.dataForm)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tthis.list.unshift(response.data.data);\n\t\t\t\t\t\t\t\tthis.dialogFormVisible = false;\n\t\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\t\ttitle: this.$t('util.success'),\n\t\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.roleAddedSuccessfully'),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\t\t\tmessage: this.$t('response.' + response.data.errno),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleUpdate (row) {\n\t\t\t\tthis.dataForm = Object.assign({}, row);\n\t\t\t\tthis.dialogStatus = \"update\";\n\t\t\t\tthis.dialogFormVisible = true;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs[\"dataForm\"].clearValidate();\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdateData () {\n\t\t\t\tthis.$refs[\"dataForm\"].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.$api('role.updateRole', this.dataForm)\n\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\tfor (const v of this.list) {\n\t\t\t\t\t\t\t\t\tif (v.id === this.dataForm.id) {\n\t\t\t\t\t\t\t\t\t\tconst index = this.list.indexOf(v);\n\t\t\t\t\t\t\t\t\t\tthis.list.splice(index, 1, this.dataForm);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.dialogFormVisible = false;\n\t\t\t\t\t\t\t\tif (!response.errno) {\n\t\t\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\t\t\ttitle: this.$t('util.success'),\n\t\t\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.updateAdministratorSucceeded'),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.updateAdministratorFailed'),\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\t\t\tmessage: this.$t('response.' + response.data.errno),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleDelete (row) {\n\t\t\t\tthis.$api('role.deleteRole', { id: row.id })\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (!response.errno) {\n\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\ttitle: this.$t('util.success'),\n\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.administratorDeletedSuccessfully'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.failedToDeleteAdministrator'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\tmessage: this.$t('response.' + response.data.errno),\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\t\t\thandlePermission (row) {\n\t\t\t\tthis.permissionDialogFormVisible = true;\n\t\t\t\tthis.permissionForm.roleId = row.id;\n\t\t\t\tthis.$api(\"role.getPermission\", { roleId: row.id }).then((response) => {\n\t\t\t\t\tthis.systemPermissions = response.data.systemPermissions;\n\t\t\t\t\tthis.assignedPermissions = response.data.assignedPermissions;\n\t\t\t\t})\n\t\t\t},\n\t\t\tupdatePermission () {\n\t\t\t\tthis.permissionForm.permissions = this.$refs.tree.getCheckedKeys(true).join(\",\");\n\t\t\t\tthis.$api(\"role.updatePermission\", this.permissionForm)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.permissionDialogFormVisible = false;\n\t\t\t\t\t\tif (!response.errno) {\n\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\ttitle: this.$t('util.success'),\n\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.authorizationSucceeded'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$notify.success({\n\t\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\t\tmessage: this.$t('systemManagement.authorizationFailed'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((response) => {\n\t\t\t\t\t\tthis.$notify.error({\n\t\t\t\t\t\t\ttitle: this.$t('util.fail'),\n\t\t\t\t\t\t\tmessage: this.$t('response.' + response.data.errno),\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t},\n\t\t},\n\t};\n</script>\n<style scoped>\n\t.width-200px {\n\t\twidth: 200px;\n\t}\n\t.dataFormClass {\n\t\twidth: 400px;\n\t\tmargin-left: 50px;\n\t}\n</style>\n"]}]}